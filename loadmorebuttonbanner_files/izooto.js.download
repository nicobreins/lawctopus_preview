!function(o){var i={};function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}n.m=o,n.c=i,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=16)}([function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(o,t){function i(e){try{r(l.next(e))}catch(e){t(e)}}function n(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?o(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}r((l=l.apply(e,a||[])).next())})},n=this&&this.__generator||function(o,i){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(o,s)}catch(e){t=[6,e],r=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var r=o(1),a=o(4),s=o(2),l=o(7),o=(c.setupPath=function(){1!=c.global.deviceType&&""!=c.notification.serviceWorkerNameMob&&(c.notification.serviceWorkerName=c.notification.serviceWorkerNameMob),c.notification.serviceWorkerPath=c.notification.domainRoot+c.notification.serviceWorkerName,c.notification.manifest=c.notification.domainRoot+c.notification.manifestName,1==c.notification.isSdkHttps&&("http:"==c.global.locationProtocol?c.notification.sourceOrigin=c.notification.sourceOrigin+c.notification.domainRoot+c.notification.htmlName:(1==c.notification.httpsNoRoot&&""!=c.notification.domainRoot||0==c.notification.httpsNoRoot)&&(c.notification.sourceOrigin=c.notification.domainRoot+c.notification.htmlName));try{var e;null==window._izootoModule&&1!=window.is_wp||(c.notification.pluginStatus=void 0!==izConfig.pluginStatus?izConfig.pluginStatus:1,1==c.notification.pluginStatus&&(l.CookieStorage.setWpCookie("bType",c.global.browserType),l.CookieStorage.setWpCookie("dType",c.global.deviceType),null!=window._izootoModule&&1==window._izootoModule.isMagento?null!=(e=window._izootoModule).isSdkHttps&&1==e.isSdkHttps&&(c.notification.serviceWorkerPath="/izooto/assets/sw",c.notification.manifest="/izooto/assets/manifest",c.notification.serviceWorkerScope="/",l.CookieStorage.setWpCookie("evtTrk",c.notification.evtTracking)):null!=window._izootoModule&&1==window._izootoModule.isPrestashop||null!=window._izootoModule&&1==window._izootoModule.isOpencart||1==window.is_wp&&(l.CookieStorage.setWpCookie("evtTrk",c.notification.evtTracking),null!=window._izootoModule&&null!=window._izootoModule.swPath?(c.notification.serviceWorkerPath=window._izootoModule.swPath,c.notification.serviceWorkerScope="/"):c.notification.serviceWorkerPath=c.notification.domainRoot+"/?izooto=sw",c.notification.manifest=c.notification.domainRoot+"/?izooto=manifest")))}catch(e){}},c.multiMessengerConfigHandler=function(){if(izConfig.messenger&&0<Object.keys(izConfig.messenger).length){var e,t=0;for(e in izConfig.messenger){var o=izConfig.messenger[e],i=r.Helper.stringToRegex(o.regex),n=document.location.pathname;if((0==t&&""==i||i.test(n)&&0==t)&&(c.messenger.status=null!=o.status?o.status:0,c.messenger.pageId=e.toString(),c.messenger.prompt=null!=o.promptDesign?o.promptDesign:{},c.messenger.repeatDelay=null!=o.repeatDelay?o.repeatDelay:0,c.messenger.color=null!=o.color?o.color:"blue",c.messenger.size=null!=o.size?o.size:"large",c.messenger.buttonTextType=null!=o.btnTextType?o.btnTextType:0,""!=i))return void(t=1)}}},c.gaMigration=function(){var e=void 0!==izConfig.gaId?izConfig.gaId:"";c.ga.oldId=e;var t=void 0!==izConfig.ga&&""!==izConfig.ga?izConfig.ga:{},o=void 0!==t.id?t.id:"",i=void 0!==t.syncWebPush?t.syncWebPush:0,n=void 0!==t.syncNewsHub?t.syncNewsHub:0;c.ga.id=""!==e?e:o,c.ga.syncWebPush=""!==e?1:i,c.ga.syncNewsHub=""!==c.newsHub.gaId?1:n,c.ga.syncMessenger=void 0!==t.syncMessenger?t.syncMessenger:0,c.ga.newsHubEvents=void 0!==t.newsHubEvents?t.newsHubEvents:[]},c.init=function(){return i(this,void 0,void 0,function(){var t;return n(this,function(e){switch(e.label){case 0:return c.brandingPartner=void 0!==izConfig.brandingPartner&&""!=izConfig.brandingPartner?izConfig.brandingPartner:c.defaultBrandingPartner,c.client=void 0!==izConfig.client?izConfig.client:r.Helper.throwError(c.brandingPartner+":: Configuration parameter not found (client)"),c.notification.sourceOrigin=void 0!==izConfig.sourceOrigin?izConfig.sourceOrigin:r.Helper.throwError(c.brandingPartner+":: Configuration parameter not found (sourceOrigin)"),c.notification.domainRoot=void 0!==izConfig.domainRoot?izConfig.domainRoot:r.Helper.throwError(c.brandingPartner+":: Configuration parameter not found (domainRoot)"),c.notification.isSdkHttps=void 0!==izConfig.isSdkHttps?izConfig.isSdkHttps:r.Helper.throwError(c.brandingPartner+":: Configuration parameter not found (isSdkHttps)"),c.notification.serviceWorkerName=void 0!==izConfig.serviceWorkerName?izConfig.serviceWorkerName:r.Helper.throwError(c.brandingPartner+":: Configuration parameter not found (serviceWorkerName)"),c.notification.manifestName=void 0!==izConfig.manifestName?izConfig.manifestName:r.Helper.throwError(c.brandingPartner+":: Configuration parameter not found (manifestName)"),c.global.browserName=r.Helper.getBrowserName(),c.global.browserType=r.Helper.getBrowserType(),c.global.deviceType=r.Helper.getDeviceType(),c.global.browserVer=r.Helper.getBrowserVersion(),c.global.browserMajorVersion=r.Helper.getBrowserMajorVersion(),c.global.os=r.Helper.getOS(),c.global.platform=r.Helper.detectPlatform(),c.notification.windowType=a.NotificationHelper.getWindowType(),c.notification.serviceWorkerPath=""+c.notification.domainRoot+c.notification.serviceWorkerName,c.notification.isAddFcm=r.Helper.checkForFcm(),!c.notification.fcmEnable&&1!=c.notification.isAddFcm||(c.notification.subscriptionType=1),void 0!==c.notification.vapidKey&&""!==c.notification.vapidKey&&(c.notification.fcmEnable=0,c.notification.subscriptionType=2),c.global.browserName==s.KeyMapper.BROWSER_SAFARI&&(c.notification.subscriptionType=3),c.ga.syncCid=void 0!==izConfig.syncGACid?izConfig.syncGACid:0,c.ga.swEvents=void 0!==izConfig.gaSwEvents?izConfig.gaSwEvents:0,1!=c.global.deviceType&&(c.notification.promptDesign=void 0!==izConfig.mobPromptDesign&&izConfig.mobPromptDesign?izConfig.mobPromptDesign:c.notification.promptDesign,c.notification.promptType=void 0!==izConfig.mobPromptFlow?izConfig.mobPromptFlow:c.notification.promptType,c.notification.optInDesignType=void 0!==izConfig.mobOptInDesignType?izConfig.mobOptInDesignType:c.notification.optInDesignType,c.notification.promptDelay=void 0!==izConfig.mobPromptDelay?izConfig.mobPromptDelay:c.notification.promptDelay,c.notification.repeatPromptDelay=void 0!==izConfig.mobRepeatPromptDelay?izConfig.mobRepeatPromptDelay:c.notification.repeatPromptDelay,c.notification.optInCloseDelay=void 0!==izConfig.mobOptInCloseDelay?izConfig.mobOptInCloseDelay:c.notification.optInCloseDelay,c.notification.promptOnScroll=void 0!==izConfig.mobPromptOnScroll?izConfig.mobPromptOnScroll:0,c.notification.isTriggeredOnScoll=0),c.notification.promptDesign.poweredbysrc="https://www.izooto.com/getting-started-with-izooto?utm_source=referral&utm_medium=PoweredBy&utm_campaign="+encodeURIComponent(c.notification.siteUrl),c.brandingPartner!=c.defaultBrandingPartner&&(c.notification.promptDesign.poweredbysrc="javascript:void(0);"),c.notification.promptDesign.message=c.notification.promptDesign.message||"Click on allow to subscribe to notifications",c.notification.promptDesign.subMessage=c.notification.promptDesign.subMessage||"Stay updated with the latest happenings on our site",c.notification.promptDesign.icon=c.notification.promptDesign.icon||"https://cdnimg.izooto.com/icons/7/bell-icon.png",c.notification.promptDesign.btn1Txt=c.notification.promptDesign.btn1Txt||"Later",c.notification.promptDesign.btn2Txt=c.notification.promptDesign.btn2Txt||"Allow",c.notification.promptDesign.position=c.notification.promptDesign.position||"right",c.notification.promptDesign.bgColor=c.notification.promptDesign.bgColor||"#fff",c.notification.promptDesign.titleForeColor=c.notification.promptDesign.titleForeColor||"#000000",c.notification.promptDesign.messageForeColor=c.notification.promptDesign.messageForeColor||"#999999",c.notification.promptDesign.btn1bgColor=c.notification.promptDesign.btn1bgColor||"#e4e4e4",c.notification.promptDesign.btn1ForeColor=c.notification.promptDesign.btn1ForeColor||"#686868",c.notification.promptDesign.btn2bgColor=c.notification.promptDesign.btn2bgColor||"#1194ff",c.notification.promptDesign.btn2ForeColor=c.notification.promptDesign.btn2ForeColor||"#ffffff",c.notification.httpsOverlay="<style>.iz-branding{color:white;font-size:25px;position:absolute;top:40%;left:28%;z-index:999999!important;width:50%!important}.iz-arrow img{transform:rotate(180deg)}@media screen and (max-width:600px){#izooto_desktop_overlay{display:none;.iz-arrow{width:100%;position:fixed;top:auto;bottom:35%;left:65%;border-radius:0px}.moz-transfer{width:100%;position:fixed;top:auto;bottom:30%;left:65% !important;border-radius:0px}.moz-transfer img{transform:rotate(180deg) !important}.iz-arrow img{transform:rotate(0deg)}.iz-branding{color:white;font-size:larger;position:fixed;top:40%;left:17%;width:100%}}</style><div id='izooto_desktop_overlay' onclick='_izooto.closeHttpsBranding();' style='z-index: 999999999;position: fixed;height: 100%;top: 0px;left: 0px;width: 100%;background: rgba(0, 0, 0, 0.89);'><div class='izoverlay-container'><div class='iz-branding'><div class='iz-text' style='padding-bottom:5px; font-family:Arial; display: -webkit-box; -webkit-line-clamp: 2; text-overflow: ellipsis; overflow: hidden; word-wrap: break-word; -webkit-box-orient: vertical;'>"+c.notification.overlayMessage+"</div><div class='iz-powered-text'><a class='izbranding' href='"+c.notification.promptDesign.poweredbysrc+"' target='_blank' style='cursor: pointer !important;color:#fff!important;font-size: 12px;font-family: Arial;letter-spacing: 0.4px;text-decoration: none;'><span style='color: #9c9c9c;'>Powered by</span> <span>"+c.brandingPartner+"</span></a></div></div></div>",c.notification.httpsBranding="<style>.iz-branding {z-index: 2147483647;background: #000;opacity: .65;box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.27);border-radius: 2px 0px 0px 2px;letter-spacing: 0.04em;padding: 6px 15px;display: flex;flex-direction: row;align-items: center;justify-content: center;max-width: fit-content;position: fixed;top: 0;right: 0;}.iz-branding .iz-text {font-size: 12px;font-family: Arial;letter-spacing: 0.04em;color: rgb(255 255 255 / 90%);display: flex;flex-direction: row;align-items: center;justify-content: center;}.iz-branding a .iz-brand {font-size: 12px;font-family: Arial;letter-spacing: 0.04em;color: #fff;font-weight:bold;}</style><div class='iz-branding'><div class='iz-text'>Notifications Powered by&nbsp;<a href='"+c.notification.promptDesign.poweredbysrc+"' target='_blank' style='text-decoration: none;color: unset;'><span class='iz-brand'>"+c.brandingPartner+"</span></a></div></div>",c.setupPath(),c.multiMessengerConfigHandler(),c.notification.gdprPromptStatus=void 0!==c.notification.gdprPrompt.status?c.notification.gdprPrompt.status:0,c.notification.gdprPromptType=void 0!==c.notification.gdprPrompt.type?c.notification.gdprPrompt.type:1,c.notification.manifest=c.notification.domainRoot+c.notification.manifestName,t=void 0!==izConfig.welcomeNotification&&""!==izConfig.welcomeNotification?izConfig.welcomeNotification:{},c.notification.welcomeNotification.status=void 0!==t.status?t.status:0,c.notification.welcomeNotification.title=void 0!==t.title?t.title:"",c.notification.welcomeNotification.body=void 0!==t.body?t.body:"",c.notification.welcomeNotification.icon=void 0!==t.icon?t.icon:"",c.notification.welcomeNotification.url=void 0!==t.url?t.url:"",c.notification.welcomeNotification.showAfter=void 0!==t.showAfter?t.showAfter:0,c.notification.welcomeNotification.timeout=void 0!==t.clickTimeout?t.clickTimeout:0,t=void 0!==izConfig.videoPlaybook&&""!==izConfig.videoPlaybook?izConfig.videoPlaybook:{},c.videoDropoff.status=void 0!==t.status&&""!==t.status?t.status:0,c.videoDropoff.allowedUrls=void 0!==t.allowedUrls?t.allowedUrls:[],t=void 0!==izConfig.welcomePlaybook&&""!==izConfig.welcomePlaybook?izConfig.welcomePlaybook:{},c.welcomePlaybook.status=void 0!==t.status&&""!==t.status?t.status:0,c.welcomePlaybook.data=void 0!==t.data&&""!==t.data?t.data:{},t=void 0!==izConfig.CRPSPlaybook&&""!==izConfig.CRPSPlaybook?izConfig.CRPSPlaybook:{},c.CRPSPlaybook.status=void 0!==t.status&&""!==t.status?t.status:0,c.CRPSPlaybook.data=void 0!==t.data&&""!==t.data?t.data:{},t=void 0!==izConfig.newsHub&&""!==izConfig.newsHub?izConfig.newsHub:{},c.newsHub.status=void 0!==t.status&&""!==t.status?t.status:0,c.newsHub.iconType=void 0!==t.iconType&&""!==t.iconType?t.iconType:1,c.newsHub.designType=void 0!==t.designType&&""!==t.designType?t.designType:1,c.newsHub.mainColor=void 0!==t.mainColor&&""!==t.mainColor?t.mainColor:"",c.newsHub.placement=void 0!==t.placement&&""!==t.placement?t.placement:[1,1],c.newsHub.allVisitors=void 0!==t.allVisitors&&""!==t.allVisitors?t.allVisitors:1,c.newsHub.gaId=void 0!==t.gaId&&""!==t.gaId?t.gaId:"",c.newsHub.title=void 0!==t.title&&""!==t.title?t.title:"",c.newsHub.allowFeed=void 0!==t.allowFeed&&""!==t.allowFeed?t.allowFeed:0,c.newsHub.callout=void 0!==t.callout&&""!==t.callout?t.callout:1,c.newsHub.slidePercent=void 0!==t.slidePercent&&""!==t.slidePercent&&30<=t.slidePercent?t.slidePercent:50,c.newsHub.calloutTimeout=void 0!==t.calloutTimeout&&""!==t.calloutTimeout&&2<=t.calloutTimeout&&t.calloutTimeout<=10?t.calloutTimeout:5,t=void 0!==izConfig.recommendArticle&&""!==izConfig.recommendArticle?izConfig.recommendArticle:{},c.recommendArticle.status=void 0!==t.status&&""!==t.status?t.status:0,(c.tabAbandonment=void 0!==izConfig.tabAbandonment&&""!==izConfig.tabAbandonment?izConfig.tabAbandonment:{}).status=null!=c.tabAbandonment.status?c.tabAbandonment.status:0,c.tabAbandonment.timeout=null!=c.tabAbandonment.timeout?c.tabAbandonment.timeout:600,c.tabAbandonment.pushTimeout=null!=c.tabAbandonment.pushTimeout?c.tabAbandonment.pushTimeout:3600,c.tabAbandonment.data=void 0!==c.tabAbandonment.data&&""!==c.tabAbandonment.data?c.tabAbandonment.data:{},t=void 0!==izConfig.exitIntent&&""!==izConfig.exitIntent?izConfig.exitIntent:{},c.exitIntent.status=null!=t.status?t.status:0,c.exitIntent.mobileAllowed=null!=t.mobileAllowed?t.mobileAllowed:1,c.exitIntent.desktopAllowed=null!=t.desktopAllowed?t.desktopAllowed:1,c.exitIntent.title=null!=t.title?t.title:" ",c.exitIntent.titleColor=null!=t.titleColor?t.titleColor:"#000000",c.exitIntent.bgColor=null!=t.bgColor?t.bgColor:"#1194FF",c.exitIntent.onExit=null!=t.onExit?t.onExit:0,c.exitIntent.onScrollPercent=null!=t.onScrollPercent?t.onScrollPercent:0,c.exitIntent.onDelay=null!=t.onDelay?t.onDelay:0,c.exitIntent.repeatDelay=null!=t.repeatDelay?t.repeatDelay:0,c.exitIntent.closeDelay=null!=t.closeDelay?t.closeDelay:0,c.exitIntent.cid=null!=t.cid?t.cid:0,c.exitIntent.rid=null!=t.rid?t.rid:0,c.exitIntent.ads=null!=t.ads?t.ads:0,(!c.notification.mobileAllowed&&1!=c.global.deviceType||!c.notification.desktopAllowed&&1==c.global.deviceType)&&(c.izootoStatus=0),a.NotificationHelper.applyBrowserPatch(),c.gaMigration(),t=c.notification,[4,a.NotificationHelper.isSupported()];case 1:return t.isSupported=e.sent(),[2]}})})},c.izootoStatus=void 0!==izConfig.izootoStatus?izConfig.izootoStatus:1,c.defaultBrandingPartner="iZooto",c.debug=void 0!==izConfig.debug?izConfig.debug:0,c.branding=void 0!==izConfig.branding?izConfig.branding:1,c.promptSequencing=void 0!==izConfig.promptSequencing?izConfig.promptSequencing:1,c.global={isSetCidLoaded:!1,isIncoginito:!1,isSessionHandled:!1,locationProtocol:document.location.protocol,msgReceiverExist:0,cookieDomain:void 0!==izConfig.cDomain?izConfig.cDomain:"",cookieExpiryDays:1500,cookieSameSite:"SameSite=Lax;",browserName:"",browserType:0,deviceType:0,browserVer:"",browserMajorVersion:0,os:0,platform:"",isFrame:window.top!=window.self},c.channelHandler={webPush:0,messenger:0},c.debugger={status:0,err:0,successCode:"color: #228B22",errCode:"color: #FF0000",infoCode:"background: #ffffcc, color: #222",gcmValidator:"https://api.izooto.com/validate-gcm/",host:document.location.protocol+"//"+document.location.hostname},c.store={subscriberId:!1,lastClick:!1,lastView:!1,syncedEventList:[],isNotificationDisabledManually:!1,syncedSegments:[],isSoftSubscribeTriggered:!1,isTriggerPromptWithDelay:!1,subDomainPermissionStatus:void 0,isNotificationCalledManually:!1,isMDSyncingRequired:!1,isSubscriptionLost:!1,subscriptionBasedEventNameList:["event","trigger","userProfile","personalizationProperty","add_property"]},c.notification={tokenExpire:void 0!==izConfig.tokenExpire?izConfig.tokenExpire:86400,repeatPromptDelay:void 0!==izConfig.repeatPromptDelay?izConfig.repeatPromptDelay:0,optInCloseDelay:void 0!==izConfig.optInCloseDelay?izConfig.optInCloseDelay:60,sourceOrigin:"",domainRoot:"",isSdkHttps:void 0,serviceWorkerName:"",htmlName:void 0!==izConfig.htmlName&&""!=izConfig.htmlName?izConfig.htmlName:"/izooto.html",manifestName:"",manifest:"",subscriptionType:0,fcmToken:"",autoPrompt:!0,httpsBranding:"",overlay:void 0!==izConfig.overlay?izConfig.overlay:0,overlayMessage:void 0!==izConfig.overlayMessage?izConfig.overlayMessage:"Click on 'allow' to subscribe to notifications",httpsOverlay:"",clickOnAllowMsg:void 0!==izConfig.clickOnAllowMsg&&""!==izConfig.clickOnAllowMsg?izConfig.clickOnAllowMsg:"Click On allow to subscribe to notifications",subscribedMsg:null!=izConfig.subscribedMsg&&""!==izConfig.subscribedMsg?izConfig.subscribedMsg:"Subscribed",alreadySubscribedMsg:void 0!==izConfig.alreadySubscribedMsg&&""!==izConfig.alreadySubscribedMsg?izConfig.alreadySubscribedMsg:"You've already subscribed to notifications.",blockedMsg:void 0!==izConfig.blockedMsg&&""!==izConfig.blockedMsg?izConfig.blockedMsg:"Blocked",alreadyDeniedMsg:void 0!==izConfig.alreadyDeniedMsg&&""!==izConfig.alreadyDeniedMsg?izConfig.alreadyDeniedMsg:"You've blocked notifications from this site.",httpsNoRoot:void 0!==izConfig.httpsNoRoot?izConfig.httpsNoRoot:0,windowType:0,mobileAllowed:void 0!==izConfig.mobileAllowed?izConfig.mobileAllowed:1,desktopAllowed:void 0!==izConfig.desktopAllowed?izConfig.desktopAllowed:1,allowedKeys:["bookingurl","landingurl"],webPushId:void 0!==izConfig.webPushId?izConfig.webPushId:"",webServiceUrl:void 0!==izConfig.webServiceUrl?izConfig.webServiceUrl:"",processPriority:void 0!==izConfig.processPriority?izConfig.processPriority:0,masterDomain:void 0!==izConfig.masterDomain?izConfig.masterDomain:"",masterDomainPath:void 0!==izConfig.masterDomainPath?izConfig.masterDomainPath:"",cdnHost:"cdn.izooto.com",siteUrl:void 0!==izConfig.siteUrl?izConfig.siteUrl:"",promptDelay:void 0!==izConfig.promptDelay?izConfig.promptDelay:0,promptType:void 0!==izConfig.promptFlow?izConfig.promptFlow:0,defaultOptinDesign:"",hidePopup:void 0===izConfig.hidePopup||izConfig.hidePopup,fullPopUp:void 0!==izConfig.fullPopUp?izConfig.fullPopUp:0,promptDesign:void 0!==izConfig.promptDesign?izConfig.promptDesign:{message:void 0,subMessage:void 0,icon:void 0,btn1Txt:void 0,btn2Txt:void 0,position:void 0,bgColor:void 0,titleForeColor:void 0,messageForeColor:void 0,btn1bgColor:void 0,btn1ForeColor:void 0,btn2bgColor:void 0,btn2ForeColor:void 0},optInDesign:void 0!==izConfig.optInDesign&&""!=izConfig.optInDesign?izConfig.optInDesign:"",dialogDesign:"",gdprDialogDesign:"",optInSrc:"https://cdn.izooto.com/optin/",optInDesignType:void 0!==izConfig.optInDesignType?izConfig.optInDesignType:"1",optinModule:{optinType:1,data:""},gdprModule:{gdprType:1,data:""},sourceOriginAlt:void 0!==izConfig.sourceOriginAlt?izConfig.sourceOriginAlt:"",fcmEnable:void 0!==izConfig.fcmEnable?izConfig.fcmEnable:0,isAddFcm:0,allowedDomain:void 0!==izConfig.allowedDomain?izConfig.allowedDomain:"",serviceWorkerPath:"",serviceWorkerScope:void 0!==izConfig.swScope?izConfig.swScope:"",serviceWorkerNameMob:void 0!==izConfig.serviceWorkerNameMob?izConfig.serviceWorkerNameMob:"",vapidKey:void 0!==izConfig.vapidPublicKey&&""!==izConfig.vapidPublicKey?izConfig.vapidPublicKey:"BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",subscriptionObj:{},pluginStatus:void 0,isShopify:void 0!==izConfig.isShopify?izConfig.isShopify:0,gdprPrompt:void 0!==izConfig.gdprPrompt?izConfig.gdprPrompt:{},gdprPromptStatus:void 0,gdprPromptType:void 0,gdprNotAllowed:["userProfile","personalizationProperty","trigger","event"],isGdprAllowed:1,sysEvents:void 0!==izConfig.sysEvents?izConfig.sysEvents:1,sysEventsFlag:void 0!==izConfig.sysEvents?1:0,propsTracking:void 0!==izConfig.propsTracking?izConfig.propsTracking:1,evtTracking:void 0!==izConfig.evtTracking?izConfig.evtTracking:1,syncLimit:{evtPerDay:void 0!==izConfig.evtPerDay?izConfig.evtPerDay:1e4,propsPerDay:void 0!==izConfig.propsPerDay?izConfig.propsPerDay:1e4,evtPerMonth:void 0!==izConfig.evtPerMonth?izConfig.evtPerMonth:1e4,propsPerMonth:void 0!==izConfig.propsPerMonth?izConfig.propsPerMonth:1e4},userEvents:void 0!==izConfig.userEvents?izConfig.userEvents:0,isTagsEnabled:void 0!==izConfig.tagsEnabled?izConfig.tagsEnabled:0,utmKeys:["utm_content","utm_medium","utm_source","utm_campaign","utm_term"],shortutmKeys:["uco","ume","uso","uca","ute"],serviceWorkerVersion:void 0,promptOnScroll:void 0!==izConfig.promptOnScroll?izConfig.promptOnScroll:0,isTriggeredOnScoll:0,eventAsTrigger:void 0!==izConfig.eventAsTrigger?izConfig.eventAsTrigger:0,eventsToSync:void 0!==(null===(o=izConfig.webPush)||void 0===o?void 0:o.syncEvent)?izConfig.webPush.syncEvent:[],promptOnLoad:void 0!==(null===(o=izConfig.webPush)||void 0===o?void 0:o.promptOnLoad)?izConfig.webPush.promptOnLoad:0,welcomeNotification:{status:void 0,title:void 0,body:void 0,icon:void 0,url:void 0,showAfter:void 0,timeout:void 0},syncNotificationView:void 0!==izConfig.syncNotificationView?izConfig.syncNotificationView:"",syncNotificationClick:void 0!==izConfig.syncNotificationClick?izConfig.syncNotificationClick:"",syncVisitType:void 0!==izConfig.syncVisitType?izConfig.syncVisitType:0,isSupported:!0},c.ga={id:"",syncCid:0,swEvents:0,syncWebPush:void 0,syncNewsHub:void 0,newsHubEvents:void 0,syncMessenger:void 0,subscriptionCallback:[],promptDisplayCallback:[],oldId:""},c.messenger={syncPrompt:null!=(null===(o=izConfig.messengerConf)||void 0===o?void 0:o.syncPrompt)?izConfig.messengerConf.syncPrompt:1,status:null!=izConfig.messengerPromptStatus?izConfig.messengerPromptStatus:0,pageId:null!=izConfig.messengerPageId?izConfig.messengerPageId:"",repeatDelay:null!=izConfig.messengerRepeatDelay?izConfig.messengerRepeatDelay:0,prompt:null!=izConfig.messengerPrompt?izConfig.messengerPrompt:{},size:"large",color:"blue",buttonTextType:0,autoPrompt:!0},c.tabAbandonment={status:void 0,timeout:void 0,pushTimeout:void 0,data:void 0,counter:0},c.welcomePlaybook={status:void 0,data:{}},c.newsHub={status:0,title:"",designType:void 0,mainColor:void 0,iconType:void 0,placement:void 0,pagination:10,allVisitors:0,gaId:"",autoWidget:!0,callout:void 0,slidePercent:void 0,calloutTimeout:void 0,allowFeed:!1,triggered:!1},c.videoDropoff={status:void 0,allowedUrls:[]},c.CRPSPlaybook={isPaidSubscriber:!1,status:null!=izConfig.CRPSPlaybook?izConfig.CRPSPlaybook:0,data:{}},c.exitIntent={status:void 0,mobileAllowed:void 0,desktopAllowed:void 0,title:void 0,titleColor:void 0,bgColor:void 0,onExit:void 0,onScrollPercent:void 0,onDelay:void 0,repeatDelay:void 0,closeDelay:void 0,cid:void 0,rid:void 0,ads:void 0},c.recommendArticle={status:void 0},c.autoSegmentStatus=void 0!==izConfig.autoSegment?izConfig.autoSegment:0,c.hashFileName=void 0!==izConfig.hash?izConfig.hash:"",c);function c(){}t.Config=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Helper=void 0;var r=o(0),s=o(2),a=o(3),l=o(5),c=o(4),i=o(7),o=(p.checkBrowser=function(){navigator.appVersion;var e,t=navigator.userAgent.toLowerCase(),o=navigator.appName,i=""+parseFloat(navigator.appVersion),n=parseInt(navigator.appVersion,10),r=0,a="",r=-1!=(e=t.indexOf("opr/"))?(o=s.KeyMapper.BROWSER_OPERA,i=t.substring(e+4),4):-1!=(e=t.indexOf("opera"))?(o=s.KeyMapper.BROWSER_OPERA,i=t.substring(e+6),-1!=(e=t.indexOf("version"))&&(i=t.substring(e+8)),4):-1!=(e=t.indexOf("edge/"))||-1!=(e=t.indexOf("edga/"))?(o=s.KeyMapper.BROWSER_EDGE,i=t.substring(e+5),7):-1!=(e=t.indexOf("edgios/"))?(o="Edge",i=t.substring(e+7),7):-1!=(e=t.indexOf("edg/"))?(o="Edge",i=t.substring(e+4),7):-1!=(e=t.indexOf("ucbrowser"))?(o=s.KeyMapper.BROWSER_UCB,i=t.substring(e+10),6):-1!=(e=t.indexOf("msie"))?(o=s.KeyMapper.BROWSER_IE,i=t.substring(e+5),5):-1!=(e=t.indexOf("crios"))?(o=s.KeyMapper.BROWSER_OTHER,i=t.substring(e+6),i=a="40",5):-1!=(e=t.indexOf("chrome"))?(o=s.KeyMapper.BROWSER_CHROME,i=t.substring(e+7),/(.*?)wv\)/.test(t)&&(o=s.KeyMapper.BROWSER_OTHER,i=a="41"),1):-1!=(e=t.indexOf("firefox"))?(o=s.KeyMapper.BROWSER_FIREFOX,i=t.substring(e+8),3):-1!=(e=t.indexOf("fxios"))?(o=s.KeyMapper.BROWSER_FIREFOX,i=t.substring(e+6,e+11),8):-1!=(e=t.indexOf("safari"))&&(/mac/.test(t)||/ipad|iphone|ipod/.test(t))?(o=s.KeyMapper.BROWSER_SAFARI,i=t.substring(e+7),-1!=(e=t.indexOf("version"))&&(i=t.substring(e+8)),2):(o=s.KeyMapper.BROWSER_OTHER,i="1",5);return-1!=(e=(i=-1!=(e=i.indexOf(";"))?i.substring(0,e):i).indexOf(" "))&&(i=i.substring(0,e)),n=parseInt(""+i,10),isNaN(n)&&(i=""+parseFloat(navigator.appVersion),n=parseInt(navigator.appVersion,10)),[o,n="40"==a||"41"==a?a:n,i,r]},p.getBrowserName=function(){return this.checkBrowser()[0]},p.getBrowserVersion=function(){return this.checkBrowser()[2]},p.getBrowserMajorVersion=function(){return this.checkBrowser()[1]},p.getBrowserType=function(){return this.checkBrowser()[3]},p.isTablet=function(e){if(/android/.test(e)){if(!1===/mobile/.test(e))return!0}else if(!0===/ipad/.test(e))return!0;return!1},p.isMobile=function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(navigator.userAgent||navigator.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent||navigator.vendor||window.opera).substr(0,4))},p.isIos=function(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},p.getDeviceType=function(){var e=(e=navigator.userAgent).toLowerCase();return this.isTablet(e)?2:this.isMobile()?3:1},p.getOS=function(){var e=navigator.userAgent.toLowerCase();return/windows phone/i.test(e)?6:/android/i.test(e)?4:/ipad|iphone|ipod/.test(e)&&!window.MSStream?5:/linux/i.test(e)?2:/macintosh|mac os x/i.test(e)?3:/windows|win32/i.test(e)?1:7},p.detectPlatform=function(){var e="";return 1==window.is_wp?e="wordpress":1==r.Config.notification.isShopify?e="shopify":null!=window._izootoModule&&1==window._izootoModule.isMagento?e="magento":null!=window._izootoModule&&1==window._izootoModule.isOpencart&&(e="opencart"),e},p.getMetaValue=function(e){try{for(var t=document.getElementsByTagName("meta"),o=0;o<t.length;o++)if(t[o].getAttribute("name")===e||t[o].getAttribute("property")===e)return t[o].getAttribute("content")}catch(e){}return""},p.endPointParamExtract=function(e){var t=e,e="";try{e=JSON.parse(t).endpoint}catch(e){}return"ep="+(e=r.Config.global.browserName==s.KeyMapper.BROWSER_EDGE?encodeURIComponent(e):e)},p.getEndpoint=function(e){var t={SoftUnsubscribe:["usub","sunsub"],SoftSubscribe:["usub","sunsub"],NotImplemented:["ni","nimp"],SegmentEvents:["et","evt"],SegmentProperties:["prp","prp"],TriggerEvent:["trg","trg"],PersonalProperties:["pp","pprp"],CustomerIDSynch:["pp","idsyn"],CustomerIDLogout:["pp","clout"],last_visit:["lvi","lvi"],Visitor:["viz","viz"],ShopifyMapper:["oth","spm"],GDPRConsent:["prv","gdp"],FCMMigration:["enu","enu"],syncAdNetwork:["cs","cs"],syncNotificationView:["imp","wimp"],syncAllSubscribersVisit:["viz","viz"],syncMessenger:["msngenr","msngenr"],getUUIDFromEp:["uuid","uuid"],gdprLocationUrl:["rapi",""],gdprStatusUrl:["prv","gdp"],shopifyAPI:["events","shopifywh1.php"],subscriptionValidator:["ss","ss.php"],supUrl:["evt","sup.php"],notificationClick:["clk","clk"],messengerPrompted:["msngp","msngp"],notificationSent:["snt","snt"],exitIntentClick:["osclk","osclk"],syncExitIntentView:["osimp","osimp"],syncExitIntentDismissed:["osdis","osdis"],syncNewshubView:["nhwimp","nhwimp"],syncNewshubOpen:["nhwopn","nhwopn"]};return t[s.KeyMapper.PROMPT_ALLOWED]=["enp","enp"],t[s.KeyMapper.ALREADY_GRANTED]=["enp","enp"],t[s.KeyMapper.PROMPT_CLOSED]=["sbp","ncls"],t[s.KeyMapper.OPTIN_ALLOWED]=["sbp","salw"],t[s.KeyMapper.PROMPT_DENIED]=["sbp","nblk"],t[s.KeyMapper.ALREADY_DENIED]=["sbp","nblk"],t[s.KeyMapper.OPTIN_CLOSED]=["sbp","sblk"],t[s.KeyMapper.POPUP_CLOSED]=["sbp","swc"],t[s.KeyMapper.PROMPTED]=["sbpd","npd"],t[s.KeyMapper.OPTIN_SHOWN]=["sbpd","spd"],t[s.KeyMapper.BROWSER_UNSUPPORTED]=["na","nsp"],t.hasOwnProperty(e)?"https://"+t[e][0]+".izooto.com/"+t[e][1]:"https://err.izooto.com/err"},p.getTimeDiff=function(e,t){if(!e)return 0;e=(e-(new Date).getTime())/1e3;return null!=t&&0!=t||(e/=60),Math.abs(Math.round(e))},p.urlB64ToUint8Array=function(e){for(var e=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),t=window.atob(e),o=new Uint8Array(t.length),i=0;i<t.length;++i)o[i]=t.charCodeAt(i);return o},p.getLanguage=function(){var e=document.documentElement.lang;if(""==e)try{for(var t=document.getElementsByTagName("meta"),o=0;o<t.length;o++)"content-language"==t[o].getAttribute("http-equiv")&&(e=t[o].getAttribute("content"))}catch(e){}return e},p.displayLog=function(e,t){e=window.top!=window.self?r.Config.brandingPartner+" Iframe: => "+e:r.Config.brandingPartner+" => "+e,1===r.Config.debug&&(void 0!==t?console.warn(e,t):console.warn(e))},p.throwError=function(e){throw new Error(e)},p.getParamFromUrl=function(e,t){return new URL(e).searchParams.get(t)},p.izParseQuery=function(e){for(var t={},o=("?"===e[0]?e.substr(1):e).split("&"),i=0;i<o.length;i++){var n=o[i].split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]||"")}return t},p.replaceQueryParam=function(e,t,o){var i=new RegExp("([?|&])"+t+"=.*?(&|$)","i"),n=-1!==e.indexOf("?")?"&":"?";return e.match(i)?e.replace(i,"$1"+t+"="+o+"$2"):e+n+t+"="+o},p.getUTMParamsOfUrl=function(e){try{var t=(e=void 0===e?window.location.href:e).indexOf("?");if(0<t){var o=e.substring(t+1),i=p.izParseQuery(o),n={};return 2<r.Config.notification.utmKeys.map(function(e,t){var o=i.hasOwnProperty(e);return o&&(""==e&&null==e||(n[r.Config.notification.shortutmKeys[t]]=i[e])),o}).reduce(function(e,t,o){return t?e+1:e})&&p.getQuerySting(n)}return!1}catch(e){return!1}},p.getQuerySting=function(e){try{var t,o=[];for(t in e)e.hasOwnProperty(t)&&o.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return o.join("&")}catch(e){}},p.objToParam=function(t){var e="";try{e=Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")}catch(e){}return e},p.addMsgReciever=function(t,e){if(void 0===e&&(e=!1),1!=r.Config.global.msgReceiverExist||e){e||(r.Config.global.msgReceiverExist=1);try{window.addEventListener("message",function(e){(-1<e.origin.indexOf(window.location.host)||"https://cdn.izooto.com"==e.origin||-1<e.origin.indexOf(r.Config.notification.sourceOrigin)||-1<e.origin.indexOf(r.Config.notification.sourceOriginAlt)||-1<e.origin.indexOf(r.Config.notification.siteUrl)||-1<r.Config.notification.masterDomain.indexOf(e.origin)||3==r.Config.notification.windowType)&&e.data&&t(e)})}catch(e){}}},p.postMessage=function(e,t,o,i){try{var n,r;null!=typeof e&&null!=t&&((n={})[t]=void 0!==o?o:1,n.serviceWorkerVersion=i,(r={})[s.KeyMapper.MESSAGE]=n,p.postToTargetedWindow(e,r),p.postToTargetedWindow(e,{izootoMsg:{k:t,v:void 0!==o?o:1}}))}catch(e){}},p.postToTargetedWindow=function(e,t){try{"parent"===e?window.parent.postMessage(JSON.stringify(t),"*"):"opener"===e?window.opener&&window.opener.postMessage(JSON.stringify(t),"*"):e.contentWindow.postMessage(JSON.stringify(t),"*")}catch(e){}},p.addHTML=function(e,t,o){try{var i=document.getElementsByTagName("body")[0],n=document.createElement(e);return n.setAttribute("id",o||""),n.innerHTML=t,i.appendChild(n),!0}catch(e){p.displayLog("Could't add HTML : ",e)}},p.removeHTML=function(e){try{e.remove()}catch(e){p.displayLog("Error while removing HTML",e)}},p.addExternalJS=function(i,n,r,e){return new Promise(function(e,t){var o=document.createElement("script");o.onload=e,o.onerror=t,o.async=r||!1,o.id=n||"",o.src=i,(document.body||document.head).appendChild(o)})},p.checkForFcm=function(){var e=p.getBrowserMajorVersion(),t=p.getBrowserName();return t==s.KeyMapper.BROWSER_UCB&&12<=e||t==s.KeyMapper.BROWSER_OPERA&&42<=e||t==s.KeyMapper.BROWSER_EDGE&&17<=e?1:0},p.isJSONString=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},p.parseToJSON=function(e){try{return JSON.parse(e)}catch(e){return!1}},p.removeHtmlTagsFromString=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},p.stringToRegex=function(e,t){var o="";return o="object"==typeof e&&0<Object.keys(e).length?1<Object.keys(e).length?new RegExp(e[0],e[1]):new RegExp(e[0]):o},p.getParsedMethod=function(e){try{return new Function("return "+atob(e))()}catch(e){p.displayLog("Error while parsing custom module")}},p.getDateDiffrenceFromPresent=function(e){try{var t=new Date(e),o=new Date,i=Math.abs(t-o)/1e3;return Math.floor(i/86400)}catch(e){}},p.getUUID=function(){var o,e=a.Storage.getStorage(s.KeyMapper.UUID);return""==e&&(o=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(o+16*Math.random())%16|0;return o=Math.floor(o/16),("x"==e?t:3&t|8).toString(16)})),e},p.getCurrentUUID=function(){return r.Config.UUID||a.Storage.getStorage(s.KeyMapper.UUID)},p.isUUID=function(){return""!=a.Storage.getStorage(s.KeyMapper.UUID)},p.setUUID=function(){var e=p.getCurrentUUID();p.isUUID()||(a.Storage.setStorage(s.KeyMapper.UUID,e),i.CookieStorage.setWpCookie(s.KeyMapper.UUID,e))},p.UUIDMapper=function(t,o){var i,n,r=p.getEndpoint("FCMMigration");t&&o&&(i=a.Storage.getStorage(s.KeyMapper.PUSH_TOKEN),n=c.NotificationHelper.getDeviceParameters(),c.NotificationHelper.getExtraParameterToSync().then(function(e){n+=e,n+=c.NotificationHelper.getSubscriptionParameters(i,!0),n+="&oBkey="+t+"&bKey="+o,l.HttpRequest.post(r,{data:n},function(){})}))},p.getUUIDFromEndpoint=function(n){return new Promise(function(t,e){var o=p.getEndpoint("getUUIDFromEp"),i=c.NotificationHelper.subcriptionToObject(n);2!=r.Config.global.browserType&&(i=i.endpoint),o=o+"?pid="+r.Config.client+"&ep="+i+"&btype="+r.Config.global.browserType,l.HttpRequest.get(o,function(e){e=p.parseToJSON(e);e.hasOwnProperty("id")&&"NULL"!=e.id&&"string"==typeof e.id&&t(e.id),t("")})})},p.isScreenScrollable=function(){try{var e=document.body,t=e.parentNode,o=e.scrollHeight-e.clientHeight;if(2<=(o="CSS1Compat"==document.compatMode?t.scrollHeight-t.clientHeight:o)/window.screen.availHeight)return!0}catch(e){}return p.displayLog("This page is not scrollable!"),!1},p.izootoBrandingHandler=function(e){if(0==r.Config.branding)try{var t,o=e?e.document.querySelectorAll(".izbranding"):document.getElementsByClassName("izbranding");for(t in o)o[t].style.display="none",p.displayLog("Branding Disabled")}catch(e){}},p.addIFrame=function(i,n,e){return new Promise(function(e,t){try{var o=document.createElement("IFRAME");return o.setAttribute("src",i),o.setAttribute("id",n),o.style.width="0px",o.style.height="0px",o.style.border="0px",o.setAttribute("visibility","hidden"),o.style.display="none",o.onload=function(){return e(!0)},(null!=document.body?document.body:document.head).appendChild(o),o}catch(e){p.displayLog("Unable to subFrame : ",e)}})},p.setHref=function(e,t){document.querySelector("."+e).href=t},p.getTimeAgoStringByTimestamp=function(e){var t,o=new Date,e=new Date(e),e=o.getTime()-e.getTime(),e=parseInt(e/1e3);if(!isNaN(e)){if(e<=60)return"1 min ago ";if(60<e&&e<3600){var i=Math.round(e/60);return 1<i?i+" mins ago":i+" min ago"}if(3600<=e&&e<86400){i=Math.round(e/3600);return 1<i?i+" hrs ago":i+" hr ago"}return 86400<=e&&e<2592e3?1<(t=Math.round(e/86400))?t+" days ago":"yesterday":2592e3<=e?1<(t=Math.round(e/2592e3))?t+" months ago":t+" month ago":void 0}},p.hideElement=function(e,t){void 0===t&&(t=window.document);try{var o=t.querySelector(e);o&&(o.style.display="none")}catch(e){p.displayLog("Error : While hide element",e)}},p.showElement=function(e,t,o){void 0===t&&(t=!0),void 0===o&&(o=window.document);try{var i=o.querySelector(e);i&&(i.style.display=t?"block":"flex")}catch(e){p.displayLog("Error : While show element",e)}},p.setCssPropperty=function(e,t,o,i){void 0===i&&(i=window.document);try{var n=i.querySelector(e);n&&(n.style[t]=o)}catch(e){p.displayLog("Error : While set css property",e)}},p);function p(){}t.Helper=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyMapper=void 0,t.KeyMapper={OPTIN_SHOWN:"optInShown",OPTIN_CLOSED:"optInClosed",OPTIN_ALLOWED:"optInAllowed",PROMPTED:"prompted",PROMPT_CLOSED:"promptclose",PROMPT_DENIED:"denied",PROMPT_ALLOWED:"allowed",SUBSCRIBED:"subscribed",ALREADY_GRANTED:"already_granted",OLD_SUBSCRIPTION:"old_subscription",SUBSCRIBER_REGISTRED:"subscriber_registred",ALREADY_DENIED:"already_denied",ALREADY_UNSUBSCRIBED:"already_unsubscribed",UNSUBSCRIBED:"unsubscribed",POPUP_OPEN:"popupOpened",POPUP_CLOSED:"popClosed",BROWSER_UNSUPPORTED:"browserUnsupported",MESSENGER_PROMPTED:"messengerPrompted",MESSENGER_READY_SHOW:"messengerReadyToLoad",MESSENGER_READY:"messengerReady",MESSENGER_SUBSCRIBED:"messengerSubscribed",NEWSHUB_READY:"readyToShowNewsHub",NEWSHUB_FAILED:"newsHubFailed",NEWSHUB_OPEN:"newsHubOpen",NEWSHUB_CLOSED:"newsHubClosed",NEWSHUB_ANIMATIONEND:"newsHubAnimationEnd",UUID:"izootoUID",PUSH_TOKEN:"izootoPushToken",STATS:"izootoStats",SYNC:"izootoSync",CONFIG:"izootoConfig",USER_PROPERTY:"izootoUserProp",MASTER_DOMAIN:"izootoMDConfig",SESSION:"izootoSession",RECOMMEND_ARTICLE:"izootoRecommendArticle",MESSENGER:"izootoMessenger",ACTIVE_PROMPT:"izootoActivePrompt",WP_COOKIE:"izootoWpConfig",PROMPT_COUNT:"promptCount",OPTIN_SHOWN_COUNT:"optInShownCount",DM_SYNC_COUNT:"dmSyncCount",EVENT_DAILY:"eventDaily",EVENT_MONTHLY:"eventMonthly",PROPERTY_DAILY:"propDaily",PROPERTY_MONTHLY:"propMonthly",PUSH_TOKEN_NOT_SYNCED:"pushTokenNotSynced",PERMISSION_STATUS:"permissionStatus",REPEAT_PROMPT_DELAY:"notificationPromptDelay",GDPR_CONSENT:"gdprStatus",TAB_ABANDONMENT:"tabAbandonment",IZCID:"IZCID",ALT_DOMAIN_STATUS:"altDomainStatus",TAB_ABANDONMENT_PUSH:"tabAbandonmentPush",LAST_EVENT_SYNC:"lastEventSync",LAST_PROPERTY_SYNC:"lastPropSync",FIRST_SESSION:"firstSession",CRPS_PLAYBOOK:"crpsPlaybook",NH_MARK_ALL_AS_READ:"newsHubMarkAllAsRead",SUBSCRIBED_ON:"subscribedOn",SESSION_EXPIRY:"expiry",SESSION_COUNT:"count",MSNGR_REPEAT_PROMPT_DELAY:"promptDelay",MSNGR_IS_SUBSCRIBED:"isSubscribed",EXITINTENT_DELAY:"exitIntentDelay",LAST_SYNC_OF_RECOMMEND_ARTICLE:"recommendArticle",RECOMMEND_ARTICLE_SYNCED_PATH:"syncedPath",MESSAGE:"izootoMsg",BROWSER_CHROME:"Chrome",BROWSER_SAFARI:"Safari",BROWSER_FIREFOX:"Firefox",BROWSER_OPERA:"Opera",BROWSER_IE:"Microsoft Internet Explorer",BROWSER_OTHER:"Other",BROWSER_UCB:"Ucb",BROWSER_EDGE:"Edge",MASTER_TO_CHILD:"izMasterToChild",CHILD_TO_MASTER:"izChildToMaster",MASTER_AS_FRAME:"izMasterAsFrame",DAILY:"daily",MONTHLY:"monthly",INVALID_PAYLOAD:"Invalid Payload",IZCIDDOM:"izsetcgid",USER_PROP:"userProp"}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0;var w=o(1),E=o(0),i=o(7),a=o(28),P=o(2),M=o(12),o=(T.updateLastSync=function(e){T.setConfigLocal(e,Date.now(),P.KeyMapper.SYNC)},T.setStorage=function(e,t){a.LocalStorage.isLocalStorageSupport()?(e==P.KeyMapper.PUSH_TOKEN&&i.CookieStorage.setWpCookie("pushToken",t),localStorage.setItem(e,t)):i.CookieStorage.setCookie(e,t)},T.getStorage=function(e){var t="";return null!=(t=a.LocalStorage.getLocalStorage(e))?e===P.KeyMapper.PUSH_TOKEN?decodeURIComponent(t):t:i.CookieStorage.getCookie(e)},T.removeStorage=function(e){i.CookieStorage.removeCookie(e),a.LocalStorage.removeLocalStorage(e)},T.removeConfigLocal=function(e,t){void 0===t&&(t=P.KeyMapper.CONFIG);var o={},i=a.LocalStorage.getLocalStorage(t);null!=(o=""!=i&&null!=i?w.Helper.parseToJSON(i):o).hasOwnProperty(e)&&delete o[e],a.LocalStorage.isLocalStorageSupport()&&a.LocalStorage.setLocalStorage(t,JSON.stringify(o))},T.setConfigLocal=function(e,t,o){void 0===o&&(o=P.KeyMapper.CONFIG);var i=Math.round((new Date).getTime()/1e3),n={},r=a.LocalStorage.getLocalStorage(o);(n=""!=r&&null!=r?(n=w.Helper.parseToJSON(r))||{}:n)[e]=null!=t&&""!==t?t:i,a.LocalStorage.isLocalStorageSupport()&&a.LocalStorage.setLocalStorage(o,JSON.stringify(n))},T.getConfigLocal=function(e,t){void 0===t&&(t=P.KeyMapper.CONFIG);var o=a.LocalStorage.getLocalStorage(t),i={},t="";return t=null!=(i=""!=o?(i=w.Helper.parseToJSON(o))||{}:i)&&null!=i[e]?i[e]:t},T.legacyStorageMigration=function(){try{if(T.getStorage(P.KeyMapper.UUID)||(E.Config.store.isMDSyncingRequired=!0),1==T.getConfigLocal("isLegacyStorageMigrated"))return;var e=T.getStorage("iztoken");e&&(T.setStorage(P.KeyMapper.PUSH_TOKEN,e),T.updateLastSync(P.KeyMapper.PUSH_TOKEN));var t=T.getConfigLocal("id","izConf");t&&T.setStorage(P.KeyMapper.UUID,t);var o,i=T.getStorage("izooto");i&&(E.Config.store.isMDSyncingRequired=!0,i=decodeURIComponent(i),w.Helper.isJSONString(i)&&(i=w.Helper.parseToJSON(i),o={token:JSON.stringify(i["iz_"+E.Config.client].bkey),subscribed_on:i["iz_"+E.Config.client].subscribed_on,uuid:T.getStorage(P.KeyMapper.UUID)},M.MasterDomain.setMasterStorage(o)));var n=T.getStorage("izstatus");n&&(n=decodeURIComponent(n),w.Helper.isJSONString(n)&&(n=w.Helper.parseToJSON(n),T.setConfigLocal(P.KeyMapper.PERMISSION_STATUS,n.v)));var r=T.getConfigLocal("pmtcount","izConf");r&&T.setConfigLocal(P.KeyMapper.PROMPT_COUNT,r,P.KeyMapper.STATS);var a=T.getConfigLocal("dscount","izConf");a&&T.setConfigLocal(P.KeyMapper.OPTIN_SHOWN_COUNT,a,P.KeyMapper.STATS);var s=T.getConfigLocal("IZCID","izConf");s&&(T.setConfigLocal(P.KeyMapper.IZCID,s),T.updateLastSync(P.KeyMapper.IZCID));var l=T.getStorage("izDl");l&&(l=decodeURIComponent(l),w.Helper.isJSONString(l)&&(l=w.Helper.parseToJSON(l),T.setConfigLocal(P.KeyMapper.REPEAT_PROMPT_DELAY,l.t)));var c=T.getConfigLocal("msngrSubscribed","izConf");c&&T.setConfigLocal(P.KeyMapper.MSNGR_IS_SUBSCRIBED,c);var p,d=T.getConfigLocal("msngrDl","izSync");d&&(d*=1e3,p=(d=new Date(d)).setTime(d.getTime()+60*E.Config.messenger.repeatDelay*1e3),T.setConfigLocal(P.KeyMapper.MSNGR_REPEAT_PROMPT_DELAY,p.getTime()));var u=T.getStorage("izup");u&&T.setStorage(P.KeyMapper.USER_PROPERTY,decodeURIComponent(u));var g=T.getStorage("izmd");g&&T.setConfigLocal(P.KeyMapper.ALT_DOMAIN_STATUS,decodeURIComponent(g));var f=T.getStorage("izgdpr");f&&T.setConfigLocal(P.KeyMapper.GDPR_CONSENT,f);var y,m,b,S,h,C,v=T.getConfigLocal("iz_apihc","izConf");v&&w.Helper.isJSONString(v)&&(v=w.Helper.parseToJSON(v),y={},m=new Date,!v.hasOwnProperty("evt_pd")||(b=v.evt_pd)&&(b=b.split("#"),y[P.KeyMapper.EVENT_DAILY]=b[1],m.setDate(b[0])),v.hasOwnProperty("evt_pm")&&((S=v.evt_pm)&&(S=S.split("#"),y[P.KeyMapper.EVENT_MONTHLY]=S[1],m.setMonth(S[0]-1)),T.setConfigLocal(P.KeyMapper.LAST_EVENT_SYNC,m.getTime(),P.KeyMapper.SYNC)),!v.hasOwnProperty("prop_pd")||(h=v.prop_pd)&&(h=h.split("#"),y[P.KeyMapper.PROPERTY_DAILY]=h[1],m.setDate(h[0])),v.hasOwnProperty("prop_pm")&&((C=v.prop_pm)&&(C=C.split("#"),y[P.KeyMapper.PROPERTY_MONTHLY]=C[1],m.setMonth(C[0]-1)),T.setConfigLocal(P.KeyMapper.LAST_PROPERTY_SYNC,m.getTime(),P.KeyMapper.SYNC)),T.setConfigLocal(P.KeyMapper.DM_SYNC_COUNT,y,P.KeyMapper.STATS)),T.setConfigLocal("isLegacyStorageMigrated",1)}catch(e){T.setConfigLocal("isLegacyStorageMigrated",1)}},T);function T(){}t.Storage=o},function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(o,t){function i(e){try{r(l.next(e))}catch(e){t(e)}}function n(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?o(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}r((l=l.apply(e,a||[])).next())})},r=this&&this.__generator||function(o,i){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(o,s)}catch(e){t=[6,e],r=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},l=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<o;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,n++)i[n]=r[a];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationHelper=void 0;var c=o(1),y=o(0),p=o(3),d=o(5),a=o(8),i=o(20),s=o(15),u=o(21),g=o(22),f=o(23),m=o(6),b=o(29),S=o(2),h=o(9),C=o(24),v=o(12),w=o(25),E=o(26),P=o(27),M=o(11),T=o(10),o=(H.nativeHandler=function(){return n(this,void 0,void 0,function(){return r(this,function(e){return H.setManifest(),"default"==window.Notification.permission?(H.brandingOverlayHandler(),H.sendEvent(S.KeyMapper.PROMPTED),window.Notification.requestPermission().then(function(e){H.closeHttpsOverlay(),c.Helper.displayLog("Permission Status : ",e),"granted"==e?H.permissionGrantedCallback():e==S.KeyMapper.PROMPT_DENIED?H.permissionDeniedCallback():"default"==e&&H.sendEvent(S.KeyMapper.PROMPT_CLOSED),p.Storage.removeStorage(S.KeyMapper.ACTIVE_PROMPT)})):"granted"==window.Notification.permission?H.permissionAlreadyGrantedCallback():window.Notification.permission==S.KeyMapper.PROMPT_DENIED&&H.sendEvent(S.KeyMapper.ALREADY_DENIED),[2]})})},H.permissionAlreadyGrantedCallback=function(){c.Helper.setUUID(),H.setUuidDb(c.Helper.getCurrentUUID()),1!=y.Config.notification.httpsNoRoot?(H.getSubscription().then(function(){v.MasterDomain.masterDomainCallback(!0)}),1==y.Config.notification.isShopify&&u.Shopify.init()):H.addNoRootIframeHandler(S.KeyMapper.ALREADY_GRANTED)},H.addNoRootIframeHandler=function(e){var t=p.Storage.getStorage(S.KeyMapper.PUSH_TOKEN);if(t&&1==H.getPermissionStatusFromStorage())return this.isSyncPermissionStatus=!1,void H.sendEvent(e,t);t=(t=y.Config.notification.sourceOrigin+"?action=noroot")+"&izpt="+y.Config.notification.promptType+"&status="+e;H.noRootVersionHandler(),y.Config.global.isFrame||window.location.pathname!=y.Config.notification.sourceOrigin?(c.Helper.addMsgReciever(H.msgReciever),c.Helper.addIFrame(t,"izSubFrame")):H.noRootHandler(e)},H.permissionGrantedCallback=function(){c.Helper.setUUID(),H.setUuidDb(c.Helper.getCurrentUUID()),1!=y.Config.notification.httpsNoRoot?H.registerServiceWorker(y.Config.notification.serviceWorkerPath).then(function(e){c.Helper.displayLog("SW Regsitered ! ",e),H.subscribe(S.KeyMapper.PROMPT_ALLOWED).then(function(e){v.MasterDomain.masterDomainCallback(!1)})}):H.addNoRootIframeHandler("granted")},H.permissionDeniedCallback=function(){H.sendEvent(S.KeyMapper.PROMPT_DENIED),c.Helper.displayLog("User denied prompt")},H.promptHandler=function(){var o=y.Config.notification.promptType;"https:"!=y.Config.global.locationProtocol&&1==y.Config.notification.isSdkHttps&&(y.Config.notification.promptType=1),2==y.Config.global.browserType?setTimeout(function(){H.checkSafariPermission()},300):0==y.Config.notification.isSdkHttps||y.Config.notification.isSdkHttps&&"http:"==y.Config.global.locationProtocol?(c.Helper.displayLog("Subdomain Process... "),H.getSubDomainPermissionStatus().then(function(e){var t;c.Helper.displayLog("Current subdomain status : ",e),0==e?2==o?H.triggerEventHandler(i.Notification.openPopup):H.promptEventHandler(H.loadOptin):1==e?(t=p.Storage.getStorage(S.KeyMapper.PUSH_TOKEN),H.sendEvent(S.KeyMapper.ALREADY_GRANTED,t)):2==e&&(H.updatePermissionStatus(2),H.sendEvent(S.KeyMapper.ALREADY_DENIED))})):1==y.Config.notification.isSdkHttps&&("default"==window.Notification.permission?0==o?H.promptEventHandler(H.nativeHandler):1==o?H.promptEventHandler(H.loadOptin):2==o&&H.triggerEventHandler(H.nativeHandler):H.nativeHandler())},H.triggerEventHandler=function(e){y.Config.store.isNotificationCalledManually?(y.Config.store.isTriggerPromptWithDelay||(y.Config.notification.promptDelay=0),H.delayHandler(e)):c.Helper.displayLog("auto prompt false found!")},H.requestSafariPermission=function(){H.sendEvent(S.KeyMapper.PROMPTED),H.brandingOverlayHandler();try{window.safari.pushNotification.requestPermission(y.Config.notification.webServiceUrl,y.Config.notification.webPushId,{url:window.location.href},function(e){var t;"granted"===e.permission?(H.closeHttpsOverlay(),t=e.deviceToken,H.sendEvent(S.KeyMapper.PROMPT_ALLOWED,t),c.Helper.displayLog("Granted Key= "+t)):e.permission===S.KeyMapper.PROMPT_DENIED&&(H.closeHttpsOverlay(),H.sendEvent(S.KeyMapper.PROMPT_DENIED))})}catch(e){H.closeHttpsOverlay()}},H.checkSafariPermission=function(){var e,t,o;""!=y.Config.notification.webPushId&&""!=y.Config.notification.webServiceUrl?(e="","safari"in window&&"pushNotification"in window.safari&&("default"===(t=window.safari.pushNotification.permission(y.Config.notification.webPushId)).permission?0==(o=y.Config.notification.promptType)?H.promptEventHandler(H.requestSafariPermission):1==o?H.promptEventHandler(H.loadOptin):2==o&&H.triggerEventHandler(H.requestSafariPermission):"granted"===t.permission?(e=t.deviceToken,H.sendEvent(S.KeyMapper.ALREADY_GRANTED,e),c.Helper.displayLog("Already Granted & key= ",e)):t.permission===S.KeyMapper.PROMPT_DENIED&&(H.sendEvent(S.KeyMapper.ALREADY_DENIED),c.Helper.displayLog(S.KeyMapper.PROMPT_DENIED)))):c.Helper.displayLog("Stopped! Safari certificate not found")},H.delayHandler=function(e){y.Config.notification.promptDelay?(c.Helper.displayLog("Triggering prompt delay for : "+y.Config.notification.promptDelay+" ms"),setTimeout(e,y.Config.notification.promptDelay)):e()},H.promptEventHandler=function(e){var t;H.isActivePrompt()?c.Helper.displayLog(y.Config.brandingPartner+" notification off for this device"):H.isRepeatPromptDelay()||(t=function(){y.Config.notification.promptOnLoad?"complete"==document.readyState?(c.Helper.displayLog("Calling prompt instantly"),e()):(c.Helper.displayLog("Wait till web page load completely"),window.addEventListener("load",function(){e()})):e()},1==y.Config.notification.promptOnScroll&&c.Helper.isScreenScrollable()?(c.Helper.displayLog("optIn will be shown on page scroll!"),window.addEventListener("scroll",function(){H.scrollHandler(t)})):H.delayHandler(t))},H.isRepeatPromptDelay=function(){var e,t=!1;return y.Config.notification.windowType||(e=new Date,p.Storage.getConfigLocal(S.KeyMapper.REPEAT_PROMPT_DELAY)>e.getTime()&&(t=!0,c.Helper.displayLog("Wait until repeat prompt delay expire!"))),t},H.triggerPromptHandler=function(e){void 0===e&&(e=!1),y.Config.store.isNotificationCalledManually||(e&&(y.Config.store.isTriggerPromptWithDelay=!0),y.Config.store.isNotificationCalledManually=!0,H.promptHandler())},H.noRootHandler=function(e){c.Helper.displayLog("No root handler initiated..."),c.Helper.addMsgReciever(H.msgReciever),"granted"==(e=e||c.Helper.getParamFromUrl(document.location.href,"status"))?H.registerServiceWorker(y.Config.notification.serviceWorkerPath).then(function(e){H.subscribe(S.KeyMapper.PROMPT_ALLOWED)}):e==S.KeyMapper.ALREADY_GRANTED?H.getSubscription():"getOldSubscription"==e&&H.httpsGetOldSubscription(!0)},H.httpsNoRootGetOldSubscription=function(){return n(this,void 0,void 0,function(){return r(this,function(e){return[2,new Promise(function(t,e){var o;window.top==window.self?(o=(o=y.Config.notification.sourceOrigin+"?action=noroot")+"&izpt="+y.Config.notification.promptType+"&status=getOldSubscription",c.Helper.addMsgReciever(function(e){e=c.Helper.parseToJSON(e.data);!e.hasOwnProperty(S.KeyMapper.MESSAGE)||(e=e[S.KeyMapper.MESSAGE]).hasOwnProperty(S.KeyMapper.OLD_SUBSCRIPTION)&&null!=e[S.KeyMapper.OLD_SUBSCRIPTION]&&t(e[S.KeyMapper.OLD_SUBSCRIPTION])},!0),c.Helper.addIFrame(o,"izSubFrame")):H.noRootHandler()})]})})},H.httpsGetOldSubscription=function(r){return void 0===r&&(r=!1),new Promise(function(t,e){try{var o=!1,i=!1,n=function(e){0==i&&(i=!0,r&&c.Helper.postMessage("parent",S.KeyMapper.OLD_SUBSCRIPTION,o),c.Helper.displayLog(e),t(o))};setTimeout(function(){n("SW Registration not found!")},1500),navigator.serviceWorker.ready.then(function(e){-1==e.scope.indexOf(y.Config.notification.domainRoot)?n(y.Config.brandingPartner+" sw not found found !"):e.pushManager.getSubscription().then(function(e){e&&(o=JSON.stringify(e)),n("SW Registration found!"),c.Helper.displayLog("Recovered Subscription : ",o)}).catch(function(){c.Helper.displayLog("Not Resolved")})})}catch(e){}})},H.noRootVersionHandler=function(){s.IndexedDB.addUpdate("noRootAllowed",1).then(function(e){c.Helper.displayLog(e)}).catch(function(e){c.Helper.displayLog(e)})},H.getResponseCode=function(e){var t={};t[S.KeyMapper.PROMPT_ALLOWED]={response:"subscribed",statuscode:1},t[S.KeyMapper.SUBSCRIBED]={response:"subscribed",statuscode:1},t[S.KeyMapper.ALREADY_GRANTED]={response:"already subscribed",statuscode:2},t[S.KeyMapper.PROMPT_DENIED]={response:"blocked",statuscode:3},t[S.KeyMapper.ALREADY_DENIED]={response:"already blocked",statuscode:4},t[S.KeyMapper.BROWSER_UNSUPPORTED]={response:"browser not supported",statuscode:5},t[S.KeyMapper.PROMPT_CLOSED]={response:"prompt closed",statuscode:6},t[S.KeyMapper.UNSUBSCRIBED]={response:"soft unsubscribed",statuscode:7},t[S.KeyMapper.ALREADY_UNSUBSCRIBED]={response:"already soft unsubscribed",statuscode:8},t[S.KeyMapper.OPTIN_ALLOWED]={response:"soft subscribed",statuscode:9},t[S.KeyMapper.SUBSCRIBER_REGISTRED]={response:"subscriber reregistered",statuscode:10};var o={};return o[S.KeyMapper.OPTIN_SHOWN]={response:"soft prompt displayed",statuscode:1},o[S.KeyMapper.OPTIN_CLOSED]={response:"soft prompt closed",statuscode:2},o[S.KeyMapper.PROMPTED]={response:"native prompt displayed",statuscode:3},o[S.KeyMapper.POPUP_OPEN]={response:"prompt window opened",statuscode:4},o[S.KeyMapper.POPUP_CLOSED]={response:"prompt window closed",statuscode:5},void 0!==t[e]?t[e]:void 0!==o[e]?o[e]:void 0},H.sendEvent=function(t,o){if(c.Helper.displayLog("Event caught : ",t),T.ChannelEventHandler.event("webPush",t),1!=y.Config.notification.windowType&&6!=y.Config.notification.windowType){var e=[S.KeyMapper.PROMPT_ALLOWED,S.KeyMapper.SUBSCRIBED,S.KeyMapper.ALREADY_GRANTED,S.KeyMapper.PROMPT_DENIED,S.KeyMapper.ALREADY_DENIED,S.KeyMapper.BROWSER_UNSUPPORTED,S.KeyMapper.PROMPT_CLOSED,S.KeyMapper.UNSUBSCRIBED,S.KeyMapper.ALREADY_UNSUBSCRIBED,S.KeyMapper.OPTIN_ALLOWED],i=[S.KeyMapper.OPTIN_SHOWN,S.KeyMapper.OPTIN_CLOSED,S.KeyMapper.PROMPTED,S.KeyMapper.POPUP_OPEN,S.KeyMapper.POPUP_CLOSED],n=l([S.KeyMapper.PROMPT_ALLOWED,S.KeyMapper.ALREADY_GRANTED,S.KeyMapper.PROMPT_DENIED],y.Config.notification.eventsToSync),r="";t!=S.KeyMapper.PROMPT_ALLOWED&&t!=S.KeyMapper.ALREADY_GRANTED||(H.syncPIDset(),g.GDPR.init(),H.syncHookInDb("syncNotificationView"),H.syncHookInDb("syncNotificationClick")),t==S.KeyMapper.PROMPT_ALLOWED&&""!=y.Config.notification.sourceOriginAlt&&H.removeSubsriptionFromAlternateDomain(),t!=S.KeyMapper.PROMPTED&&t!=S.KeyMapper.OPTIN_SHOWN||(H.updatePromptCount(t),H.setActivePrompt(5),p.Storage.removeStorage(S.KeyMapper.PUSH_TOKEN),0!=y.Config.notification.repeatPromptDelay&&H.setRepeatPromptDelay(y.Config.notification.repeatPromptDelay)),t==S.KeyMapper.OPTIN_CLOSED&&0!=y.Config.notification.optInCloseDelay&&H.setRepeatPromptDelay(y.Config.notification.optInCloseDelay),t==S.KeyMapper.PROMPT_CLOSED&&p.Storage.removeStorage(S.KeyMapper.ACTIVE_PROMPT),-1!=n.indexOf(t)&&(this.isSyncPermissionStatus&&H.updatePermissionStatus(t),n=b.AdNetwork.getAdNetworkParam(),null!=o?(t==S.KeyMapper.PROMPT_ALLOWED&&2==y.Config.global.browserType&&H.showWelcomeNotificationOld(o),r+=n,"object"==typeof o&&(o=JSON.stringify(o)),n=p.Storage.getStorage(S.KeyMapper.PUSH_TOKEN),o!=n&&H.updateSubscriptionToken(o),t==S.KeyMapper.PROMPT_ALLOWED||t==S.KeyMapper.ALREADY_GRANTED?H.syncEvent(t,o,r):H.syncEvent(t)):H.syncEvent(t)),-1!=e.indexOf(t)&&(e=H.getResponseCode(t),t==S.KeyMapper.ALREADY_GRANTED&&(y.Config.store.isSoftSubscribeTriggered&&(e=H.getResponseCode(S.KeyMapper.SUBSCRIBED)),y.Config.store.isSubscriptionLost&&(e=H.getResponseCode(S.KeyMapper.SUBSCRIBER_REGISTRED))),H.subscriptionEventsCallback(t,e)),-1!=i.indexOf(t)&&H.promptDisplayCallback(t,H.getResponseCode(t))}else try{var a="parent",s=[S.KeyMapper.SUBSCRIBED,S.KeyMapper.ALREADY_GRANTED,S.KeyMapper.PROMPT_DENIED,S.KeyMapper.PROMPT_ALLOWED,S.KeyMapper.PROMPT_CLOSED,S.KeyMapper.ALREADY_DENIED];y.Config.global.isFrame||(a="opener",H.popupNoticeHandler(t)),H.getswVersion().then(function(e){c.Helper.postMessage(a,t,o,e)}).catch(function(e){c.Helper.postMessage(a,t,o),c.Helper.displayLog("Error while getting sw version")}).finally(function(){t==S.KeyMapper.PROMPT_ALLOWED&&H.showWelcomeNotification(!1)&&c.Helper.postMessage(a,"syncWelcomeSent",1),-1<s.indexOf(t)&&"opener"==a&&H.closePopupWindow()})}catch(e){}},H.popupNoticeHandler=function(e){switch(e){case S.KeyMapper.PROMPTED:H.popupNotice(y.Config.notification.clickOnAllowMsg);break;case S.KeyMapper.PROMPT_ALLOWED:H.popupNotice(y.Config.notification.subscribedMsg);break;case S.KeyMapper.ALREADY_GRANTED:H.popupNotice(y.Config.notification.alreadySubscribedMsg);break;case S.KeyMapper.PROMPT_DENIED:H.popupNotice(y.Config.notification.blockedMsg);break;case S.KeyMapper.ALREADY_DENIED:H.popupNotice(y.Config.notification.alreadyDeniedMsg)}},H.subscriptionEventsCallback=function(e,t){try{"function"==typeof a.Queue.subscriptionCallback?a.Queue.subscriptionCallback(t):"function"==typeof a.Queue.userCallback&&(7!=t.statuscode&&8!=t.statuscode||(t={response:"unsubscribed",statuscode:7}),a.Queue.userCallback(t)),m.GoogleAnalytics.isCallbackAllowed(y.Config.ga.subscriptionCallback,t.statuscode)&&m.GoogleAnalytics.process(t.response)}catch(e){console.warn("Error while responding to subscription callback",e)}},H.promptDisplayCallback=function(e,t){try{"function"==typeof a.Queue.promptDisplayCallback&&a.Queue.promptDisplayCallback(t),m.GoogleAnalytics.isCallbackAllowed(y.Config.ga.promptDisplayCallback,t.statuscode)&&m.GoogleAnalytics.process(t.response)}catch(e){console.warn("Error while responding to prompt display callback",e)}},H.syncEvent=function(t,e,o){if(0<=y.Config.store.syncedEventList.indexOf(t))c.Helper.displayLog("Abort! This event has been synced already");else{y.Config.store.syncedEventList.push(t);var i=H.getDeviceParameters();if(void 0!==e){i+=H.getSubscriptionParameters(e),null!=o&&"undefined"!=o&&(i+=o);o=c.Helper.getUTMParamsOfUrl();if(!1!==o&&(i+="&"+o),t!=S.KeyMapper.PROMPT_ALLOWED&&t!=S.KeyMapper.ALREADY_GRANTED||(t==S.KeyMapper.PROMPT_ALLOWED&&y.Config.notification.isSdkHttps&&"https:"==y.Config.global.locationProtocol&&H.showWelcomeNotification(!1),1==y.Config.notification.isShopify&&u.Shopify.init(!0),a.Queue.sync(),f.TabAbandonments.init(),C.VideoDropOff.init(),w.CRPSPlaybook.init(),E.RecommendArticle.init(),H.syncLastVisit(),1==b.AdNetwork.forceSyncAdNetwork&&H.syncAdNetwork(b.AdNetwork.getAdNetworkParam(!0)),P.AutoSegment.init(),y.Config.newsHub.allVisitors||M.NewsHub.init()),""!=p.Storage.getStorage(S.KeyMapper.UUID)&&!p.Storage.getConfigLocal(S.KeyMapper.PUSH_TOKEN_NOT_SYNCED))return}H.getExtraParameterToSync(t).then(function(e){switch(i+=e,t){case S.KeyMapper.OPTIN_SHOWN:i+="&divShow=1";break;case S.KeyMapper.OPTIN_ALLOWED:i+="&divAllowed=1";break;case S.KeyMapper.OPTIN_CLOSED:i+="&divClosed=1";break;default:i+="&"+t+"=1"}e={data:i};d.HttpRequest.post(c.Helper.getEndpoint(t),e,function(){p.Storage.removeConfigLocal(S.KeyMapper.PUSH_TOKEN_NOT_SYNCED),y.Config.brandingPartner}),"momagic"!=y.Config.brandingPartner.toLowerCase()||t!=S.KeyMapper.PROMPT_ALLOWED&&t!=S.KeyMapper.ALREADY_GRANTED||d.HttpRequest.post("https://irctc.truenotify.in/momagicflow/enp",e,function(){c.Helper.displayLog("Additional api : "+t+" synced successfully with "+y.Config.brandingPartner)})})}},H.updateSubscriptionToken=function(e){3==y.Config.notification.subscriptionType?p.Storage.setStorage(S.KeyMapper.PUSH_TOKEN,e):2==y.Config.notification.subscriptionType?("object"==typeof e&&(e=JSON.stringify(e)),p.Storage.setStorage(S.KeyMapper.PUSH_TOKEN,encodeURIComponent(e))):1==y.Config.notification.subscriptionType?p.Storage.setStorage(S.KeyMapper.PUSH_TOKEN,e):c.Helper.displayLog("No GCM Token"),p.Storage.setConfigLocal(S.KeyMapper.PUSH_TOKEN_NOT_SYNCED,1),p.Storage.updateLastSync(S.KeyMapper.PUSH_TOKEN);e=p.Storage.getStorage(S.KeyMapper.USER_PROPERTY);(e=c.Helper.parseToJSON(e))&&H.syncProperties("SegmentProperties","add",e,function(){return c.Helper.displayLog("User property re-synced succesfully")})},H.syncAdNetwork=function(o){var e=c.Helper.getEndpoint("syncAdNetwork"),t="pid="+y.Config.client+"&bkey="+c.Helper.getCurrentUUID()+"&";t+=c.Helper.objToParam(o);d.HttpRequest.post(e,{data:t},function(e,t){200==t&&Object.keys(o).map(function(e){o[e]&&p.Storage.setConfigLocal(e,o[e])})})},H.syncProperties=function(t,i,n,r){var o=c.Helper.getEndpoint(t),a=H.getDeviceParameters(),e="";switch(t){case"SegmentEvents":e="evt";break;case"SegmentProperties":e="userp";break;case"PersonalProperties":e="pers";break;case"TriggerEvent":e="trg"}a+="&et="+e;var a=null!=n?(n=encodeURIComponent(JSON.stringify(n)),a+"&act="+i+"&val="+n):a+"&act="+i,s=p.Storage.getStorage(S.KeyMapper.PUSH_TOKEN);if(H.isSubscriptionExist()){try{a+=H.getSubscriptionParameters(s)}catch(e){}var l=function(e,t,o){200==t&&H.syncUserEventCallback(o,i,n),null!=r&&"function"==typeof r&&r(e,t,o)};H.getExtraParameterToSync().then(function(e){e={data:a+=e};d.HttpRequest.post(o,e,l,void 0,void 0,t),"momagic"==y.Config.brandingPartner.toLowerCase()&&"SegmentProperties"==t&&d.HttpRequest.post("https://irctc.truenotify.in/momagicflow/up",e,function(){c.Helper.displayLog("Additional User property synced successfully with "+y.Config.brandingPartner)},void 0,void 0,t)})}else c.Helper.displayLog(t+" Aborted! No subscription key or UUID found")},H.isSubscriptionExist=function(){return!(!p.Storage.getStorage(S.KeyMapper.PUSH_TOKEN)||!c.Helper.getCurrentUUID())},H.syncUserEventCallback=function(e,t,o){var i="";switch(e){case"SegmentEvents":i="User Event";break;case"SegmentProperties":i="User Property";break;case"PersonalProperties":i="Personalization Property";break;case"TriggerEvent":i="Trigger"}try{var n={};n[i]=decodeURIComponent(o),y.Config.store.syncedSegments.push(n)}catch(e){}1==y.Config.debugger.status&&(e=h.Debugger.getMsgSet(),n=i+": "+(o=decodeURIComponent(o))+" "+e.ev,"SegmentEvents"!=i&&"TriggerEvent"!=i||(n=i+": "+t+" "+e.ev,o&&(n+=" with data "+o)),h.Debugger.log(n,y.Config.debugger.successCode))},H.getSyncCount=function(e,t){var o=new Date,i=o.getDate(),n=o.getMonth()+1,o=p.Storage.getConfigLocal(S.KeyMapper.DM_SYNC_COUNT,S.KeyMapper.STATS);if("event"==e){var r=p.Storage.getConfigLocal(S.KeyMapper.LAST_EVENT_SYNC,S.KeyMapper.SYNC);if(""==r)return 0;var a,s=(a=new Date(r)).getDate(),r=a.getMonth()+1;return t==S.KeyMapper.DAILY?null!=o[S.KeyMapper.EVENT_DAILY]&&i==s?o[S.KeyMapper.EVENT_DAILY]:0:t==S.KeyMapper.MONTHLY?null!=o[S.KeyMapper.EVENT_MONTHLY]&&n==r?o[S.KeyMapper.EVENT_MONTHLY]:0:void 0}if("userProperty"==e){e=p.Storage.getConfigLocal(S.KeyMapper.LAST_PROPERTY_SYNC,S.KeyMapper.SYNC);if(""==e)return 0;s=(a=new Date(e)).getDate(),r=a.getMonth()+1;return t==S.KeyMapper.DAILY?null!=o[S.KeyMapper.PROPERTY_DAILY]&&i==s?o[S.KeyMapper.PROPERTY_DAILY]:0:t==S.KeyMapper.MONTHLY?null!=o[S.KeyMapper.PROPERTY_MONTHLY]&&n==r?o[S.KeyMapper.PROPERTY_MONTHLY]:0:void 0}},H.hasSynclimitReached=function(e){return"event"==e?!y.Config.notification.evtTracking||(y.Config.notification.syncLimit.evtPerMonth<=H.getSyncCount("event",S.KeyMapper.MONTHLY)||y.Config.notification.syncLimit.evtPerDay<=H.getSyncCount("event",S.KeyMapper.DAILY)):"userProperty"==e?!y.Config.notification.propsTracking||(y.Config.notification.syncLimit.propsPerMonth<=H.getSyncCount("userProperty",S.KeyMapper.MONTHLY)||y.Config.notification.syncLimit.propsPerDay<=H.getSyncCount("userProperty",S.KeyMapper.DAILY)):void 0},H.userEventProcessor=function(e,t){if(!y.Config.notification.userEvents)return c.Helper.displayLog("Sync aborted! : User event disabled");var o;H.hasSynclimitReached("event")?c.Helper.displayLog("Sync aborted! : Daily/monthly limit reached!"):(e=H.parseData(e),e=H.filterData(e),H.validateData(e)&&(null!=t&&1<=Object.keys(t).length&&!(o=H.filterProperties(t,{key:32,value:32,object:16},["string","number","boolean"]))?c.Helper.displayLog(S.KeyMapper.INVALID_PAYLOAD):H.syncProperties("SegmentEvents",e,o,function(){H.increaseSyncCount("event")})))},H.addPropertyProcessorFallback=function(o){var t,i,e;"object"!=typeof o||"string"!=typeof o.name||"string"!=typeof o.value&&"number"!=typeof o.value&&"boolean"!=typeof o.value||""===o.value?c.Helper.displayLog(S.KeyMapper.INVALID_PAYLOAD):("subscriber_id"==o.name&&o.value&&s.IndexedDB.addUpdate("subscriberId",o.value).then(function(e){y.Config.store.subscriberId=o.value}).catch(function(e){c.Helper.displayLog(e)}),t=c.Helper.getEndpoint("CustomerIDSynch"),i=H.getDeviceParameters(),e=p.Storage.getStorage(S.KeyMapper.PUSH_TOKEN),i+=H.getSubscriptionParameters(e),i+="&name="+o.name+"&value="+o.value+"&operation=add_property",(e=p.Storage.getConfigLocal("subscriberId"))!=o.value?H.getExtraParameterToSync().then(function(e){i+=e,d.HttpRequest.post(t,{data:i},function(e,t){200==t&&p.Storage.setConfigLocal("subscriberId",o.value)}),"momagic"==y.Config.brandingPartner.toLowerCase()&&d.HttpRequest.post("https://irctc.truenotify.in/momagicflow/up",{data:i},function(){c.Helper.displayLog("Additional User property synced successfully with "+y.Config.brandingPartner)})}):c.Helper.displayLog("This subscriber id already synced:",e))},H.increaseSyncCount=function(e){var t,o,i,n=new Date,r=n.getDate(),a=n.getMonth()+1,s=p.Storage.getConfigLocal(S.KeyMapper.DM_SYNC_COUNT,S.KeyMapper.STATS),l=""!=s?s:{};"event"==e?(""==(n=p.Storage.getConfigLocal(S.KeyMapper.LAST_EVENT_SYNC,S.KeyMapper.SYNC))?(l[S.KeyMapper.EVENT_DAILY]=1,l[S.KeyMapper.EVENT_MONTHLY]=1):(o=(t=new Date(n)).getDate(),i=t.getMonth()+1,null!=s[S.KeyMapper.EVENT_DAILY]&&r==o?l[S.KeyMapper.EVENT_DAILY]=s[S.KeyMapper.EVENT_DAILY]+1:l[S.KeyMapper.EVENT_DAILY]=1,null!=s[S.KeyMapper.EVENT_MONTHLY]&&a==i?l[S.KeyMapper.EVENT_MONTHLY]=s[S.KeyMapper.EVENT_MONTHLY]+1:l[S.KeyMapper.EVENT_MONTHLY]=1),p.Storage.updateLastSync(S.KeyMapper.LAST_EVENT_SYNC)):"userProperty"==e&&(""==(e=p.Storage.getConfigLocal(S.KeyMapper.LAST_PROPERTY_SYNC,S.KeyMapper.SYNC))?(l[S.KeyMapper.PROPERTY_DAILY]=1,l[S.KeyMapper.PROPERTY_MONTHLY]=1):(o=(t=new Date(e)).getDate(),i=t.getMonth()+1,null!=s[S.KeyMapper.PROPERTY_DAILY]&&r==o?l[S.KeyMapper.PROPERTY_DAILY]=s[S.KeyMapper.PROPERTY_DAILY]+1:l[S.KeyMapper.PROPERTY_DAILY]=1,null!=s[S.KeyMapper.PROPERTY_MONTHLY]&&a==i?l[S.KeyMapper.PROPERTY_MONTHLY]=s[S.KeyMapper.PROPERTY_MONTHLY]+1:l[S.KeyMapper.PROPERTY_MONTHLY]=1),p.Storage.updateLastSync(S.KeyMapper.LAST_PROPERTY_SYNC)),p.Storage.setConfigLocal(S.KeyMapper.DM_SYNC_COUNT,l,S.KeyMapper.STATS)},H.toTriggerData=function(e,t){var o={},i={},n={collection_viewed:["collection_viewed",{collection_title:"collection_name",collection_link:"collection_url"}],product_viewed:["product_viewed",{product_title:"product_name",product_link:"product_url"}],added_to_cart:["added_to_cart",{product_title:"product_name"}],add_to_cart:["added_to_cart",{product_title:"product_name"}],order_placed:["order_placed",{}],purchased:["order_placed",{}]};if(n.hasOwnProperty(e)&&(o=n[e=n[e][0]][1]),null!=t)for(var r in t)o.hasOwnProperty(r)?i[o[r]]=t[r]:i[r]=t[r];return[e,i]},H.syncAsTrigger=function(e,t){e=H.parseData(e),e=H.filterData(e);var o={product_viewed:["product_browsed"],added_to_cart:["product_addedtocart","product_browsed"],order_placed:["product_addedtocart","product_browsed"]};if(1==y.Config.notification.eventAsTrigger&&0<=["collection_viewed","product_viewed","added_to_cart","add_to_cart","order_placed","purchased"].indexOf(e)){t=H.toTriggerData(e,t);if(0<Object.keys(t[1]).length?H.triggerProcessor(t[0],t[1]):H.triggerProcessor(t[0]),o.hasOwnProperty(t[0])){var i,n=o[t[0]];for(i in n)H.triggerProcessor(n[i])}}},H.triggerProcessor=function(e,t,o){e=H.parseData(e),e=H.filterData(e);var i;H.validateData(e)&&(null!=t&&1<=Object.keys(t).length&&!(i=H.filterProperties(t,{key:32,value:512,object:16},["string"]))?c.Helper.displayLog(S.KeyMapper.INVALID_PAYLOAD):H.syncProperties("TriggerEvent",e,i,o))},H.personalizationProcessor=function(e){null!=e&&1<=Object.keys(e).length&&((e=H.filterProperties(e.add,{key:32,value:32,object:1},["number","string"]))?H.syncProperties("PersonalProperties","",e):c.Helper.displayLog(S.KeyMapper.INVALID_PAYLOAD))},H.userProfileProcessor=function(e){var o,i="",t={key:32,value:32,object:64};if(H.hasSynclimitReached("userProperty"))c.Helper.displayLog("Sync aborted! : Daily/monthly limit reached!");else if(null!=e&&1<=Object.keys(e).length){if(void 0!==e.add&&1<=Object.keys(e.add).length)o=H.filterProperties(e.add,t),i="add";else{if(!(void 0!==e.remove&&1<=Object.keys(e.remove).length))return void c.Helper.displayLog(S.KeyMapper.INVALID_PAYLOAD);o=H.filterProperties(e.remove,t),i="remove"}if(o){if(H.isPropertySynced(o,i))return c.Helper.displayLog("This property already synced : ",o),void(1==y.Config.debugger.status&&(t="User Property: Already Sent to "+y.Config.brandingPartner,h.Debugger.log(t+" "+JSON.stringify(o),y.Config.debugger.successCode)));H.syncProperties("SegmentProperties",i,o,function(e,t){200==t&&(H.increaseSyncCount("userProperty"),H.propertySynced("userProperty",o,i))})}else c.Helper.displayLog(S.KeyMapper.INVALID_PAYLOAD)}},H.propertySynced=function(e,o,i){var n;void 0===i&&(i="add"),"userProperty"==e&&(n=p.Storage.getStorage(S.KeyMapper.USER_PROPERTY),(n=c.Helper.parseToJSON(n))&&"object"==typeof n?Object.keys(o).forEach(function(t){Array.isArray(o[t])?"add"==i?(0==Array.isArray(n[t])&&(n[t]=[]),o[t].forEach(function(e){-1<n[t].indexOf(e)==0&&n[t].push(e)})):"remove"==i&&Array.isArray(n[t])&&(o[t].forEach(function(e){e=n[t].indexOf(e);-1<e&&n[t].splice(e,1)}),0==n[t].length&&delete n[t]):"remove"==i?delete n[t]:n[t]=o[t]}):n=o,p.Storage.setStorage(S.KeyMapper.USER_PROPERTY,JSON.stringify(n)),H.setUserProperties(n))},H.isPropertySynced=function(e,t){void 0===t&&(t="add");var o=p.Storage.getStorage(S.KeyMapper.USER_PROPERTY);if(!(o=c.Helper.parseToJSON(o))||"remove"==t)return!1;if(o&&"object"==typeof o){var t=Object.keys(e),i=Object.keys(o);if(0==t.every(function(e){return-1<i.indexOf(e)}))return!1;for(var n=!1,r=0,a=t;r<a.length;r++)if("break"===function(t){if(Array.isArray(e[t])){if(0==e[t].every(function(e){return-1<o[t].indexOf(e)}))return n=!0,"break"}else if(o.hasOwnProperty(t)&&o[t]!=e[t])return n=!0,"break"}(a[r]))break;if(n)return!1}return!0},H.filterData=function(e){if("string"==typeof e)return e},H.parseData=function(e){return"string"==typeof e?e.trim():"number"==typeof e?e.toString().trim():e},H.validateData=function(e){if(e.length<=32&&e.length)return!0},H.filterProperties=function(p,d,u){void 0===u&&(u=["number","string","boolean","object"]);try{var g={},f=0;if("object"==typeof p)return Object.keys(p).map(function(e){var t=e;if(e=e.substring(0,d.key),f<d.object&&""!=e.trim()&&e.length<=d.key){var o=(o=e.toLowerCase()).trim();if("string"==typeof(i=p[t])&&""!=i&&-1<u.indexOf(typeof i)){var i,e=(i=i.trim()).substring(0,d.value),t=new RegExp("^(https?)://");""!=i&&(i.length<=d.value||t.test(i))?g[o]=i:g[o]=e,f++}else if("object"==typeof i&&-1<u.indexOf(typeof i)){if(i instanceof Array&&1<=i.length){var n,r=i,a=[],s=0;for(n in r){var l,c=r[n];"number"==typeof(c=c.substring(0,d.value))&&null!=c&&s<=d.object&&c.toString().length<=d.value?(l=c,a.push(l),s++):"string"==typeof c&&""!=c.trim()&&s<=d.object&&c.trim().length<=d.value&&(l=c.trim(),a.push(l),s++)}1<=a.length&&(g[o]=a,f++)}}else("boolean"==typeof i&&-1<u.indexOf(typeof i)||"number"==typeof i&&-1<u.indexOf(typeof i)&&(i.toString().length<=d.value&&null!=i||-1<y.Config.notification.allowedKeys.indexOf(o)))&&(g[o]=i,f++)}}),g}catch(e){}return!1},H.setUserProperties=function(e){s.IndexedDB.addUpdate(S.KeyMapper.USER_PROP,e).then(function(e){c.Helper.displayLog(e)}).catch(function(e){c.Helper.displayLog(e)})},H.setUuidDb=function(e){s.IndexedDB.addUpdate("uid",e).then(function(e){}).catch(function(e){c.Helper.displayLog(e)})},H.setIzcidDb=function(e){s.IndexedDB.addUpdate("IZCID",e).then(function(e){}).catch(function(e){c.Helper.displayLog(e)})},H.getIzCidPromise=function(){return new Promise(function(e,t){var o,i=p.Storage.getConfigLocal(S.KeyMapper.IZCID),n=p.Storage.getConfigLocal(S.KeyMapper.IZCID,S.KeyMapper.SYNC);""==i||""==n?(c.Helper.addMsgReciever(H.msgReciever),H.setCookieGlobalID(),""!=(o=p.Storage.getConfigLocal(S.KeyMapper.IZCID))?e(o):setTimeout(function(){e(o),o&&"undefined"!=o&&H.setIzcidDb(o)},2500)):(e(i),i&&"undefined"!=i&&H.setIzcidDb(i))}).catch(function(e){c.Helper.displayLog(e)})},H.setSubscriberIdFromDb=function(){return new Promise(function(t,e){s.IndexedDB.getIndexDBData("options","subscriberId").then(function(e){e?(c.Helper.displayLog("sub id found from db: ",e.val),y.Config.store.subscriberId=e.val,t(y.Config.store.subscriberId)):(c.Helper.displayLog("sub id not found "),t(!1))}).catch(function(e){c.Helper.displayLog("Error in getting sub id",e),t(!1)})})},H.setCookieGlobalID=function(){return new Promise(function(e,t){1!=y.Config.izootoStatus?e(!1):document.getElementById(S.KeyMapper.IZCIDDOM)?y.Config.global.isSetCidLoaded&&e(!0):c.Helper.addIFrame("https://cdn.izooto.com/scripts/sak/iz_setcid.html?v=1",S.KeyMapper.IZCIDDOM).then(function(){y.Config.global.isSetCidLoaded=!0,e(!0)})})},H.isIncognitoMode=function(){var t=this;return new Promise(function(o,e){return n(t,void 0,void 0,function(){var t;return r(this,function(e){switch(e.label){case 0:switch(y.Config.global.browserType){case 1:case 6:case 7:return[3,1];case 3:return[3,3]}return[3,4];case 1:return[4,H.chromePrivateTest()];case 2:return e.sent()?o(!0):o(!1),[3,5];case 3:try{return(t=indexedDB.open("test")).onsuccess=function(){return o(!1)},t.onerror=function(){return o(!0)},[3,5]}catch(e){}e.label=4;case 4:o(!1),e.label=5;case 5:return[2]}})})})},H.getChromiumQuotaLimit=function(){var e=window;return void 0!==e.performance&&void 0!==e.performance.memory&&void 0!==e.performance.memory.jsHeapSizeLimit?performance.memory.jsHeapSizeLimit:1073741824},H.storageQuotaChromePrivateTest=function(){var i=this;return new Promise(function(o,e){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(e,t){o(t<i.getChromiumQuotaLimit())},function(e){c.Helper.displayLog("detectIncognito somehow failed to query storage quota: "+e.message),o(!1)})})},H.oldChromePrivateTest=function(){return new Promise(function(e,t){var o=window.RequestFileSystem||window.webkitRequestFileSystem;o?o(0,1,function(){return e(!1)},function(){return e(!0)}):e(!1)})},H.chromePrivateTest=function(){return n(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return void 0===Promise||void 0===Promise.allSettled?[3,2]:[4,this.storageQuotaChromePrivateTest()];case 1:return[2,e.sent()];case 2:return[4,this.oldChromePrivateTest()];case 3:return[2,e.sent()]}})})},H.updatePromptCount=function(e){var t=0;e==S.KeyMapper.PROMPTED?(t=""!=p.Storage.getConfigLocal(S.KeyMapper.PROMPT_COUNT,S.KeyMapper.STATS)?p.Storage.getConfigLocal(S.KeyMapper.PROMPT_COUNT,S.KeyMapper.STATS)+1:1,p.Storage.setConfigLocal(S.KeyMapper.PROMPT_COUNT,t,S.KeyMapper.STATS)):e==S.KeyMapper.OPTIN_SHOWN&&(t=""!=p.Storage.getConfigLocal(S.KeyMapper.OPTIN_SHOWN_COUNT,S.KeyMapper.STATS)?p.Storage.getConfigLocal(S.KeyMapper.OPTIN_SHOWN_COUNT,S.KeyMapper.STATS)+1:1,p.Storage.setConfigLocal(S.KeyMapper.OPTIN_SHOWN_COUNT,t,S.KeyMapper.STATS))},H.getSubscriptionKey=function(e){if(!e)return"";if("string"==typeof(e=H.subcriptionToObject(e)))return e;var t=e.endpoint,e=y.Config.global.browserName;return e==S.KeyMapper.BROWSER_FIREFOX?t.substring(48):(e==S.KeyMapper.BROWSER_OPERA||e==S.KeyMapper.BROWSER_CHROME)&&null!=t&&0<=t.indexOf("fcm.googleapis.com")?t.substring(36):e==S.KeyMapper.BROWSER_EDGE?encodeURIComponent(t.substring(41)):e==S.KeyMapper.BROWSER_UCB?t.substring(36):t.substring(40)},H.getSubscriptionParameters=function(e,t){try{var o="";return 3==y.Config.notification.subscriptionType?o="&st="+e:2==y.Config.notification.subscriptionType?(e=H.subcriptionToObject(e),o=("&ep="+(7==y.Config.global.browserType?encodeURIComponent(e.endpoint):e.endpoint)+"\n\t\t\t\t&auth="+e.keys.auth+"\n\t\t\t\t&pk="+e.keys.p256dh+"\n\t\t\t\t&vpk="+y.Config.notification.vapidKey+"\n\t\t\t   ").replace(/^\s+|\s+$/gm,"").split("\n").join("")):1==y.Config.notification.subscriptionType&&(o="&fe=1&ft="+e),o&&t?o:"&bKey="+c.Helper.getCurrentUUID()+o}catch(e){return c.Helper.displayLog("Error in getSubscriptionParameters",e),""}},H.getExtraParameterToSync=function(i){var e=(new Date).getTimezoneOffset(),n=("&tz="+(e+=330)+"\n\t\t\t\t\t\t\t&pt="+y.Config.notification.promptType+"\n\t\t\t\t\t\t\t&pte="+y.Config.notification.subscriptionType+" \n\t\t\t\t\t\t\t&ge="+y.Config.notification.gdprPromptStatus+"\n\t\t\t\t\t\t\t&ndc="+p.Storage.getConfigLocal(S.KeyMapper.PROMPT_COUNT,S.KeyMapper.STATS)).replace(/^\s+|\s+$/gm,"").split("\n").join(""),e=p.Storage.getConfigLocal(S.KeyMapper.PROMPT_COUNT,S.KeyMapper.STATS);return e&&(n+="&sdc="+e),""!=y.Config.notification.optInDesignType&&(0==y.Config.notification.promptType?n+="&optin=0":n+="&optin="+y.Config.notification.optInDesignType),new Promise(function(t,e){var o;i==S.KeyMapper.PROMPT_ALLOWED||i==S.KeyMapper.ALREADY_GRANTED?((o=y.Config.notification.serviceWorkerVersion)&&"undefined"!=o&&t(n+"&sw="+y.Config.notification.serviceWorkerVersion),H.getswVersion().then(function(e){e&&"undefined"!=e?(y.Config.notification.serviceWorkerVersion=e,t((n+"&sw="+e).replace(/^\s+|\s+$/gm,"").split("\n").join(""))):t(n)}).catch(function(e){t(n),c.Helper.displayLog("Error while getting sw version")})):t(n)}).catch(function(e){c.Helper.displayLog(e)})},H.getswVersion=function(){return n(this,void 0,void 0,function(){return r(this,function(e){try{return[2,new Promise(function(o,i){s.IndexedDB.getIndexDBData("options","swVer").then(function(e){var t=e.val;e.hasOwnProperty("key")?o(t):i(!1)}).catch(function(e){c.Helper.displayLog(e),i(!1)})})]}catch(e){c.Helper.displayLog(e)}return[2]})})},H.getDeviceParameters=function(){return("pid="+y.Config.client+"\n\t\t&izcid="+p.Storage.getConfigLocal(S.KeyMapper.IZCID)+"\n\t\t&ht="+("https:"==y.Config.global.locationProtocol?1:0)+"\n\t\t&btype="+y.Config.global.browserType+"\n\t\t&dtype="+y.Config.global.deviceType+"\n\t\t&bver="+y.Config.global.browserVer+"\n\t\t&os="+y.Config.global.os).replace(/^\s+|\s+$/gm,"").split("\n").join("")},H.createWelcomeNotification=function(){var e;1===y.Config.notification.welcomeNotification.status&&""!=y.Config.notification.welcomeNotification.icon&&""!=y.Config.notification.welcomeNotification.title&&""!=y.Config.notification.welcomeNotification.body&&((e=new window.Notification(y.Config.notification.welcomeNotification.title,{icon:y.Config.notification.welcomeNotification.icon,body:y.Config.notification.welcomeNotification.body,tag:"welcome"})).addEventListener("click",function(){""!=y.Config.notification.welcomeNotification.url?(e.close(),window.open(y.Config.notification.welcomeNotification.url,"_blank")):e.close()}),0<y.Config.notification.welcomeNotification.timeout&&setTimeout(function(){e.close()},y.Config.notification.welcomeNotification.timeout))},H.showWelcomeNotificationOld=function(e){1===y.Config.notification.welcomeNotification.status&&""!=y.Config.notification.welcomeNotification.icon&&""!=y.Config.notification.welcomeNotification.title&&""!=y.Config.notification.welcomeNotification.body&&1==y.Config.notification.isSdkHttps&&H.createWelcomeNotification()},H.sendLocalNotification=function(a){return navigator.serviceWorker.ready.then(function(e){var t={},o={};o.pid=a.key,o.link=a.link,o.cid=a.id,o.rid=a.rid,o.viewFlag=a.viewFlag,o.clickFlag=a.clickFlag,o.sysEvents=a.sysEvents,o.domainNum=a.domainNum;var i={body:a.message,icon:a.icon,requireInteraction:a.reqInt,tag:a.tag,image:a.banner,data:o};if(0<a.act_num&&a.act1name&&a.act1link){var n,r={action:"action1",title:a.act1name};return a.hasOwnProperty("act1icon")&&""!=a.act1icon&&(r.icon=a.act1icon),o.act1link=a.act1link,t=[r],2==a.act_num&&a.act2name&&a.act2link&&(n={action:"action2",title:a.act2name},a.hasOwnProperty("act2icon")&&""!=a.act2icon&&(n.icon=a.act2icon),o.act2link=a.act2link,t=[r,n]),i.actions=t,e.showNotification(a.title,i)}return e.showNotification(a.title,i)})},H.customizeOptInPrompt=function(e){var t={title:50,message:100,allowButton:10,laterButton:10};try{for(var o in e)""!=e[o]&&(e[o]=e[o].trim(),"title"==o?y.Config.notification.promptDesign.message=e[o].substring(0,t[o]):"message"==o?y.Config.notification.promptDesign.subMessage=e[o].substring(0,t[o]):"icon"!=o||!e[o].startsWith("http://")&&!e[o].startsWith("https://")||e[o].includes("panel.izooto")?"allowButton"==o?y.Config.notification.promptDesign.btn2Txt=e[o].substring(0,t[o]):"laterButton"==o&&(y.Config.notification.promptDesign.btn1Txt=e[o].substring(0,t[o])):y.Config.notification.promptDesign.icon=e[o])}catch(e){c.Helper.displayLog(e)}},H.registerServiceWorker=function(i){return new Promise(function(e,t){var o;"serviceWorker"in navigator?(o=(o=y.Config.notification.serviceWorkerScope)?{scope:o}:void 0,navigator.serviceWorker.register(i,o).then(function(){H.getswVersion().then(function(e){e&&"undefined"!=e&&(y.Config.notification.serviceWorkerVersion=e)}).catch(function(e){c.Helper.displayLog("swVersion undefined",e)}),y.Config.notification.windowType||(s.IndexedDB.setIndexedDb("gaId"),s.IndexedDB.setIndexedDb("sysEvents")),e(!0)}).catch(function(e){t(e),c.Helper.displayLog(e)})):(c.Helper.displayLog(o="Service workers are not supported in this browser."),t(o))}).catch(function(e){c.Helper.displayLog(e)})},H.getSubscription=function(){var i=this;return new Promise(function(t,o){H.registerServiceWorker(y.Config.notification.serviceWorkerPath).then(function(e){navigator.serviceWorker.ready.then(function(e){e.pushManager.getSubscription().then(function(e){JSON.stringify(e),e||(c.Helper.displayLog("Re-subscribing"),y.Config.store.isSubscriptionLost=!0),i.subscribe(S.KeyMapper.ALREADY_GRANTED).then(function(){t(!0)})}).catch(function(e){var t="Error during getSubscription()";c.Helper.displayLog(t,e),o(t)})})})}).catch(function(e){c.Helper.displayLog(e)})},H.subscribe=function(i){return n(this,void 0,void 0,function(){return r(this,function(e){y.Config.notification.subscriptionObj={userVisibleOnly:!0,applicationServerKey:c.Helper.urlB64ToUint8Array(y.Config.notification.vapidKey)};try{return[2,new Promise(function(o,e){c.Helper.displayLog("Subscription initiated..."),navigator.serviceWorker.ready.then(function(t){t.pushManager.subscribe(y.Config.notification.subscriptionObj).then(function(e){c.Helper.displayLog("Subscrption : ",JSON.stringify(e)),H.sendEvent(i,JSON.stringify(e)),o(!0)}).catch(function(e){c.Helper.displayLog("Unable to subscribe due to error : ",e),null!=e.message&&(-1<e.message.indexOf("push service error")||-1<e.message.indexOf("User denied permission to use the Push API"))?(c.Helper.displayLog("Browser does not have complete support of vapid"),H.sendEvent(S.KeyMapper.BROWSER_UNSUPPORTED),o(!0)):t.unregister().then(function(){H.registerServiceWorker(y.Config.notification.serviceWorkerPath).then(function(){c.Helper.displayLog("Re-subscribing..."),y.Config.store.isSubscriptionLost=!0,H.subscribe(i).then(function(){o(!0)})})})})})})]}catch(e){c.Helper.displayLog(e)}return[2]})})},H.unsubscribeNotification=function(){c.Helper.displayLog("Notification unsubscribe is initiated..."),navigator.serviceWorker.ready.then(function(e){e.pushManager.getSubscription().then(function(e){e&&e.unsubscribe().then(function(e){c.Helper.displayLog("Unsubscribed : ",e)}).catch(function(e){c.Helper.displayLog("Unsubscription failed : ",e)})}).catch(function(e){c.Helper.displayLog("Get subscription failed : ",e)})}).catch(function(e){})},H.closePopupWindow=function(){if(self==top&&y.Config.notification.windowType)try{setTimeout(function(){var e={};e[S.KeyMapper.POPUP_CLOSED]=1;var t={};t[S.KeyMapper.MESSAGE]=e,null!==(e=window.opener)&&void 0!==e&&e.postMessage(JSON.stringify(t),"*"),window.close()},1e3)}catch(e){c.Helper.displayLog(e)}},H.removeSubsriptionFromAlternateDomain=function(){var e,t=p.Storage.getConfigLocal(S.KeyMapper.ALT_DOMAIN_STATUS);if(""!=t)try{t=JSON.parse(t),H.alternateDomainJson=t}catch(e){t=""}"object"==typeof y.Config.notification.sourceOriginAlt&&1<y.Config.notification.sourceOriginAlt.length?(e=y.Config.notification.sourceOriginAlt.length,H.alternateDomainPermissionHandler(0,e-1,H.alternateDomainJson)):(e="object"==typeof y.Config.notification.sourceOriginAlt?y.Config.notification.sourceOriginAlt[0]:y.Config.notification.sourceOriginAlt,3==(e=H.getAlternateDomainConfig(H.alternateDomainJson,H.permissionDomain=e))||2==e||(c.Helper.addMsgReciever(H.msgReciever),"https:"==y.Config.global.locationProtocol?c.Helper.addIFrame(H.permissionDomain+"?action=izrmsubs&izHardUnsub=1","izAltSubFrame"):c.Helper.addIFrame(H.permissionDomain+"?action=izrmsubs","izAltSubFrame")))},H.removeSubscriptionReceiver=function(e){3==e&&(H.setAlternateDomainConfig(H.alternateDomainJson,H.permissionDomain,e),"object"==typeof y.Config.notification.sourceOriginAlt&&H.alternateDomainIndex<y.Config.notification.sourceOriginAlt.length&&H.alternateDomainPermissionHandler(H.sourceOriginIndex,y.Config.notification.sourceOriginAlt.length-1,H.alternateDomainJson))},H.alternateDomainPermissionHandler=function(e,t,o){for(var i=e;i<=t;i++){H.permissionDomain=y.Config.notification.sourceOriginAlt[i];var n=H.getAlternateDomainConfig(o,H.permissionDomain);if(H.sourceOriginIndex=i+1,3!=n&&2!=n){c.Helper.addMsgReciever(H.msgReciever),"https:"==y.Config.global.locationProtocol?c.Helper.addIFrame(H.permissionDomain+"?action=izrmsubs&izHardUnsub=1","izAltSubFrame"+i):c.Helper.addIFrame(H.permissionDomain+"?action=izrmsubs","izAltSubFrame"+i);break}if(i==t)return}},H.getAlternateDomainConfig=function(e,t){return null!=e[t]?e[t]:""},H.setAlternateDomainConfig=function(e,t,o){e=""!=e?e:{};e[t]=o,H.alternateDomainJson=e,e=JSON.stringify(e),p.Storage.setConfigLocal(S.KeyMapper.ALT_DOMAIN_STATUS,e)},H.removeSubscriptionInFrame=function(){var e="rmSubToParent",t={izrmstatus:3},o=document.location.href,o=c.Helper.getParamFromUrl(o,"izHardUnsub");try{var i,n=p.Storage.getStorage(S.KeyMapper.PUSH_TOKEN);1==o?(H.unsubscribeNotification(),c.Helper.postMessage("parent",e,t)):""!=n?(i=c.Helper.getCurrentUUID(),H.sendSubscriptionUpdate(i,2,function(){c.Helper.postMessage("parent",e,t)})):c.Helper.postMessage("parent",e,t)}catch(e){}},H.syncLastVisit=function(){var e=c.Helper.getLanguage(),t=c.Helper.getMetaValue("keywords"),o={last_website_visit:!0};""!=e&&(o.lang=e),""!=t&&(o.keywords=t);var i=new Date,e=p.Storage.getConfigLocal("lastVisit",S.KeyMapper.SYNC),t=!1;e&&(t=new Date(e).getDate()),H.syncAllSubscribersVisit(),""!=p.Storage.getStorage(S.KeyMapper.PUSH_TOKEN)&&i.getDate()!==t?(i=p.Storage.getStorage(S.KeyMapper.PUSH_TOKEN),i=c.Helper.isJSONString(i)?c.Helper.parseToJSON(i):i,t="pid="+y.Config.client,t+=H.getSubscriptionParameters(i),t+="&et=userp&act=add",t+="&val="+JSON.stringify(o),d.HttpRequest.post(c.Helper.getEndpoint("last_visit"),{data:t},function(){p.Storage.updateLastSync("lastVisit")})):c.Helper.displayLog("Sync last Visit Blocked")},H.syncAllSubscribersVisit=function(){var e,t,o,i,n;1==y.Config.notification.syncVisitType&&(e=c.Helper.getEndpoint("syncAllSubscribersVisit"),t=c.Helper.getLanguage(),o=c.Helper.getMetaValue("keywords"),i=encodeURIComponent([window.location.protocol,"//",window.location.host,window.location.pathname].join("")),n="pid="+y.Config.client,n+="&bkey="+c.Helper.getCurrentUUID(),n+="&url="+i,""!=o&&(n+="&keywords="+o),""!=t&&(n+="&lang="+t),d.HttpRequest.post(e,{data:n},function(){}))},H.applyBrowserPatch=function(){1==y.Config.global.browserType&&0==y.Config.notification.promptType&&(61<parseInt(y.Config.global.browserVer)||60<parseInt(y.Config.global.browserVer)&&1!=y.Config.global.deviceType)&&(!y.Config.notification.isSdkHttps||y.Config.notification.isSdkHttps&&"http:"==y.Config.global.locationProtocol)&&(y.Config.notification.promptType=1,y.Config.notification.optInDesignType||(y.Config.notification.optInDesignType=1)),2==y.Config.global.browserType&&0==y.Config.notification.promptType&&12.1<=parseFloat(y.Config.global.browserVer)&&(y.Config.notification.promptType=1,y.Config.notification.optInDesignType||(y.Config.notification.optInDesignType=1)),3==y.Config.global.browserType&&0==y.Config.notification.promptType&&72<=y.Config.global.browserMajorVersion&&(y.Config.notification.promptType=1,y.Config.notification.optInDesignType||(y.Config.notification.optInDesignType=1))},H.isSupported=function(){return n(this,void 0,void 0,function(){var t;return r(this,function(e){switch(e.label){case 0:return(t=y.Config.global.browserName)==S.KeyMapper.BROWSER_FIREFOX&&"http:"==y.Config.global.locationProtocol?[2,!1]:[4,H.isIncognitoMode()];case 1:if(e.sent())return y.Config.global.isIncoginito=!0,c.Helper.displayLog("Incognito mode detected!"),[2,!1];if(H.checkVersionSuppport())if(t==S.KeyMapper.BROWSER_CHROME||t==S.KeyMapper.BROWSER_OPERA||t==S.KeyMapper.BROWSER_UCB||t==S.KeyMapper.BROWSER_FIREFOX||t==S.KeyMapper.BROWSER_EDGE){if("https:"!=y.Config.global.locationProtocol||!(y.Config.notification.isSdkHttps||1==y.Config.notification.windowType&&0==y.Config.notification.isSdkHttps))return[2,!0];if("Notification"in window&&"serviceWorker"in navigator)return[2,!0]}else if(t==S.KeyMapper.BROWSER_SAFARI&&"safari"in window&&"pushNotification"in window.safari)return[2,!0];return[2,!1]}})})},H.checkVersionSuppport=function(){var e=y.Config.global.browserName,t=y.Config.global.browserMajorVersion,o=y.Config.global.deviceType;switch(e){case S.KeyMapper.BROWSER_CHROME:if(42<=t)return!0;break;case S.KeyMapper.BROWSER_SAFARI:if(7<=t&&1==o)return!0;break;case S.KeyMapper.BROWSER_FIREFOX:if(48<=t&&1!=o)return!0;if(44<=t)return!0;break;case S.KeyMapper.BROWSER_UCB:case S.KeyMapper.BROWSER_OPERA:case S.KeyMapper.BROWSER_EDGE:return!0;default:c.Helper.displayLog("Browser not supported for Notification!")}return!1},H.loadOptin=function(){return n(this,void 0,void 0,function(){var t,o;return r(this,function(e){return t=y.Config.notification.optInSrc,o=y.Config.notification.optInDesignType,o=t+""+o+".js?v=3",""!=y.Config.notification.optInDesign?(y.Config.notification.dialogDesign=y.Config.notification.optInDesign,H.showOptin()):null!=window.izOptinDesign&&""!=window.izOptinDesign?(y.Config.notification.dialogDesign=window.izOptinDesign,H.showOptin()):c.Helper.addExternalJS(o,"izOptin",!0),[2]})})},H.showOptin=function(){var e;if(null!=window.izOptinDesign&&(y.Config.notification.dialogDesign=window.izOptinDesign),y.Config.notification.dialogDesign=H.loadDesign(y.Config.notification.promptDesign,y.Config.notification.dialogDesign),y.Config.notification.dialogDesign=H.dynamicBrandingPartnerHandler(y.Config.notification.dialogDesign),c.Helper.addHTML("div",y.Config.notification.dialogDesign,"izmiddle-box"))try{y.Config.brandingPartner!=y.Config.defaultBrandingPartner&&null!==(e=window.document.querySelector("#izmiddle-box a"))&&void 0!==e&&e.setAttribute("onclick","return false;")}catch(e){}c.Helper.izootoBrandingHandler(),H.sendEvent(S.KeyMapper.OPTIN_SHOWN)},H.dynamicBrandingPartnerHandler=function(e){return e=y.Config.brandingPartner!=y.Config.defaultBrandingPartner?y.Config.notification.dialogDesign.replace("iZooto",y.Config.brandingPartner):e},H.loadDesign=function(e,t){try{if("object"!=typeof e)return"";for(var o in e){var i;e.hasOwnProperty(o)&&(i=new RegExp("{{--"+o+"--}}","g"),t=t.replace(i,e[o]))}}catch(e){}return t},H.getPermissionStatusFromFrame=function(){return new Promise(function(t,e){c.Helper.addMsgReciever(function(e){e=c.Helper.parseToJSON(e.data);!e.hasOwnProperty(S.KeyMapper.MESSAGE)||(e=e[S.KeyMapper.MESSAGE]).hasOwnProperty("izPermsStatus")&&null!=e.izPermsStatus&&t(e.izPermsStatus)},!0);var o=y.Config.notification.sourceOrigin+"?action=izcheckperms";c.Helper.addIFrame(o,"izPermsFrame")})},H.getSubDomainPermissionStatus=function(){return new Promise(function(t,e){var o=p.Storage.getStorage(S.KeyMapper.PUSH_TOKEN),i=p.Storage.getStorage(S.KeyMapper.PERMISSION_STATUS),n=H.getPermissionStatusFromStorage();0!=n||2==i?t(n):"https:"==y.Config.global.locationProtocol?H.getPermissionStatusFromFrame().then(function(e){H.updatePermissionStatus(e=1==e&&""!=o?0:e),t(e)}):""!=o?H.tokenValidator(function(e){H.updatePermissionStatus(e),t(e)}):t(n)}).catch(function(e){c.Helper.displayLog(e)})},H.setRepeatPromptDelay=function(e){var t;0!==e&&(t=(t=new Date).setTime(t.getTime()+60*e*1e3),p.Storage.setConfigLocal(S.KeyMapper.REPEAT_PROMPT_DELAY,t))},H.setActivePrompt=function(e){var t;("https:"===y.Config.global.locationProtocol&&0==y.Config.notification.windowType||"http:"===y.Config.global.locationProtocol)&&(window.addEventListener("beforeunload",function(){p.Storage.removeStorage(S.KeyMapper.ACTIVE_PROMPT)}),t=(t=new Date).setTime(t.getTime()+60*e*1e3),p.Storage.setStorage(S.KeyMapper.ACTIVE_PROMPT,t))},H.isActivePrompt=function(){var e=new Date;return p.Storage.getStorage(S.KeyMapper.ACTIVE_PROMPT)>e.getTime()},H.updatePermissionStatus=function(e){e===S.KeyMapper.PROMPT_ALLOWED||e===S.KeyMapper.ALREADY_GRANTED||1===e?p.Storage.setConfigLocal(S.KeyMapper.PERMISSION_STATUS,1):e===S.KeyMapper.PROMPT_DENIED||e===S.KeyMapper.ALREADY_DENIED||2==e?p.Storage.setConfigLocal(S.KeyMapper.PERMISSION_STATUS,2):p.Storage.setConfigLocal(S.KeyMapper.PERMISSION_STATUS,0),p.Storage.updateLastSync(S.KeyMapper.PERMISSION_STATUS)},H.sendPermissionStatusFromFrame=function(){var e=0;"Notification"in window&&"granted"==window.Notification.permission&&(e=1),c.Helper.postMessage("parent","izPermsStatus",e)},H.updateSubscriptionProcessor=function(e,t){var o=c.Helper.getCurrentUUID(),i=p.Storage.getConfigLocal(S.KeyMapper.PERMISSION_STATUS);t=p.Storage.getStorage(S.KeyMapper.PUSH_TOKEN);t=H.getSubscriptionKey(t);"subscribe"==e?y.Config.store.isSoftSubscribeTriggered||(""!=t&&""!=o&&H.sendSubscriptionUpdate(o,0,function(){c.Helper.displayLog("Re-Subscribing")}),y.Config.store.isSoftSubscribeTriggered=!0,3==i&&p.Storage.removeConfigLocal(S.KeyMapper.PERMISSION_STATUS),H.triggerPromptHandler()):"unsubscribe"==e&&""!=t&&""!=o&&H.sendSubscriptionUpdate(o,2,function(){p.Storage.setConfigLocal(S.KeyMapper.PERMISSION_STATUS,3),H.sendEvent(S.KeyMapper.UNSUBSCRIBED)})},H.sendSubscriptionUpdate=function(e,t,o){var i=0==t?c.Helper.getEndpoint("SoftSubscribe"):2==t?c.Helper.getEndpoint("SoftUnsubscribe"):c.Helper.getEndpoint("supUrl"),n=H.getDeviceParameters();d.HttpRequest.post(i,{data:n=n+"&bKey="+e+"&action="+t},o)},H.scrollHandler=function(e){var t=window.screen.availHeight,o=window.scrollY;1!=y.Config.notification.isTriggeredOnScoll&&(t<=o||document.documentElement.scrollTop>=t)&&(y.Config.notification.isTriggeredOnScoll=1,e())},H.brandingOverlayHandler=function(){1==y.Config.notification.overlay?H.openHttpsOverlay():1==y.Config.branding&&H.openHttpsBranding()},H.openHttpsBranding=function(){var e;if(!(0<y.Config.notification.windowType)&&0!=y.Config.branding){if(1!=c.Helper.getDeviceType())try{window.addEventListener("scroll",H.brandingScroll)}catch(e){}if(c.Helper.addHTML("div",y.Config.notification.httpsBranding,"izooto-branding"))try{y.Config.brandingPartner!=y.Config.defaultBrandingPartner&&null!==(e=window.document.querySelector("#izooto-branding a"))&&void 0!==e&&e.setAttribute("onclick","return false;")}catch(e){}c.Helper.izootoBrandingHandler()}},H.openHttpsOverlay=function(){var e;if(!(0<y.Config.notification.windowType)&&0!=y.Config.notification.overlay){if(1!=c.Helper.getDeviceType())try{window.addEventListener("scroll",H.brandingScroll)}catch(e){}if((y.Config.global.browserName=S.KeyMapper.BROWSER_CHROME)&&62<parseInt(c.Helper.getBrowserVersion())&&3==c.Helper.getDeviceType()&&(y.Config.notification.httpsOverlay=""),c.Helper.addHTML("div",y.Config.notification.httpsOverlay,"izooto-branding"))try{y.Config.brandingPartner!=y.Config.defaultBrandingPartner&&null!==(e=window.document.querySelector("#izooto-branding a"))&&void 0!==e&&e.setAttribute("onclick","return false;")}catch(e){}c.Helper.izootoBrandingHandler()}},H.brandingScroll=function(){null!=document.getElementById("izooto-branding")&&(30<window.pageYOffset||30<document.body.scrollTop)&&H.closeHttpsOverlay()},H.closeHttpsOverlay=function(){var e;if(!(0<y.Config.notification.windowType)){try{null!==(e=document.getElementById("izooto-branding"))&&void 0!==e&&e.remove()}catch(e){c.Helper.displayLog("Error-Removing-Div"+e)}if(1!=c.Helper.getDeviceType())try{window.removeEventListener("scroll",H.brandingScroll)}catch(e){}}},H.popupNotice=function(e){try{document.getElementById("dynamic_iz").innerHTML="<center>"+e+"</center>"}catch(e){}},H.setManifest=function(){try{if(1!=y.Config.global.browserType||0!=y.Config.notification.subscriptionType)return;var e=document.getElementsByTagName("head")[0],t=document.createElement("link");t.rel="manifest",t.href=y.Config.notification.manifest,e.appendChild(t)}catch(e){}},H.tokenValidator=function(i,e){null==e&&(e=c.Helper.getCurrentUUID());e=c.Helper.getEndpoint("subscriptionValidator")+"?s=1&bkey="+e+"&pid="+y.Config.client;d.HttpRequest.get(e,function(e,t){var o=1;200==t&&(e=c.Helper.parseToJSON(e),null!=i&&(e.hasOwnProperty("status")&&0==e.status&&(o=0),i(o)))})},H.checkAlternates=function(){"object"==typeof window._izAlternate?(null!=window._izAlternate.initAlt&&"function"==typeof window._izAlternate.initAlt&&window._izAlternate.initAlt(),Object.keys(window._izAlternate).map(function(o,e){Object.keys(window._izooto).map(function(e,t){e===o&&(window._izooto[e]=window._izAlternate[o])})})):c.Helper.displayLog("No alternate implementations found")},H.subcriptionToObject=function(e){return e="string"==typeof e&&c.Helper.isJSONString(e)?c.Helper.parseToJSON(e):e},H.isCurrentTokenExpired=function(e,t){var o=p.Storage.getConfigLocal(t,S.KeyMapper.SYNC),t=new Date;return!(t.getTime()<t.setTime(o+1e3*e))},H.isPermissionStatusExpired=function(e){return 1==e&&H.isCurrentTokenExpired(y.Config.notification.tokenExpire,S.KeyMapper.PERMISSION_STATUS)},H.getPermissionStatusFromStorage=function(){var e=0,t=p.Storage.getConfigLocal(S.KeyMapper.PERMISSION_STATUS);return e=""!=t&&!this.isPermissionStatusExpired(t)?t:e},H.isHttpsSitePermissionAlreadyGranted=function(){return new Promise(function(e,t){y.Config.notification.isSdkHttps&&y.Config.notification.isSupported&&"granted"==window.Notification.permission&&2!=y.Config.global.browserType?e(!0):e(!1)})},H.getWindowType=function(){var e=window.location.href.toLocaleLowerCase(),t="";return-1!==(t=e.substr(e.lastIndexOf("?")+1)).indexOf("action=prompt")?1:-1!==t.indexOf("action=izrmsubs")?2:-1!==t.indexOf("action=izcheckmaster")?3:"action=izcheckperms"==t?4:-1!==t.indexOf("action=izvalidator&izobj=")?5:-1!==t.indexOf("action=noroot")?6:0},H.syncPIDset=function(){p.Storage.getConfigLocal("pidList",S.KeyMapper.SYNC)||H.setCookieGlobalID().then(function(){var e=document.getElementById(S.KeyMapper.IZCIDDOM);p.Storage.updateLastSync("pidList"),c.Helper.postMessage(e,"setAllowedList",y.Config.client)})},H.msgReciever=function(e){var t,e=c.Helper.parseToJSON(e.data);e.hasOwnProperty(S.KeyMapper.MESSAGE)&&(e=e[S.KeyMapper.MESSAGE],c.Helper.displayLog("Received event : ",e),"izCidToParent"==(null==e?void 0:e.k)?(H.setIzcidDb(e.v),p.Storage.setConfigLocal(S.KeyMapper.IZCID,e.v),p.Storage.updateLastSync("IZCID")):"izCidWithPidList"==(null==e?void 0:e.k)?"object"!=typeof e.v||(t=e.v).hasOwnProperty("pidList")&&t.pidList&&p.Storage.setConfigLocal("pidList",t.pidList):e.hasOwnProperty("rmSubToParent")&&void 0!==e.rmSubToParent?H.removeSubscriptionReceiver(e.rmSubToParent.izrmstatus):e.hasOwnProperty(S.KeyMapper.MASTER_TO_CHILD)&&void 0!==e[S.KeyMapper.MASTER_TO_CHILD]?v.MasterDomain.masterConfigReciver(e[S.KeyMapper.MASTER_TO_CHILD]):e.hasOwnProperty(S.KeyMapper.CHILD_TO_MASTER)&&void 0!==e[S.KeyMapper.CHILD_TO_MASTER]?v.MasterDomain.setMasterStorage(e[S.KeyMapper.CHILD_TO_MASTER]):e.hasOwnProperty("izPermsStatus")?(p.Storage.setConfigLocal(S.KeyMapper.PERMISSION_STATUS,e.izPermsStatus),p.Storage.updateLastSync(S.KeyMapper.PERMISSION_STATUS)):e.hasOwnProperty("syncWelcomeSent")?H.showWelcomeNotification(!0):e.hasOwnProperty("sendLocalNotification")?H.sendLocalNotification(e.sendLocalNotification):0<(t=Object.keys(e)).length&&(e.hasOwnProperty("serviceWorkerVersion")&&null!=e.serviceWorkerVersion&&(y.Config.notification.serviceWorkerVersion=e.serviceWorkerVersion),H.sendEvent(t[0],e[t[0]])))},H.syncHookInDb=function(t){var o;"syncNotificationClick"!=t&&"syncNotificationView"!=t||(null!=y.Config.notification.syncNotificationClick||null!=y.Config.notification.syncNotificationView?(o=y.Config.notification[t],s.IndexedDB.getIndexDBData("options",t).then(function(e){(e&&e.hasOwnProperty("val")?e.val:"")!=o&&s.IndexedDB.addUpdate(t,o).then(function(e){}).catch(function(e){c.Helper.displayLog(e)})}).catch(function(e){c.Helper.displayLog(e)})):c.Helper.displayLog("Invalid Hook Request"))},H.syncNotificationSent=function(e){var t="pid="+y.Config.client+"&bkey="+c.Helper.getCurrentUUID()+"&btype="+y.Config.global.browserType+"&dtype="+y.Config.global.deviceType+"&rid="+e.rid,e=c.Helper.getEndpoint("notificationSent");d.HttpRequest.post(e,{data:t},function(){y.Config.brandingPartner})},H.syncNotificationView=function(e){var t={pid:y.Config.client,bkey:c.Helper.getCurrentUUID(),cid:e.id,rid:e.rid,op:"view",pl:1};1==e.viewFlag&&(e=c.Helper.getEndpoint("syncNotificationView"),d.HttpRequest.post(e,{data:Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")},function(){}))},H.showWelcomeNotification=function(e){try{var t=y.Config.welcomePlaybook,o=t.data;return 0==t.status?void 0:(o.viewFlag=1,o.clickFlag=1,o.sysEvents=0,o.domainNum=0,H.getPayloadVerification(o)?e?(H.syncNotificationSent(o),void H.syncNotificationView(o)):H.sendLocalNotification(o).then(function(){return y.Config.notification.isSdkHttps&&!y.Config.notification.httpsNoRoot&&(H.syncNotificationSent(o),H.syncNotificationView(o)),!0}):void c.Helper.displayLog("Welcome playbook : "+S.KeyMapper.INVALID_PAYLOAD))}catch(e){}},H.getPayloadVerification=function(e){return!!(e.title&&e.message&&e.icon&&e.rid&&e.key&&e.id)},H.alternateDomainJson="",H.alternateDomainIndex=0,H.permissionDomain="",H.isSyncPermissionStatus=!0,H.syncableEvents=[,S.KeyMapper.PROMPTED,S.KeyMapper.OPTIN_SHOWN,S.KeyMapper.OPTIN_ALLOWED,S.KeyMapper.OPTIN_CLOSED,S.KeyMapper.ALREADY_DENIED],H);function H(){}t.NotificationHelper=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpRequest=void 0;var c=o(0),p=o(1),o=(d.create=function(e,t,o,i,n,r,a){var s="",l=new XMLHttpRequest;if(l.onreadystatechange=function(){4==this.readyState&&200==this.status?"function"==typeof o&&o(this.responseText,this.status,a):4==this.readyState&&200!=this.status&&o(this.responseText,this.status,a)},l.open(t,e,!0),"POST"==t&&(l.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),"object"==typeof i&&0<Object.keys(i).length&&null!=i.data&&""!=i.data&&(s=i.data)),"object"==typeof n&&0<Object.keys(n).length)for(var c in n)l.setRequestHeader(c,n[c]);p.Helper.displayLog(e),""!=s?l.send(s):l.send()},d.get=function(e,t,o,i){""!=o&&null!=o&&null!=o.data&&""!=o.data&&0!=c.Config.notification.processPriority&&(o.data=o.data+"&pp="+c.Config.notification.processPriority),d.create(e,"GET",t,o,i)},d.post=function(i,n,r,a,e,t){var s=e||10;""!=n&&null!=n&&null!=n.data&&""!=n.data&&0!=c.Config.notification.processPriority&&(n.data=n.data+"&pp="+c.Config.notification.processPriority);function l(e,t,o){r(e,t,o),200!=t&&0<s&&setTimeout(function(){d.create(i,"POST",l,n,a,s,o),s--},2500)}d.create(i,"POST",l,n,a,void 0,t)},d);function d(){}t.HttpRequest=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleAnalytics=void 0;var a=o(0),o=(i.init=function(e){a.Config.ga.id=e[1],a.Config.ga.syncWebPush=1;e=e[2];e.subscriptionCallback&&"object"==typeof e.subscriptionCallback&&(a.Config.ga.subscriptionCallback=e.subscriptionCallback),e.promptDisplayCallback&&"object"==typeof e.promptDisplayCallback&&(a.Config.ga.promptDisplayCallback=e.promptDisplayCallback)},i.process=function(e){if(a.Config.ga.syncWebPush&&""!=a.Config.ga.id)try{window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=+new Date;var t=""!=a.Config.global.platform?a.Config.global.platform:"custom";window.ga("create",a.Config.ga.id,"auto"),window.ga("send","event","izooto",e,t,{nonInteraction:!0})}catch(e){}},i.processNewsHub=function(e,t){var o=a.Config.ga.newsHubEvents;if(""!=a.Config.ga.id&&a.Config.ga.syncNewsHub){var i={Shown:{message:"Shown to website visitor",responsecode:1},"Widget Click":{message:"User clicked on News Hub widget",responsecode:2},"Article Clicked":{message:"User clicked on an article",responsecode:3},"Clicked Share":{message:"User clicked on Share Icon inside News Hub",responsecode:4},"Shared on":{message:"User shared article on Social",responsecode:5},Scroll:{message:"User scrolled in News Hub",responsecode:6},"Widget Close":{message:"User closed News Hub",responsecode:7}};if(0==o.length||-1!=o.indexOf(i[e].responsecode))try{var n,r=null!=t?"News Hub: "+e+" "+t:"News Hub: "+e;a.Config.ga.id.startsWith("G-")?(n={event_category:"News Hub",event_label:i[e].message},window.gtag("event",r,n)):(window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=+new Date,window.ga("create",a.Config.ga.id,"auto"),window.ga("send","event","News Hub",r,i[e].message))}catch(e){}}},i.processMessanger=function(e,t){if(a.Config.ga.syncMessenger&&""!=a.Config.ga.id){var o={Impression:"Messenger opt-in shown","Repeat Impression":"Messenger opt-in shown to  users 2 or more times","Send to Messenger":"User clicked on Send to Messenger in the opt-in",Dismissed:"Messenger opt-in dismissed"};try{var i,n=null!=t?"Messenger Push: "+e+" "+t:"Messenger Push: "+e;a.Config.ga.id.startsWith("G-")?(i={event_category:"Messenger Push",event_label:o[e]},window.gtag("event",n,i)):(window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=+new Date,window.ga("create",a.Config.ga.id,"auto"),window.ga("send","event","Messenger Push",n,o[e]))}catch(e){}}},i.isCallbackAllowed=function(e,t){for(var o in e){o=e[o];if("string"==typeof o&&"all"==o.toLowerCase()||o==t)return!0}return!1},i.initUsingConfig=function(){""!=a.Config.ga.oldId&&a.Config.ga.subscriptionCallback.push(1,2)},i);function i(){}t.GoogleAnalytics=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CookieStorage=void 0;var n=o(0),r=o(1),a=o(2),o=(s.setCookie=function(e,t,o){void 0===o&&(o=n.Config.global.cookieExpiryDays);var i=new Date;i.setTime(i.getTime()+24*o*60*60*1e3);i="expires="+i.toUTCString();document.cookie=e+"="+t+";path=/;"+n.Config.global.cookieDomain+i+";"+n.Config.global.cookieSameSite},s.getCookie=function(e){try{for(var t=e+"=",o=document.cookie.split(";"),i=0;i<o.length;i++){for(var n=o[i];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return decodeURIComponent(n.substring(t.length,n.length))}}catch(e){}return""},s.setWpCookie=function(e,t){var o,i;1==window.is_wp&&("object"==typeof window._izootoModule&&window._izootoModule.hasOwnProperty("swPath")?(i={},o=s.getCookie(a.KeyMapper.WP_COOKIE),(i=(i=r.Helper.parseToJSON(o))||{})[e]=t,i=encodeURI(JSON.stringify(i)),s.setCookie(a.KeyMapper.WP_COOKIE,i)):s.setLegacyCookie(e,t))},s.removeCookie=function(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT; "+n.Config.global.cookieSameSite},s.setLegacyCookie=function(e,t){switch(e){case"bType":case"dType":var o=JSON.stringify({dtype:n.Config.global.deviceType,btype:n.Config.global.browserType});s.setCookie("bddata",o);break;case"evtTrk":s.setCookie("evtrk",n.Config.notification.evtTracking);break;case"pushToken":s.setCookie("iztoken",t)}},s);function s(){}t.CookieStorage=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Queue=void 0;var i=o(4),n=o(0),r=o(1),a=o(9),s=o(6),l=o(3),c=o(2),p=o(13),d=o(11),u=o(19),o=(g.init=function(){"[object Array]"==Object.prototype.toString.call(window._izq)?g.readSavedPreferences():window._izq=[],window._izq.push=function(e){if(null!=e[0])return g.process(e)},this.sync(!1)},g.sync=function(e){if(void 0===e&&(e=!0),r.Helper.displayLog("Syncing queue.."),!(window._izq.length<1)){for(var t=[],o=0;o<window._izq.length;o++)t.push(window._izq[o]);if(0<t.length)if(e)for(o=t.length-1;0<=o;o--)null!=t[o]&&(t[o][0],this.process(t[o]),window._izq.splice(o,1));else for(o=t.length-1;0<=o;o--)null!=t[o]&&-1==n.Config.store.subscriptionBasedEventNameList.indexOf(t[o][0])?(t[o][0],this.process(t[o]),window._izq.splice(o,1)):r.Helper.displayLog("Sync later queue item",t[o][0])}},g.process=function(e){try{if("debug"===e[0]&&1==e[1])return void a.Debugger.init();if(1==n.Config.izootoStatus){if(1==n.Config.notification.gdprPromptStatus&&0==n.Config.notification.isGdprAllowed&&this.isValidQueueForGdpr(e[0]))return void r.Helper.displayLog("Blocked due to GDPR is disallowed : ",e[0]);if(3==i.NotificationHelper.getPermissionStatusFromStorage()&&-1<n.Config.store.subscriptionBasedEventNameList.indexOf(e[0]))return void r.Helper.displayLog("Blocked due to soft unsubscribe : ",e[0]);if(!i.NotificationHelper.isSubscriptionExist()&&-1<n.Config.store.subscriptionBasedEventNameList.indexOf(e[0]))return void r.Helper.displayLog("Blocked => Subscription not found: ",e[0]);if("event"===e[0]&&void 0!==e[1]&&"string"==typeof e[1]&&""!==e[1])i.NotificationHelper.userEventProcessor(e[1],e[2]),i.NotificationHelper.syncAsTrigger(e[1],e[2]);else if("triggerPromptWithDelay"==e[0])i.NotificationHelper.triggerPromptHandler(!0);else if("triggerPrompt"==e[0])i.NotificationHelper.triggerPromptHandler();else{if("customizeOptInPrompt"===e[0]&&"object"==typeof e[1])return void i.NotificationHelper.customizeOptInPrompt(e[1]);if("syncFCMToken"===e[0])"string"==typeof e[1]&&""!=e[1]&&(n.Config.notification.subscriptionType=1,n.Config.notification.fcmToken=e[1],i.NotificationHelper.sendEvent(c.KeyMapper.PROMPT_ALLOWED,e[1]));else if("updateSubscription"===e[0])"subscribe"!=e[1]&&"unsubscribe"!=e[1]||i.NotificationHelper.updateSubscriptionProcessor(e[1]);else{if("getSubscriberId"===e[0])return n.Config.store.subscriberId||l.Storage.getStorage(c.KeyMapper.UUID);if("getSubscriptionObject"===e[0])return l.Storage.getStorage(c.KeyMapper.PUSH_TOKEN);"userProfile"===e[0]&&(void 0!==e[1]||""!==e[1])||"personalizationProperty"===e[0]?i.NotificationHelper.userProfileProcessor(e[1]):"trigger"!==e[0]||void 0===e[1]&&""===e[1]?"gaId"===e[0]&&"string"==typeof e[1]&&"object"==typeof e[2]?s.GoogleAnalytics.init(e):"registerPromptDisplayCallback"===e[0]&&"function"==typeof e[1]?this.promptDisplayCallback=e[1]:"registerSubscriptionCallback"===e[0]&&"function"==typeof e[1]?this.subscriptionCallback=e[1]:"register_callback"===e[0]&&"function"==typeof e[1]?this.userCallback=e[1]:"getNotificationFeed"===e[0]&&"function"==typeof e[1]&&u.NotificationFeed.init(e[1]):i.NotificationHelper.triggerProcessor(e[1],e[2],e[3])}}n.Config.notification.isTagsEnabled&&("add_tag"===e[0]||"remove_tag"===e[0]?console.warn(n.Config.brandingPartner+" :: Tags are no longer supported. See https://help.izooto.com/article/segementation/ "):"add_property"===e[0]&&void 0!==e[1]&&""!==e[1]&&i.NotificationHelper.addPropertyProcessorFallback(e[1]))}else r.Helper.displayLog("Sync action aborted! due to notification module disable");if("triggerMessengerPrompt"===e[0])return n.Config.messenger.autoPrompt=!0,void p.Messenger.init(!0);"triggerNewsHub"===e[0]&&(d.NewsHub.isNewsContainerLoaded?d.NewsHub.toggleNewsHubDisplay(!0):(n.Config.newsHub.triggered=!0,d.NewsHub.init()))}catch(e){r.Helper.displayLog("Queue error :",e)}},g.readSavedPreferences=function(){window._izq,window._izq.forEach(function(e){"subscriberProfile"==e[0]&&null!=e[1]&&"object"==typeof e[1]&&e[1].hasOwnProperty("isPaid")&&(n.Config.CRPSPlaybook.isPaidSubscriber=e[1].isPaid,r.Helper.displayLog("Paid subscriber is set to : ",e[1].isPaid)),"init"==e[0]&&null!=e[1]&&"object"==typeof e[1]?((e[1].hasOwnProperty("auto_prompt")||e[1].hasOwnProperty("notificationAutoPrompt")||e[1].hasOwnProperty("autoPrompt"))&&(n.Config.notification.autoPrompt=null!=e[1].auto_prompt?e[1].auto_prompt:null!=e[1].autoPrompt?e[1].autoPrompt:e[1].notificationAutoPrompt,r.Helper.displayLog("Notification auto prompt set to : ",e[1].auto_prompt),0==n.Config.notification.autoPrompt&&(n.Config.notification.promptType=2)),e[1].hasOwnProperty("messengerAutoPrompt")&&(n.Config.messenger.autoPrompt=e[1].messengerAutoPrompt,r.Helper.displayLog("Messenger auto prompt set to : ",e[1].messengerAutoPrompt)),e[1].hasOwnProperty("showNewsHubWidget")&&(n.Config.newsHub.autoWidget=e[1].showNewsHubWidget,r.Helper.displayLog("Newshub auto widget set to : ",e[1].showNewsHubWidget))):"epSyncState"==e[0]&&1==e[1]&&(r.Helper.displayLog("Custom subscription found! waiting for for FCM Token sync command!"),n.Config.store.isNotificationDisabledManually=!0,g.sync())})},g.isValidQueueForGdpr=function(e){return-1<n.Config.notification.gdprNotAllowed.indexOf(e)},g);function g(){}t.Queue=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Debugger=void 0;var s=o(0),l=o(1),n=o(5),o=(c.init=function(e){c.msg=c.getMsgSet(),s.Config.debugger.err=0,console.clear(),c.log(c.dash.repeat(20)+(s.Config.brandingPartner+" Debug Mode")+c.dash.repeat(20)),s.Config.debugger.status=1,c.log("Verifying "+s.Config.brandingPartner+" integration on your website",s.Config.debugger.infoCode);function t(){1==s.Config.debugger.err?c.log(c.msg.integration_f,s.Config.debugger.errCode):c.log(c.msg.integration,s.Config.debugger.successCode),e&&e(c.debuggerObj)}var o=s.Config.global.platform;c.debuggerObj.plugin=o,c.debugger.rcvObj={};var i=document.location.href,i=l.Helper.getParamFromUrl(i,"izObj");(i=l.Helper.parseToJSON(i))&&null!=i.domainRoot&&(s.Config.notification.domainRoot=i.domainRoot,s.Config.notification.httpsNoRoot=""!=s.Config.notification.domainRoot?1:0,s.Config.setupPath()),i&&null!=i.cdnHost&&""!=i.cdnHost&&(s.Config.notification.cdnHost=i.cdnHost),""!=o&&c.log(c.msg.plugin.replace("{plg}",o),s.Config.debugger.successCode);o=c.getScript();null!=o?(c.debuggerObj.scriptSrc=o,c.log(c.msg.code_t+c.msg.code_f+"("+o+")",s.Config.debugger.successCode),1==s.Config.notification.isSdkHttps?c.validateSw(function(){t()}):t()):(s.Config.debugger.err=1,c.log(c.msg.code_t+c.msg.code_nf,s.Config.debugger.errCode),t())},c.log=function(e,t){t=t||"",console.info("%c"+e,t)},c.getMsgSet=function(){var e=s.Config.brandingPartner,t="support@"+e.toLowerCase()+".com";return{code_t:e+" JS code: ",code_f:"found",code_nf:"missing. Learn more here: http://bit.ly/2WHcP4a",sw_t:"Service Worker JS: ",sw_f:"found at {sw}",sw_nf:"missing from {sw} , Learn more here: http://bit.ly/2K0yGSs",sw_ct:"Service Worker JS: Invalid Content-Type found ",html_f:e+" Html: found",html_nf:e+" Html: not found ",html_ct:e+" Html: Invalid Content-Type found ",mfst_t:"Manifest file: ",mfst_f:"found at {m}",mfst_nf:"missing form {m} , Learn more here: http://bit.ly/2K0yGSs",multi_mfst:"multiple manifest files found. Learn more here: http://bit.ly/2WCd2FC",gcm_t:"gcm_sender_id: ",gcm_nf:"missing in the manifest file. Learn more here: http://bit.ly/2WCd2FC",fallback:"FCM project: issue with your FCM project.",integration:e+" integration is working fine on your website.",integration_f:e+" integration is incomplete. Contact "+t+" to get assistance.",plugin:"You have integrated "+e+" using the {plg} plugin.",ev:"sent to "+e}},c.requestFile=function(e,o,i){var n=new XMLHttpRequest,t=Math.random();e+=e.includes("?")?"&":"?",e+=t,n.onreadystatechange=function(){var e,t;4==this.readyState&&(e=n.responseText,t="",n.getResponseHeader("Content-Type")?t=n.getResponseHeader("Content-Type"):n.getResponseHeader("content-type")&&(t=n.getResponseHeader("content-type")),200==this.status?o(this.status,e,t):i(this.status,e))},n.open("GET",e,!0),n.send()},c.getFileInfo=function(e,i){var n={};c.requestFile(e,function(e,t,o){n.status=!0,n.contentType=o,n.body=t,i(n)},function(e,t){n.status=!1,i(n)})},c.contentTypeValidator=function(e,t){var o=!0;return t=t.toLowerCase(),1==e?t.indexOf("application")<0&&t.indexOf("javascript")<0&&(o=!1):2==e&&t.indexOf("html")<0&&(o=!1),o},c.validateIzootoHtml=function(t){c.debuggerObj.plugin&&t();var o=this.getMsgSet();s.Config.debugger.host;c.getFileInfo(s.Config.notification.sourceOrigin,function(e){1==(c.debuggerObj.izootoHtml=e).status?(c.log(o.html_f,s.Config.debugger.successCode),c.contentTypeValidator(2,e.contentType)||(c.log(o.html_ct+e.contentType,s.Config.debugger.errCode),s.Config.debugger.err=1)):(c.log(o.html_nf,s.Config.debugger.errCode),s.Config.debugger.err=1),t()})},c.validateSw=function(t){var o=this.getMsgSet(),i=s.Config.debugger.host;c.getFileInfo(s.Config.notification.serviceWorkerPath,function(e){if(1==(c.debuggerObj.sw=e).status){if(c.log(o.sw_t+o.sw_f.replace("{sw}",i+s.Config.notification.serviceWorkerPath),s.Config.debugger.successCode),!c.contentTypeValidator(1,e.contentType))return c.log(o.sw_ct+e.contentType,s.Config.debugger.errCode),s.Config.debugger.err=1,void t();c.validateIzootoHtml(t)}else c.log(o.sw_t+o.sw_nf.replace("{sw}",i+s.Config.notification.serviceWorkerPath),s.Config.debugger.errCode),s.Config.debugger.err=1,t()})},c.validateGCM=function(e,i){var t="pid="+s.Config.client;n.HttpRequest.post(s.Config.debugger.gcmValidator,{data:t+="&gcm="+e},function(e){var t="fail",o=(e=l.Helper.parseToJSON(e)).response||"Something went wrong";"success"==e.status?(t=e.status,c.log("GCM Sender ID Validation "+t,s.Config.debugger.successCode),i(!0)):(c.log("GCM Sender ID Validation "+t+" , "+o,s.Config.debugger.errCode),i(!1))})},c.validateManifest=function(i){for(var n=c.getMsgSet(),r=s.Config.debugger.host,e=document.getElementsByTagName("link"),t=0;t<e.length;t++){var o=e[t],a=o.getAttribute("href"),o=o.getAttribute("rel");null!=o&&"manifest"==o&&a!=s.Config.notification.manifest&&(c.log(n.mfst_t+n.multi_mfst,s.Config.debugger.errCode),s.Config.debugger.err=1)}c.requestFile(s.Config.notification.manifest,function(e,t){c.log(n.mfst_t+n.mfst_f.replace("{m}",r+s.Config.notification.manifest),s.Config.debugger.successCode);try{var o=l.Helper.parseToJSON(t);if(""==(o=o.gcm_sender_id||""))return c.log(n.gcm_t+n.gcm_nf,s.Config.debugger.errCode),void i(!1);c.validateGCM(o,i)}catch(e){c.log(n.gcm_t+n.gcm_nf.replace("{m}",r+s.Config.notification.manifest),s.Config.debugger.errCode)}},function(e,t){c.log(n.mfst_t+n.mfst_nf.replace("{m}",r+s.Config.notification.manifest),s.Config.debugger.errCode),i(!1)})},c.getScript=function(){for(var e=document.getElementsByTagName("script"),t=new RegExp(s.Config.notification.cdnHost+"/scripts/[^/]*.js"),o=0;o<e.length;o++){var i=e[o];if(null!=(i=i.getAttribute("src"))&&t.test(i))return i=i.startsWith("//")?"https:"+i:i}return null},c.showMsgOverlay=function(){var e='<div class="iz-verification-overlay" style="width: 100%;position: fixed;top: 0;left:0;z-index: 9999999999;text-align: center;background: rgba(0,0,0,0.6);height: 100%;color: #fff;display: flex;justify-content: center;align-items: center;overflow-y: hidden;"><div class="inner-content" style="font-size: 2em;"><span style="line-height: 2;">Please wait while we are verifying '+s.Config.brandingPartner+" integration on your website. <br>This window will close automatically.</span></div></div>";l.Helper.addHTML("div",e,"iz-integration-overlay")},c.verifyIzootoIntegration=function(){c.showMsgOverlay(),c.init(function(e){l.Helper.postMessage("opener","integrationObj",e)})},c.dash="-",c.debuggerObj={sw:{},izootoHtml:{}},c.debugger={rcvObj:{}},c);function c(){}t.Debugger=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelEventHandler=void 0;var r=o(2),a=o(11),i=o(13),o=(s.event=function(e,t){var o=[r.KeyMapper.PROMPTED,r.KeyMapper.POPUP_OPEN,r.KeyMapper.OPTIN_SHOWN,r.KeyMapper.OPTIN_ALLOWED],i=[r.KeyMapper.ALREADY_GRANTED,r.KeyMapper.ALREADY_DENIED,r.KeyMapper.PROMPT_DENIED,r.KeyMapper.BROWSER_UNSUPPORTED,r.KeyMapper.PROMPT_ALLOWED,r.KeyMapper.OPTIN_CLOSED],n=[r.KeyMapper.NEWSHUB_CLOSED,r.KeyMapper.NEWSHUB_FAILED];"webPush"==e&&(-1<i.indexOf(t)&&(s.channelStatus.webPush=1),-1<o.indexOf(t)&&(s.channelStatus.webPush=2)),"messenger"==e&&(t!=r.KeyMapper.SUBSCRIBED&&t!=r.KeyMapper.PROMPT_CLOSED||(s.channelStatus.messenger=1,a.NewsHub.showNewsHubWidget()),t==r.KeyMapper.MESSENGER_READY&&(s.channelStatus.messenger=3),t==r.KeyMapper.MESSENGER_READY_SHOW&&(s.channelStatus.messenger=2,this.handleMessengerInterval())),"newsHub"==e&&(-1<n.indexOf(t)&&(s.channelStatus.newsHub=1),t==r.KeyMapper.NEWSHUB_ANIMATIONEND&&3!=s.channelStatus.newsHub&&(s.channelStatus.newsHub=1),t==r.KeyMapper.NEWSHUB_OPEN&&(s.channelStatus.newsHub=3),t==r.KeyMapper.NEWSHUB_READY&&this.handleNewsHubInterval())},s.handleNewsHubInterval=function(){var e=setInterval(function(){s.channelStatus.messenger,1==s.channelStatus.webPush&&3==s.channelStatus.messenger||1!=s.channelStatus.messenger&&0!=s.channelStatus.messenger&&2!=s.channelStatus.webPush&&0!=s.channelStatus.webPush||(clearInterval(e),s.channelStatus.newsHub=2,a.NewsHub.showNewsHubWidget())},200)},s.handleMessengerInterval=function(){var e=setInterval(function(){2==s.channelStatus.webPush||2<=s.channelStatus.newsHub||1==s.channelStatus.webPush&&(s.channelStatus.messenger=2,a.NewsHub.hideNewsHubWidget(),i.Messenger.showMessenger(),clearInterval(e))},200)},s.channelStatus={webPush:0,messenger:0,newsHub:0},s);function s(){}t.ChannelEventHandler=o},function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(o,t){function i(e){try{r(l.next(e))}catch(e){t(e)}}function n(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?o(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}r((l=l.apply(e,a||[])).next())})},r=this&&this.__generator||function(o,i){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(o,s)}catch(e){t=[6,e],r=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.NewsHub=void 0;var l=o(0),c=o(1),a=o(5),s=o(2),p=o(10),d=o(6),i=o(14),u=o(17),g=o(18),o=(Object.defineProperty(f,"isCrios",{get:function(){return 5==l.Config.global.browserType},enumerable:!1,configurable:!0}),f.init=function(){return n(this,void 0,void 0,function(){var t=this;return r(this,function(e){if(l.Config.newsHub.status){if(!l.Config.newsHub.autoWidget&&!l.Config.newsHub.triggered)return[2];c.Helper.setUUID(),c.Helper.displayLog("New Hub initiated..."),f.render().then(function(e){l.Config.newsHub.autoWidget||f.toggleNewsHubDisplay(!0),t.nhFeed=new u.FeedHelper(e),t.nhFeed.setup(),f.minimumNotificationToShow=e,f.showLoader(e)})}return[2]})})},f.showNotificationContent=function(){return n(this,void 0,void 0,function(){var t,o;return r(this,function(e){switch(e.label){case 0:return(e.trys.push([0,2,,3]),f.isNewsLoading)?[2]:(f.isNewsLoading=!0,f.showLoader(),[4,f.nhFeed.getNotifications()]);case 1:return(t=e.sent(),f.isNewsLoading=!1,o=t.data,(t=t.status)!=f.nhFeed.status.ALREADY_IN_PROGRESS&&f.hideLoader(),t==f.nhFeed.status.NO_MORE_NOTIFICATIONS&&f.showFooterMessage(),document.querySelector(this.elmSelector.notificationWrapperId)||this.isNewsContainerLoaded)?(o.forEach(function(e,t){e.payload.r,e.payload.id,e.payload.ct,new Date(parseInt(e.payload.ct));e=f.payloadParser(e);e&&f.appendNews(e)}),[3,3]):(c.Helper.displayLog("News container not loaded!"),[2]);case 2:return o=e.sent(),c.Helper.displayLog("add news handler error:",o),[3,3];case 3:return[2]}})})},f.payloadParser=function(e){if(e&&e.hasOwnProperty("payload"))try{var t=e.key,o=e.clickedAt;e=e.payload;var i=c.Helper.getTimeAgoStringByTimestamp(parseInt(e.ct)),n=e.ln,n=c.Helper.replaceQueryParam(n,"utm_source","izooto");return n=c.Helper.replaceQueryParam(n,"utm_content","article_click"),{id:t,title:e.t,url:c.Helper.replaceQueryParam(n,"utm_medium","news_hub"),bannerImage:e.bi||e.i,createdAt:i,createdAtTimeStamp:e.ct,clickedAt:o,cid:e.id}}catch(e){c.Helper.displayLog("Payload parser error:",e)}},f.appendNews=function(o){var e,t,i,n=this,r=f.nhPrefix+"notification-"+o.id,a=f.noticationHtmlElement.cloneNode(!0),r="#"+(a.id=r);for(t in o)!function(t){try{var i=a.querySelector(f.notificationPrefix+t);"bannerImage"==t?(i.style.display="none",i.src=o[t],i.onerror=function(e){try{document.querySelector(r+" img").style.display="none",document.querySelector(r+" svg.no-preview").style.display="block",c.Helper.removeHTML(document.querySelector(r+" .iz-news-hub-post-icon-wrapper-loader.iz-news-hub-animated-background"))}catch(e){c.Helper.displayLog("Newshub error onError",e)}},i.onload=function(e){try{var t,o;document.querySelector(r+" img").style.display="block",c.Helper.removeHTML(document.querySelector(r+" .iz-news-hub-post-icon-wrapper-loader.iz-news-hub-animated-background")),i.height>i.width&&(t=document.querySelector(r+" .iz-news-hub-customer-icon-container"),(o=f.bluredBackgroudImage.cloneNode(!0)).querySelector("image").setAttribute("href",i.src),t.appendChild(o))}catch(e){c.Helper.displayLog("Newshub error onLoad",e)}}):"title"==t?i.innerHTML=c.Helper.removeHtmlTagsFromString(o[t]):"createdAt"==t&&(i.innerText=o[t])}catch(e){c.Helper.displayLog("Error in append news payload- "+t+":",o)}}(t);null!==(e=document.querySelector("#posts-content-cotainer"))&&void 0!==e&&e.insertAdjacentHTML("beforeend",a.outerHTML),f.nhFeed.isNoNotification&&(f.nhFeed.isNoNotification=!1),f.rtlFlag&&(f.rtlFlag=!1,f.detectRTL()),null!==(e=document.querySelector(r))&&void 0!==e&&e.addEventListener("click",function(e){var t;f.closeShareTab(),n.nhFeed.setPayloadData(o.id,{clickedAt:Date.now()}),d.GoogleAnalytics.processNewsHub("Article Clicked"),f.syncClick(o),null!==(t=window.open(o.url,"_blank"))&&void 0!==t&&t.focus()},!1),1==l.Config.global.deviceType&&((i=document.querySelector(r+" "+f.elmSelector.sharesheetTrigger)).classList.add("share-before-desktop"),null!==(s=document.querySelector(r))&&void 0!==s&&s.addEventListener("mouseleave",function(e){i.style.visibility="hidden",f.closeShareTab()},!1),null!==(s=document.querySelector(r))&&void 0!==s&&s.addEventListener("mouseenter",function(e){i.style.visibility="visible"},!1));var s=document.querySelector(r+" "+f.elmSelector.sharesheetTrigger);null!=s&&s.addEventListener("click",function(e){var t=document.querySelector(r+" "+f.elmSelector.shareSheetTab);t&&("flex"==t.style.display?f.closeShareTab():(f.closeShareTab(),t.style.display="flex",f.addShareSheetAnimationClass(t),f.setSocialShareLink(r,o),d.GoogleAnalytics.processNewsHub("Clicked Share"))),e.stopPropagation()},!0)},f.addShareSheetAnimationClass=function(e){try{var t=0;e.querySelectorAll("svg").forEach(function(e){f.isCrios?e.style.opacity="1":(setTimeout(function(){e.style.opacity="1",e.classList.add("iz-share-icons-animation")},t),t+=50)})}catch(e){c.Helper.displayLog("Newshub animation error",e)}},f.setSocialShareLink=function(o,e){try{var t,i=f.getSharingLink(e.url);for(t in i)!function(t){var e=document.querySelector(o+" "+f.elmSelector.socialSharePrefix+t);"link"==t?e.onclick=function(e){e.stopPropagation(),f.copyNewsLinkToClipboard(i[t]),d.GoogleAnalytics.processNewsHub("Shared on","copy link")}:(e.onclick=function(e){e.stopPropagation(),d.GoogleAnalytics.processNewsHub("Shared on",t)},e.href=i[t])}(t)}catch(e){c.Helper.displayLog("set social share error:",e)}},f.closeShareTab=function(){try{var e=document.querySelectorAll(f.elmSelector.shareSheetTab);null!=e&&e.forEach(function(e){e.style.display="none",e.querySelectorAll("svg").forEach(function(e){e.style.opacity="0",e.classList.remove("iz-share-icons-animation")})})}catch(e){c.Helper.displayLog("close action list error:",e)}},f.getSharingLink=function(e){return e=c.Helper.replaceQueryParam(e,"utm_campaign","Share"),{link:decodeURIComponent(c.Helper.replaceQueryParam(e,"utm_content","link_copy")),whatsapp:"https://api.whatsapp.com/send?text="+encodeURIComponent(c.Helper.replaceQueryParam(e,"utm_content","whatsapp")),facebook:"https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(c.Helper.replaceQueryParam(e,"utm_content","facebook")),twitter:"https://twitter.com/intent/tweet?url="+encodeURIComponent(c.Helper.replaceQueryParam(e,"utm_content","twitter"))+"&text=",mail:"mailto:info@example.com?&subject=&cc=&bcc=&body="+encodeURIComponent(c.Helper.replaceQueryParam(e,"utm_content","mail")),linkedin:"https://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(c.Helper.replaceQueryParam(e,"utm_content","linkedin"))}},f.render=function(){return n(this,void 0,void 0,function(){return r(this,function(e){return[2,new Promise(function(i,e){c.Helper.displayLog("Rendering News Hub");a.HttpRequest.get("https://cdn.izooto.com/newshub/widgetv3.html?v=1",function(e,t){try{if(!e)return void p.ChannelEventHandler.event("newsHub",s.KeyMapper.NEWSHUB_FAILED);c.Helper.addHTML("div",e),f.isNewsContainerLoaded=!0,f.animatedLoaderHtmlElement=document.querySelector(f.elmSelector.animatedLoader),c.Helper.removeHTML(f.animatedLoaderHtmlElement),f.bluredBackgroudImage=document.querySelector("."+f.nhPrefix+"blur-image-container"),c.Helper.removeHTML(f.bluredBackgroudImage),f.noticationHtmlElement=document.querySelector("."+f.nhPrefix+"notification"),c.Helper.removeHTML(f.noticationHtmlElement),f.footerTextElement=document.querySelector("#"+f.nhPrefix+"end-text"),c.Helper.removeHTML(f.footerTextElement),f.applyConfigStyle(),document.querySelector("."+f.nhPrefix+"branding-text").href="https://www.izooto.com/campaign/getting-started-with-izooto?utm_source=referral&utm_medium=news_hub&utm_campaign="+l.Config.notification.siteUrl;var o=window.getComputedStyle(document.querySelector("#"+f.nhPrefix+"posts-main-container")).height;o=((o=parseInt(o))-62)/85,f.attachEventListner(),i(parseInt(o||7)+1)}catch(e){p.ChannelEventHandler.event("newsHub",s.KeyMapper.NEWSHUB_FAILED),c.Helper.displayLog("Error while rendering newshub  : ",e)}})})]})})},f.attachEventListner=function(){var e;try{var t=document.querySelector("#"+f.nhPrefix+"posts-main-container");t.addEventListener("scroll",function(){t.scrollHeight-50<t.scrollTop+t.clientHeight&&f.showNotificationContent()}),document.querySelectorAll(f.elmSelector.closeButton+" , "+f.elmSelector.triggerFloating+" , "+f.elmSelector.triggerSticky).forEach(function(e){e.addEventListener("click",function(e){f.triggerClickHandler()})}),null!==(e=document.querySelector("."+f.nhPrefix+"copyclose-button"))&&void 0!==e&&e.addEventListener("click",function(){document.querySelector("#"+f.nhPrefix+"copied-main").style.display="none"})}catch(e){c.Helper.displayLog("Error while attaching event listner",e)}},f.triggerClickHandler=function(){l.Config.newsHub.callout?(1==l.Config.newsHub.designType&&(!f.isCallOutStart&&i.Session.isNew?(f.toggleNewsHubDisplay(),f.widgetClicked=!0,f.stopWiggleAnimation()):f.isCallOutClose&&(f.stopWiggleAnimation(),f.toggleNewsHubDisplay(),f.widgetClicked=!0)),2==l.Config.newsHub.designType&&(document.querySelector("#posts-content-cotainer"),f.toggleNewsHubDisplay())):f.toggleNewsHubDisplay()},f.applyConfigStyle=function(){try{l.Config.newsHub.title&&document.querySelectorAll("."+f.nhPrefix+"dynamic-title").forEach(function(e){var t=l.Config.newsHub.title.slice(0,20);e.innerHTML=t}),f.triggerButtonVisibiltyHandler(),l.Config.newsHub.placement[1]||document.querySelector(f.elmSelector.newsHubCotainerId).classList.add(f.nhPrefix+"notification-container-left"),p.ChannelEventHandler.event("newsHub",s.KeyMapper.NEWSHUB_READY)}catch(e){c.Helper.displayLog("Error while applying config:",e)}},f.bellWigglehandler=function(){try{var e,t,o;1!=l.Config.newsHub.designType||1!=l.Config.newsHub.iconType||i.Session.isNew||(e=document.querySelector(f.elmSelector.mainIconContainer),t=document.querySelector("#iz-news-hub-bell-group"),o=document.querySelector("#iz-news-hub-bell-clapper"),e.addEventListener("animationend",function(){setTimeout(function(){f.startWiggleAnimation(),t.addEventListener("animationend",function(){t.classList.remove("iz-news-hub-bell-group"),o.classList.remove("iz-news-hub-bell-clapper")})},1500)},{once:!0}))}catch(e){c.Helper.displayLog("Error bell wiggling on page refresh:",e)}},f.calloutHandler=function(){if(!f.isCalloutShown&&(f.isCalloutShown=!0,i.Session.isNew))switch(l.Config.newsHub.designType){case 1:f.loadlatestNotificationForCallout();break;case 2:f.showStickeySlider()}},f.triggerButtonVisibiltyHandler=function(){try{var e,t,o,i,n,r,a=document.querySelector(f.elmSelector.triggerSticky),s=document.querySelector(f.elmSelector.triggerFloating);a.style.display="none",s.style.display="none",l.Config.newsHub.autoWidget&&(2==l.Config.newsHub.designType?(e=document.querySelector(f.elmSelector.rippleElm),a.style.display="flex",l.Config.newsHub.placement[1]||(a.classList.add(f.nhPrefix+"sidebar-container-left"),e.classList.add("left-sticky"))):(s.style.display="flex",t=l.Config.newsHub.placement[0]?"bottom":"top",o=l.Config.newsHub.placement[1]?"right":"left",i=f.nhPrefix+"floating-icon-container-"+t+"-"+o,s.classList.contains(i)||s.classList.add(i)),setTimeout(function(){var e;null!==(e=document.querySelector(f.elmSelector.triggerFloating+" "+f.elmSelector.mainIcon))&&void 0!==e&&e.classList.add("izooto-news-hub-swing-animation")},1e3),1==l.Config.newsHub.iconType?document.querySelectorAll(f.elmSelector.mainIcon).forEach(function(e){e.style.display="none"}):(1==l.Config.newsHub.designType&&(document.querySelector(f.elmSelector.bellIcon).style.display="none"),2==l.Config.newsHub.designType&&document.querySelectorAll("#iz-newshub-bell-svg").forEach(function(e){e.style.display="none"}),n="https://cdn.izooto.com/newshub/icons/"+l.Config.newsHub.iconType+".svg",document.querySelectorAll(f.elmSelector.mainIcon).forEach(function(e){e.src=n}))),l.Config.newsHub.mainColor&&(r=document.querySelector("#"+f.nhPrefix+"sticky-sidebar-dummy-text"),document.querySelector("#"+f.nhPrefix+"title-container").style.backgroundColor=l.Config.newsHub.mainColor,a.style.backgroundColor=l.Config.newsHub.mainColor,r.style.backgroundColor=l.Config.newsHub.mainColor,s.querySelector("#"+f.nhPrefix+"icon-container").style.backgroundColor=l.Config.newsHub.mainColor,1==l.Config.newsHub.iconType&&(document.querySelector("#iz-news-hub-bell-clapper").style.fill=l.Config.newsHub.mainColor,document.querySelector(".iz-newsHub-bell-shell").style.fill=l.Config.newsHub.mainColor)),l.Config.branding||(document.querySelector("#"+f.nhPrefix+"notification-footer").style.display="none",document.querySelector(f.elmSelector.notificationWrapperId).classList.add(f.nhPrefix+"no-branding"))}catch(e){c.Helper.displayLog("Error while applying config:",e)}},f.toggleNewsHubDisplay=function(e){var t,o,i,n;void 0===e&&(e=!1),clearTimeout(f.sliderCloseTimeOutInstance),f.isNewsContainerLoaded&&(f.isDataLoaded||(f.isDataLoaded=!0,f.showNotificationContent()),t=l.Config.newsHub.placement[1]?"right":"left",(o=document.querySelector(f.elmSelector.newsHubCotainerId)).classList.remove("iz-news-hub-animate-pop-out","iz-news-hub-animate-pop-in","openFullSlider","closeFullSlider"),f.removeTextOrderChange(),o.classList.add("izootoSlideAnimation"),i=document.querySelector(f.elmSelector.rippleElm),"none"===o.style.display||e?(i.style.display="none",f.isGAEventSent.open||(f.isGAEventSent.open=!0,d.GoogleAnalytics.processNewsHub("Widget Click")),f.syncEventsWithAPI("syncNewshubOpen","wopen"),o.style.display="block",f.isCrios||o.classList.add("izooto-slide-in-"+t+"-animation"),f.isNewsHubOpened=!0,p.ChannelEventHandler.event("newsHub",s.KeyMapper.NEWSHUB_OPEN),g.Mediation.loadGPTAd(document)):(f.isNewsHubOpened=!1,n=function(){c.Helper.hideElement(f.elmSelector.sideBarDummyText),o.style.display="none",o.removeEventListener("animationend",n),f.closeShareTab(),f.isGAEventSent.close||(f.isGAEventSent.close=!0,d.GoogleAnalytics.processNewsHub("Widget Close")),o.classList.remove("izooto-slide-out-"+t+"-animation"),p.ChannelEventHandler.event("newsHub",s.KeyMapper.NEWSHUB_CLOSED)},o.classList.remove("izooto-slide-in-"+t+"-animation"),o.addEventListener("animationend",n),f.isCrios?n():o.classList.add("izooto-slide-out-"+t+"-animation")))},f.setElmStyles=function(){try{var e=document.querySelector("#iz-news-hub-sticky-sidebar");l.Config.newsHub.placement[1]?(e.style.left="unset",e.style.right="-"+(e.clientWidth/2-e.clientHeight/2)+"px"):(e.clientWidth,e.clientHeight,e.style.right="unset",e.style.left="-"+(e.clientWidth/2-e.clientHeight/2)+"px")}catch(e){}},f.setStickyDummyStyle=function(){var e=document.querySelector("#iz-news-hub-sticky-sidebar-dummy-text"),t=window.getComputedStyle(e).transformOrigin.split(" "),t=parseInt(t[0])+parseInt(t[1]);l.Config.newsHub.placement[1]?(e.style.transform="rotate(-90deg) translate(0px, -"+t+"px)","rtl"==document.dir&&(e.style.left=0)):e.style.transform="rotate(-90deg) translate(0px, "+(t-2)+"px)"},f.copyNewsLinkToClipboard=function(e){try{f.closeShareTab();var t=document.querySelector("#"+f.nhPrefix+"copied-main");if(clearTimeout(f.copiedTimeoutInstance),t.style.display="block",f.copiedTimeoutInstance=setTimeout(function(){t.style.display="none"},3e3),!navigator.clipboard){var o=document.createElement("textarea");o.value=e,o.style.position="fixed",o.style.left="-999999px",o.style.top="-999999px",document.body.appendChild(o),o.focus(),o.select();try{document.execCommand("copy");o.remove()}catch(e){c.Helper.displayLog("Fallback: Oops, unable to copy",e)}return}navigator.clipboard.writeText(e).then(function(){},function(e){c.Helper.displayLog("Async: Could not copy text: ",e)})}catch(e){c.Helper.displayLog("Error: Could not copy text: ",e)}},f.showLoader=function(e){var t;void 0===e&&(e=1);for(var o=1;o<=e;o++)null!==(t=document.querySelector("#posts-content-cotainer"))&&void 0!==t&&t.insertAdjacentHTML("beforeend",f.animatedLoaderHtmlElement.outerHTML)},f.hideLoader=function(){document.querySelectorAll(f.elmSelector.animatedLoader).forEach(function(e){e.parentNode.removeChild(e)})},f.syncClick=function(e){e="pid="+l.Config.client+"&bkey="+c.Helper.getCurrentUUID()+"&rid="+e.id+"&cid="+e.cid+"&op=click&isid=1&cs=1";l.Config.notification.serviceWorkerVersion&&(e+="&ver="+l.Config.notification.serviceWorkerVersion),a.HttpRequest.post(c.Helper.getEndpoint("notificationClick"),{data:e},function(){l.Config.brandingPartner})},f.showFooterMessage=function(){var e;try{if(f.nhFeed.isNoNotification)return;null!==(e=document.querySelector(this.elmSelector.notificationWrapperId))&&void 0!==e&&e.appendChild(f.footerTextElement),f.footerTextElement.style.display="block",(c.Helper.isIos()&&(8==l.Config.global.browserType||5==l.Config.global.browserType)||3==l.Config.global.deviceType&&1==l.Config.global.browserType)&&f.footerTextElement.classList.add("pb-40"),2==l.Config.global.deviceType&&f.isCrios&&f.footerTextElement.classList.add("pb-74")}catch(e){}},f.detectRTL=function(){var e=document.querySelector("."+f.nhPrefix+"customer-icon-container");15<e.offsetLeft&&(e.offsetLeft,document.querySelector("#"+f.nhPrefix+"main-container").setAttribute("izdirection","rtl"))},f.showNewsHubWidget=function(){try{if(f.isNewsHubOpened||!f.isNewsContainerLoaded)return;c.Helper.showElement("#iz-news-hub-main-container"),f.syncShownEvent(),c.Helper.displayLog("News hub widget shown"),l.Config.newsHub.callout&&!f.isCrios?(c.Helper.showElement(f.elmSelector.rippleElm),f.calloutHandler(),f.bellWigglehandler()):p.ChannelEventHandler.event("newsHub",s.KeyMapper.NEWSHUB_ANIMATIONEND),f.setElmStyles()}catch(e){}},f.hideNewsHubWidget=function(){try{if(f.isNewsHubOpened||!f.isNewsContainerLoaded)return;c.Helper.hideElement("#iz-news-hub-main-container"),f.shownTimeoutInstance=clearTimeout(f.shownTimeoutInstance),c.Helper.displayLog("News hub widget hidden")}catch(e){}},f.syncShownEvent=function(){f.isGAEventSent.shown||!l.Config.newsHub.autoWidget||f.shownTimeoutInstance||(f.shownTimeoutInstance=setTimeout(function(){f.isGAEventSent.shown=!0,d.GoogleAnalytics.processNewsHub("Shown"),f.syncNewsHubImp||f.syncEventsWithAPI("syncNewshubView","wview")},5e3))},f.syncEventsWithAPI=function(e,t){t="pid="+l.Config.client+"&bkey="+c.Helper.getCurrentUUID()+"&op="+t+"&btype="+l.Config.global.browserType+"&dtype="+l.Config.global.deviceType+"&os="+l.Config.global.os+"&bver="+l.Config.global.browserVer,e=c.Helper.getEndpoint(e);a.HttpRequest.post(e,{data:t},function(){l.Config.brandingPartner})},f.showCallout=function(t){try{f.isCallOutStart=!0,this.setCallOutNotification(t);var e=document.querySelector("#"+f.nhPrefix+"main-container #"+f.nhPrefix+"icon-discoverability");e.classList.add(l.Config.newsHub.placement[1]?"iz-news-hub-slideInRight":"iz-news-hub-slideInLeft");var o=document.querySelector(".iz-news-hub-icon-discoverability-text");e.style.display="flex",l.Config.newsHub.placement[1]||"rtl"!=document.dir||(o.style.direction="ltr"),e.addEventListener("click",function(e){window.open(t.p.ln),f.CalloutHover=!1,f.hideCallout(),e.stopPropagation()},!1),e.addEventListener("mouseenter",function(e){f.CalloutHover=!0}),e.addEventListener("mouseleave",function(e){f.CalloutHover=!1}),e.addEventListener("animationstart",f.onCallOutAnimationStart,{once:!0}),document.querySelector(f.elmSelector.triggerFloating).addEventListener("click",f.hideCallout)}catch(e){c.Helper.displayLog("Show callout error",e)}},f.startWiggleAnimation=function(){try{var e=document.querySelector("#iz-news-hub-bell-group"),t=document.querySelector("#iz-news-hub-bell-clapper");if(e.classList.add("iz-news-hub-bell-group"),t.classList.add("iz-news-hub-bell-clapper"),f.wiggleIntervalId)return;f.wiggleIntervalId=setInterval(function(){e.classList.add("iz-news-hub-bell-group"),t.classList.add("iz-news-hub-bell-clapper")},4e3)}catch(e){c.Helper.displayLog("Start wiggle animation error",e)}},f.stopWiggleAnimation=function(){f.wiggleIntervalId=window.clearInterval(f.wiggleIntervalId)},f.setCallOutNotification=function(e){try{var t,o=document.querySelector("."+f.nhPrefix+"icon-discoverability-text"),i=document.querySelector("."+f.nhPrefix+"icon-discoverability-img-wrapper img"),n=document.querySelector("."+f.nhPrefix+"icon-discoverability-img-wrapper");e.p.bi?(t=e.p.bi,i.src=t,f.imagebgBlur(n,i),i.onerror=function(e){f.removeImageWhiteSpace()}):e.p.i?(t=e.p.i,i.src=t,f.imagebgBlur(n,i),i.onerror=function(e){f.removeImageWhiteSpace()}):f.removeImageWhiteSpace(),o.innerHTML=e.p.t}catch(e){c.Helper.displayLog("Set callout notification error",e)}},f.removeImageWhiteSpace=function(){var e=document.querySelector("#"+f.nhPrefix+"icon-discoverability");document.querySelector("."+f.nhPrefix+"icon-discoverability-img-wrapper").style.display="none",l.Config.newsHub.placement[1]||(e.style.paddingRight="0px")},f.onCallOutAnimationStart=function(){try{var e=l.Config.newsHub.placement[1]?1500:200;setTimeout(function(){c.Helper.hideElement(f.elmSelector.bellIcon),1!=l.Config.newsHub.iconType&&c.Helper.hideElement(f.elmSelector.mainIcon),c.Helper.showElement(f.elmSelector.crossIcon)},e)}catch(e){c.Helper.displayLog("Callout animationend error",e)}},f.imagebgBlur=function(o,i){document.querySelector("#"+f.nhPrefix+"icon-discoverability").style.maxWidth="350px",i.onload=function(e){try{var t;i.style.display="block",i.height>i.width||i.height==i.width?((t=f.bluredBackgroudImage.cloneNode(!0)).querySelector("image").setAttribute("href",i.src),o.appendChild(t)):i.style.width="100%"}catch(e){c.Helper.displayLog("Newshub discoverability image error onLoad",e)}}},f.hideCallout=function(e){try{var t=document.querySelector(f.elmSelector.notificationCallout);document.querySelector(f.elmSelector.triggerFloating).removeEventListener("click",f.hideCallout);var o="iz-news-hub-slideInLeft",i="iz-news-hub-slideOutLeft";l.Config.newsHub.placement[1]&&(o="iz-news-hub-slideInRight",i="iz-news-hub-slideOutRight"),t.classList.replace(o,i),c.Helper.hideElement(f.elmSelector.crossIcon);var n=1!=l.Config.newsHub.iconType?f.elmSelector.mainIcon:f.elmSelector.bellIcon;c.Helper.showElement(n),t.addEventListener("animationend",function(){t.style.display="none",p.ChannelEventHandler.event("newsHub",s.KeyMapper.NEWSHUB_ANIMATIONEND)}),setTimeout(function(){f.widgetClicked||f.startWiggleAnimation()},3e3),f.isCallOutClose=!0,null!=e&&e.stopPropagation()}catch(e){c.Helper.displayLog("Callout hide error",e)}},f.bellAnimationHandler=function(e){try{var t,o,i;f.isCallOutClose=!1,1==l.Config.newsHub.iconType?(t=document.querySelector(f.elmSelector.mainIconContainer),o=document.querySelector("#iz-news-hub-bell-group"),i=document.querySelector("#iz-news-hub-bell-clapper"),t.addEventListener("animationend",function(){setTimeout(function(){o.classList.add("iz-news-hub-bell-group"),i.classList.add("iz-news-hub-bell-clapper"),o.addEventListener("animationend",function(){o.classList.remove("iz-news-hub-bell-group"),i.classList.remove("iz-news-hub-bell-clapper")})},1500)},{once:!0}),o.addEventListener("animationend",function(){setTimeout(function(){f.widgetClicked||(f.showCallout(e),f.calloutCloseHandler())},1500)},{once:!0})):document.querySelector("#izooto-news-hub-swing-animation").addEventListener("animationend",function(){setTimeout(function(){f.widgetClicked||(f.showCallout(e),f.calloutCloseHandler())},1500)},{once:!0})}catch(e){c.Helper.displayLog("bell animate handler error",e)}},f.calloutCloseHandler=function(){setTimeout(function(){var e=setInterval(function(){f.CalloutHover||(clearInterval(e),f.hideCallout())},1e3)},1e3*l.Config.newsHub.calloutTimeout)},f.showStickeySlider=function(){var r=this;try{f.showNotificationContent().then(function(e){var t,o,i,n;f.isDataLoaded=!0,0!=f.nhFeed.ridsList.length&&(f.sliderCloseHandler(),i=document.querySelector(f.elmSelector.newsHubCotainerId),(o=document.querySelector(f.elmSelector.sideBarDummyText)).classList.add(l.Config.newsHub.placement[1]?"iz-news-hub-sticky-sidebar-dummy-text-right":"iz-news-hub-sticky-sidebar-dummy-text-left"),i.style.display="block",f.syncEventsWithAPI("syncNewshubView","wview"),f.syncNewsHubImp=!0,i.addEventListener("mouseenter",f.fullSliderOpener,{once:!0}),i.addEventListener("mouseleave",function(e){f.CalloutHover=!1}),o.style.display="flex",document.querySelector("#posts-content-cotainer"),t=100-l.Config.newsHub.slidePercent,n=100,l.Config.newsHub.placement[1]?(f.sliderClass.open="iz-news-hub-animate-pop-out",f.sliderClass.close="iz-news-hub-animate-pop-in"):(t="-"+t,n=-100,f.sliderClass.open="iz-news-hub-animate-pop-in",f.sliderClass.close="iz-news-hub-animate-pop-out"),r.textOrderChange(),f.sliderClass.openPercent=t,f.sliderClass.closePercent=n,i.classList.remove("izootoSlideAnimation"),i.classList.add(f.sliderClass.open),o=document.getElementsByClassName(f.sliderClass.open)[0],(i=document.createElement("style")).type="text/css",n="@keyframes "+f.sliderClass.open+" { \n\t\t\t\t\t100% { transform: translateX("+t+"%);}\n\t\t\t\t}\n\t\t\t\t@-webkit-keyframes "+f.sliderClass.open+" {\n\t\t\t\t\t100% { -webkit-transform: translateX("+t+"%);}\n\t\t\t\t}\n\n\t\t\t\t@keyframes "+f.sliderClass.close+" {\n\t\t\t\t\t0% { transform: translateX("+t+"%);}\n\t\t\t\t\t100% { transform: translateX("+n+"%);}\n\t\t\t\t}\n\t\t\t\t",i.innerHTML=n,o.appendChild(i),f.setStickyDummyStyle())})}catch(e){c.Helper.displayLog("StickeySlider showing error",e)}},f.textOrderChange=function(){var e=document.querySelector("."+f.nhPrefix+"customer-icon-container");document.querySelector(f.elmSelector.newsHubCotainerId).classList.add("iz-no-preview"),l.Config.newsHub.placement[1]?"rtl"==document.dir&&15<e.offsetLeft&&(document.querySelector(f.elmSelector.newsHubCotainerId).classList.add("iz-reverse-order"),document.querySelector(f.elmSelector.newsHubCotainerId).classList.add("iz-nh-dir-ltr")):"rtl"!=document.dir?document.querySelector(f.elmSelector.newsHubCotainerId).classList.add("iz-reverse-order"):document.querySelector("#"+f.nhPrefix+"main-container").setAttribute("izdirection","rtl")},f.removeTextOrderChange=function(){var e=document.querySelector(f.elmSelector.newsHubCotainerId);document.querySelector(f.elmSelector.newsHubCotainerId).classList.remove("iz-no-preview"),"rtl"==document.dir?l.Config.newsHub.placement[1]&&(document.querySelector(f.elmSelector.newsHubCotainerId).classList.remove("iz-nh-dir-ltr"),document.querySelector(f.elmSelector.newsHubCotainerId).classList.remove("iz-reverse-order"),document.querySelector("#"+f.nhPrefix+"main-container").setAttribute("izdirection","rtl")):e.classList.remove("iz-reverse-order")},f.openFullSlider=function(){try{var e=document.querySelector(f.elmSelector.newsHubCotainerId),t=document.createElement("style");t.type="text/css";var o="\n\t\t\t.openFullSlider {\n\t\t\t\tanimation: iz-animate-open-full 0.5s 1 forwards;\n\t\t\t}\n\t\t\t.closeFullSlider {\n\t\t\t\tanimation: iz-animate-close-full 0.5s 1 forwards;\n\t\t\t}\n\t\t\t@keyframes iz-animate-open-full { \n\t\t\t\t0% { transform: translateX("+f.sliderClass.openPercent+"%);}\n\t\t\t\t100% { transform: translateX(0%);}\n\t\t\t}\n\t\t\t@keyframes iz-animate-close-full {\n\t\t\t\t0% { transform: translateX(0%);}\n\t\t\t\t100% { transform: translateX("+f.sliderClass.closePercent+"%);}\n\t\t\t}";t.innerHTML=o,document.body.appendChild(t),e.classList.add("openFullSlider")}catch(e){c.Helper.displayLog("Open full Slider error on mouse enter",e)}},f.fullSliderOpener=function(){f.isSliderHovered=!0,f.CalloutHover=!0,f.openFullSlider()},f.sliderCloseHandler=function(){try{var t=document.querySelector(f.elmSelector.newsHubCotainerId);f.sliderCloseTimeOutInstance=setTimeout(function(){t.removeEventListener("mouseenter",f.fullSliderOpener),t.addEventListener("animationend",f.onSliderAnimationEnd,{once:!0});var e=setInterval(function(){f.CalloutHover||(clearInterval(e),t.classList.remove("izootoSlideAnimation"),f.removeTextOrderChange(),c.Helper.hideElement(f.elmSelector.sideBarDummyText),f.isSliderHovered?t.classList.replace("openFullSlider","closeFullSlider"):t.classList.replace(f.sliderClass.open,f.sliderClass.close))},1e3)},1e3*l.Config.newsHub.calloutTimeout)}catch(e){c.Helper.displayLog("StickeySlider close error",e)}},f.onSliderAnimationEnd=function(e){try{var t;e.target.classList.contains("iz-news-hub-notification-container")&&(t=document.querySelector(f.elmSelector.newsHubCotainerId),c.Helper.hideElement(f.elmSelector.newsHubCotainerId),c.Helper.hideElement(f.elmSelector.sideBarDummyText),p.ChannelEventHandler.event("newsHub",s.KeyMapper.NEWSHUB_ANIMATIONEND),t.classList.remove("iz-news-hub-animate-pop-in","iz-news-hub-animate-pop-out","openFullSlider","closeFullSlider"),"rtl"!=document.dir&&(t.classList.remove("iz-reverse-order"),document.querySelector("#"+f.nhPrefix+"main-container").removeAttribute("izdirection","rtl")))}catch(e){c.Helper.displayLog("Slider animationend error",e)}},f.loadlatestNotificationForCallout=function(){var e=this;try{var t="https://nh.iz.do/nh/"+l.Config.hashFileName+"/latest.json";a.HttpRequest.get(t,function(o,i){return n(e,void 0,void 0,function(){var t;return r(this,function(e){return 200!=i&&304!=i||((t=c.Helper.parseToJSON(o)).hasOwnProperty("p")&&t.p.t?f.bellAnimationHandler(t):p.ChannelEventHandler.event("newsHub",s.KeyMapper.NEWSHUB_ANIMATIONEND)),[2]})})})}catch(e){c.Helper.displayLog("Load latest notification error",e)}},f.minimumNotificationToShow=0,f.isNewsLoading=!1,f.isNewsContainerLoaded=!1,f.notificationPrefix="."+(f.nhPrefix="iz-news-hub-")+"notification-",f.isNewsHubOpened=!1,f.lastMarkAllAsRead=!1,f.isDataLoaded=!1,f.rtlFlag=!0,f.isCallOutClose=!0,f.CalloutHover=!1,f.isSliderHovered=!1,f.isCalloutShown=!1,f.isCallOutStart=!1,f.widgetClicked=!1,f.syncNewsHubImp=!1,f.sliderClass={open:"",openPercent:0,close:"",closePercent:0},f.elmSelector={newsHubCotainerId:"#"+f.nhPrefix+"notification-container",noNotification:"#"+f.nhPrefix+"no-notifications-container",notificationWrapperId:"#"+f.nhPrefix+"posts-main-container",triggerSticky:"#"+f.nhPrefix+"sticky-sidebar",triggerFloating:"#"+f.nhPrefix+"discovr-outer-wrapper",mainIcon:"."+f.nhPrefix+"main-icon",mainIconContainer:"#"+f.nhPrefix+"icon-container",closeButton:"."+f.nhPrefix+"close-news-hub-btn",animatedLoader:f.notificationPrefix+"loader",sharesheetTrigger:"."+f.nhPrefix+"share-before",shareSheetTab:"."+f.nhPrefix+"share-icons",socialSharePrefix:"."+f.nhPrefix+"social-share-",notificationCallout:"#"+f.nhPrefix+"icon-discoverability",crossIcon:"#"+f.nhPrefix+"cross-icon",bellIcon:"."+f.nhPrefix+"bell",rippleElm:"."+f.nhPrefix+"sticky-red",sideBarDummyText:"#"+f.nhPrefix+"sticky-sidebar-dummy-text"},f.isGAEventSent={shown:!1,open:!1,close:!1},f);function f(){}t.NewsHub=o},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(o,t){function i(e){try{r(l.next(e))}catch(e){t(e)}}function n(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?o(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}r((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(o,i){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(o,s)}catch(e){t=[6,e],r=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.MasterDomain=void 0;var l=o(0),c=o(2),p=o(3),d=o(4),u=o(1),g=o(8),f=o(16),o=(y.init=function(){return i(this,void 0,void 0,function(){var t,o,i,n,r,a;return s(this,function(e){switch(e.label){case 0:return(t=l.Config.UUID=u.Helper.getCurrentUUID(),3!=l.Config.notification.windowType||window.self==window.top)?[3,4]:(o={token:"",subscribed_on:"",uuid:t},p.Storage.getStorage(c.KeyMapper.MASTER_DOMAIN)?(i=y.getMasterStorage(c.KeyMapper.PUSH_TOKEN),r=y.getMasterStorage(c.KeyMapper.SUBSCRIBED_ON),""!=t||""==i?[3,2]:[4,u.Helper.getUUIDFromEndpoint(i)]):[3,3]);case 1:""!=(n=e.sent())&&(t=n,p.Storage.setStorage(c.KeyMapper.UUID,t)),e.label=2;case 2:o={token:i,subscribed_on:r,uuid:t},e.label=3;case 3:return u.Helper.postMessage("parent",c.KeyMapper.MASTER_TO_CHILD,o),u.Helper.addMsgReciever(d.NotificationHelper.msgReciever),[3,10];case 4:return window.location.origin!=l.Config.notification.masterDomain?[3,9]:""==(i=y.getMasterStorage(c.KeyMapper.PUSH_TOKEN))?[3,7]:""!=t?[3,6]:[4,u.Helper.getUUIDFromEndpoint(i)];case 5:""!=(n=e.sent())&&(t=n,p.Storage.setStorage(c.KeyMapper.UUID,t)),e.label=6;case 6:return(r=y.getMasterStorage(c.KeyMapper.SUBSCRIBED_ON))==l.Config.notification.masterDomain?(f.Main.moduleInitializer(),[2]):(1==d.NotificationHelper.getPermissionStatusFromStorage()?g.Queue.sync():d.NotificationHelper.tokenValidator(function(e){1==e?(d.NotificationHelper.updatePermissionStatus(1),g.Queue.sync()):f.Main.moduleInitializer()}),[3,8]);case 7:f.Main.moduleInitializer(),e.label=8;case 8:return[3,10];case 9:l.Config.store.isMDSyncingRequired&&(u.Helper.addMsgReciever(d.NotificationHelper.msgReciever),a=l.Config.notification.masterDomain+l.Config.notification.masterDomainPath+"?action=izcheckmaster&domain="+window.location.origin,u.Helper.addIFrame(a,c.KeyMapper.MASTER_AS_FRAME)),1==d.NotificationHelper.getPermissionStatusFromStorage()?(d.NotificationHelper.sendEvent(c.KeyMapper.ALREADY_GRANTED,y.getMasterStorage(c.KeyMapper.PUSH_TOKEN)),g.Queue.sync()):l.Config.store.isMDSyncingRequired||(u.Helper.addMsgReciever(d.NotificationHelper.msgReciever),a=l.Config.notification.masterDomain+l.Config.notification.masterDomainPath+"?action=izcheckmaster&domain="+window.location.origin,u.Helper.addIFrame(a,c.KeyMapper.MASTER_AS_FRAME)),e.label=10;case 10:return[2]}})})},y.masterDomainCallback=function(e){var t,o,i=!0;""!=l.Config.notification.masterDomain&&(e&&(i=!1,e=y.getMasterStorage(c.KeyMapper.MASTER_DOMAIN),t=p.Storage.getStorage(c.KeyMapper.PUSH_TOKEN),t=u.Helper.parseToJSON(t),e=""!=e?d.NotificationHelper.getSubscriptionKey(e):"",t=d.NotificationHelper.getSubscriptionKey(t),""!=e&&e==t||(i=!0)),i&&(window.location.origin==l.Config.notification.masterDomain?(o='{"iz_'+l.Config.client+'":{"'+c.KeyMapper.PUSH_TOKEN+'":'+p.Storage.getStorage(c.KeyMapper.PUSH_TOKEN)+',"'+c.KeyMapper.SUBSCRIBED_ON+'":"'+l.Config.notification.masterDomain+'","user_properties":{}}}',p.Storage.setStorage(c.KeyMapper.MASTER_DOMAIN,o)):self==top&&(t={token:p.Storage.getStorage(c.KeyMapper.PUSH_TOKEN),subscribed_on:window.location.origin,uuid:u.Helper.getCurrentUUID()},i=document.getElementById(c.KeyMapper.MASTER_AS_FRAME),u.Helper.postMessage(i,c.KeyMapper.CHILD_TO_MASTER,t),o='{"iz_'+l.Config.client+'":{"'+c.KeyMapper.PUSH_TOKEN+'":'+p.Storage.getStorage(c.KeyMapper.PUSH_TOKEN)+',"'+c.KeyMapper.SUBSCRIBED_ON+'":"'+window.location.origin+'","user_properties":{}}}',p.Storage.setStorage(c.KeyMapper.MASTER_DOMAIN,o)),window._izq=window._izq||[],window._izq.push(["userProfile",{add:{subscribed_on_url:window.location.origin}}])))},y.setMasterStorage=function(e){var t="";e.hasOwnProperty("uuid")&&e.uuid&&(t=e.uuid);var o='{"iz_'+l.Config.client+'":{"'+c.KeyMapper.PUSH_TOKEN+'":'+e.token+',"'+c.KeyMapper.SUBSCRIBED_ON+'":"'+e.subscribed_on+'","user_properties":{}}}';p.Storage.setStorage(c.KeyMapper.MASTER_DOMAIN,o),p.Storage.setStorage(c.KeyMapper.PUSH_TOKEN,encodeURIComponent(e.token)),t&&p.Storage.setStorage(c.KeyMapper.UUID,t)},y.getMasterStorage=function(e){var t="iz_"+l.Config.client,o="",t=(o=u.Helper.parseToJSON(p.Storage.getStorage(c.KeyMapper.MASTER_DOMAIN)))[t];return""!=o&&null!=t&&null!=t[e]?t[e]:""},y.masterConfigReciver=function(e){var t=p.Storage.getStorage(c.KeyMapper.UUID),o=e.token,i=e.subscribed_on,e=e.uuid,n={token:JSON.stringify(o),subscribed_on:i,uuid:e};e||(p.Storage.setStorage(c.KeyMapper.UUID,e),t&&t!=e&&u.Helper.UUIDMapper(t,e)),""!=o&&e?d.NotificationHelper.tokenValidator(function(e){1==e?(d.NotificationHelper.updatePermissionStatus(c.KeyMapper.PROMPT_ALLOWED),y.setMasterStorage(n),d.NotificationHelper.sendEvent(c.KeyMapper.ALREADY_GRANTED,y.getMasterStorage(c.KeyMapper.PUSH_TOKEN)),g.Queue.sync()):0==e&&(p.Storage.removeConfigLocal(c.KeyMapper.PERMISSION_STATUS),f.Main.moduleInitializer())},e):f.Main.moduleInitializer()},y);function y(){}t.MasterDomain=o},function(e,t,o){"use strict";var s=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(o,t){function i(e){try{r(l.next(e))}catch(e){t(e)}}function n(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?o(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}r((l=l.apply(e,a||[])).next())})},l=this&&this.__generator||function(o,i){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(o,s)}catch(e){t=[6,e],r=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Messenger=void 0;var c=o(0),p=o(1),d=o(4),i=o(3),n=o(5),u=o(2),r=o(10),g=o(6),o=(f.init=function(e){var t,o=this;if("http:"!=c.Config.global.locationProtocol&&0==c.Config.notification.windowType){if(0!=c.Config.messenger.status&&""!=c.Config.messenger.pageId){try{null==(f.messengerPrompt=c.Config.messenger.prompt).title&&(f.messengerPrompt.title="Connect with us for exclusive deals and offers!"),f.messengerPrompt.poweredbysrc=c.Config.notification.promptDesign.poweredbysrc}catch(e){}f.htmlContainer=d.NotificationHelper.loadDesign(f.messengerPrompt,f.getHtmlContainer());var i,n=document.createElement("iframe");n.id="izootoMessengerFrame",n.scrolling="no";var r=document.getElementById(f.anyWhereSelector);if(r){if(f.isAlreadySubscribed())return;f.promptSequencing(u.KeyMapper.MESSENGER_READY),f.htmlContainer=d.NotificationHelper.loadDesign(f.messengerPrompt,f.getHtmlContainer(!1));try{var a=document.createElement("style");a.innerText="#"+f.anyWhereSelector+"{overflow: hidden;text-align: center;} #izootoMessengerFrame{ height: "+f.heightMap[c.Config.messenger.size.toLocaleLowerCase()]+"; border: none; max-width: 256px;width:unset; }",null!=r&&r.appendChild(a),null!=r&&r.appendChild(n),f.isElementFound=!0}catch(e){p.Helper.displayLog("Error in appending child in izooto-messenger-div")}}else{if(1!=e){if(!c.Config.messenger.autoPrompt)return;if(f.isDelayed())return}if(f.triggered)return;f.triggered=!0,f.promptSequencing(u.KeyMapper.MESSENGER_READY);try{n.style="height: 249px; border: none; max-width: unset;width:unset;",(i=document.createElement("div")).id="izMsngrOptinOuterWrapper",i.innerHTML=' <div id="izMsngrIframeWrapper"></div><style>#izMsngrOptinOuterWrapper{display:none;position: fixed; width: 306px; height: 249px; z-index: 99999999999; bottom: 10px; right: 10px;}#izMsngrIframeWrapper{position: relative;}@media screen and (max-width: 600px){#izMsngrOptinOuterWrapper{width: 100%!important; height: 100%!important; position: fixed; left: 0!important; top: 0!important; bottom: unset!important; right: unset!important; z-index: 2147483647; background: #00000070;}#izMsngrIframeWrapper{position: absolute; right: 50%; bottom: 50%; transform: translate(50%, 50%);}}</style>',document.body.appendChild(i),null!==(t=document.getElementById("izMsngrIframeWrapper"))&&void 0!==t&&t.appendChild(n)}catch(e){p.Helper.displayLog("Error in appending child in messenger-div")}}f.frameElement=n,(f.frameContentWindow=n.contentWindow).fbAsyncInit=function(){f.addHtmlContainer(c.Config.messenger.pageId),f.frameContentWindow.FB.init({appId:f.appId,autoLogAppEvents:!0,xfbml:!0,version:"v12.0"}),f.frameContentWindow.FB.Event.subscribe("send_to_messenger",function(e){"rendered"==e.event&&0==e.is_after_optin&&setTimeout(function(){return s(o,void 0,void 0,function(){var t;return l(this,function(e){return f.frameContentWindow.document.querySelector("#izootoFbMessengerMainContainer")&&(f.isElementFound?(t=window.getComputedStyle(f.frameContentWindow.document.querySelector(".fb-send-to-messenger")),256<(t=parseInt(t.width))&&(t+=33,n.style="max-width: "+t+"px;width: "+t+"px;"),f.syncMessengerEvent()):f.promptSequencing(u.KeyMapper.MESSENGER_READY_SHOW)),[2]})})},400),"opt_in"==e.event&&(f.setMultiMessengerStorage(u.KeyMapper.MSNGR_IS_SUBSCRIBED,1),f.sendEvent(u.KeyMapper.MESSENGER_SUBSCRIBED),g.GoogleAnalytics.processMessanger("Send to Messenger"),f.promptSequencing(u.KeyMapper.MESSENGER_SUBSCRIBED),setTimeout(function(){f.htmlContainerClose(!0)},1e3))})};setTimeout(function(){var e=document.createElement("script");e.src="https://connect.facebook.net/en_US/sdk.js",n.contentDocument.body.appendChild(e)},200)}}else p.Helper.displayLog("Messenger is disabled for this device!")},f.syncMessengerEvent=function(){f.sendEvent(u.KeyMapper.MESSENGER_PROMPTED),1==i.Storage.getConfigLocal("messengerRepeated",u.KeyMapper.STATS)?g.GoogleAnalytics.processMessanger("Repeat Impression"):g.GoogleAnalytics.processMessanger("Impression"),i.Storage.setConfigLocal("messengerRepeated",1,u.KeyMapper.STATS),f.promptSequencing(u.KeyMapper.MESSENGER_PROMPTED),f.setRepeatPromptDelay(c.Config.messenger.repeatDelay)},f.showMessenger=function(){document.querySelector("#izMsngrOptinOuterWrapper").style.display="block",f.syncMessengerEvent()},f.htmlContainerClose=function(e){void 0===e&&(e=!1);var t=document.getElementById(f.anyWhereSelector)?f.frameElement:document.querySelector("#izMsngrOptinOuterWrapper");t&&(t.style.display="none"),0==e&&g.GoogleAnalytics.processMessanger("Dismissed"),f.promptSequencing(u.KeyMapper.PROMPT_CLOSED)},f.getHtmlContainer=function(e){return(e=void 0===e||e)?'<style> .fb_iframe_widget { display: -webkit-box; } .izooto-widget-overlay { background: transparent; width: unset; height: unset; position: unset; top: unset; left: unset; z-index: 2147483647; } .izooto-widget-position { position: fixed; right: 10px; bottom: 10px; z-index: 2147483647; } .izooto-fb-widget { background: #fff; box-shadow: 0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.01), 0px 1px 18px 0px rgba(0, 0, 0, 0.03); border-radius: 4px; font-family: "sans-serif", Helvetica, Arial, Helvetica Neue; font-size: 15px; letter-spacing: 0.4px; width: 285px; position: relative; } .izooto-fb-close { background: transparent; border: none; font-size: 22px; position: relative; top: 2px; cursor: pointer; color: grey; } #izooto-fb-close-wrapper { display: flex; justify-content: flex-end; background: #dfeeff; padding: 0 5px; margin: 0 -24px;} .izooto-fb-top { padding: 24px; border-radius: 4px 4px 0 0; background: #dfeeff; padding-bottom: 10px; padding-top: 0; margin-top: -4px; } .izooto-fb-title { line-height: 20px; font-weight: 500; color: #000; padding-bottom: 6px; } a.izooto-fb-branding { display: block; padding-top: 6px; font-size: 11px; color: #1f82f7; font-family: "sans-serif", Helvetica, Arial, Helvetica Neue; text-decoration: none; letter-spacing: 0.8px; } a:hover.izooto-fb-branding { display: block; padding-top: 6px; font-size: 11px; color: #1f82f7; font-family: "sans-serif", Helvetica, Arial, Helvetica Neue; text-decoration: none; letter-spacing: 0.8px; } .izooto-fb-bottom { background: white; border-radius: 0 0 4px 4px; padding: 24px; background: #fff; } @media screen and (max-width:600px) { .izmobilemsngr #izooto-fb-close-wrapper { padding: 0; } .izmobilemsngr .izooto-fb-close { background: #195086; border: none; font-size: 22px; position: relative; top: -10px; cursor: pointer; color: white; border-radius: 50px; width: 28px; height: 28px; text-align: center; vertical-align: middle; display: unset; padding: 0 0; line-height: 0; margin: 0 -5px; } }</style><div class="izooto-widget-overlay"> <div class="izooto-widget-position"> <div class="izooto-fb-widget"> <div class="izooto-fb-top" dir="auto"><div id="izooto-fb-close-wrapper"> <button type="button" class="izooto-fb-close" onclick="window.top._izooto.messengerClass.htmlContainerClose();">&times;</button> </div>  <div class="izooto-fb-title">{{--title--}}</div><a target="_blank" href="{{--poweredbysrc--}}" class="izooto-fb-branding izbranding"><span style="color:grey;">Powered by</span> '+c.Config.brandingPartner+'</a></div> <div class="izooto-fb-bottom"> <div id="izFbContainer" style="margin-left:42px;"></div> </div> </div> </div>':'<style>body{ margin:0px;} #izFbContainer{ margin-left: 33px; position: absolute; } </style><div id="izFbContainer"></div>'},f.addHtmlContainer=function(e){var t=f.htmlContainer,o=document.createElement("div");o.setAttribute("id","izootoFbMessengerMainContainer");var i=function(){window.outerWidth<=600?o.setAttribute("class","izmobilemsngr"):o.setAttribute("class","")};i(),window.addEventListener("resize",i),o.innerHTML=t,(f.frameContentWindow.document.body||f.frameContentWindow.document.head).appendChild(o);var i=p.Helper.getCurrentUUID(),t=c.Config.client+"=/="+i+"=/="+c.Config.global.os+"=/="+c.Config.global.browserVer+"=/="+c.Config.global.deviceType+"=/="+c.Config.global.browserType,i=document.createElement("div");i.setAttribute("class","fb-send-to-messenger"),i.setAttribute("messenger_app_id",f.appId),i.setAttribute("page_id",e),i.setAttribute("color",f.isElementFound?c.Config.messenger.color:"blue"),i.setAttribute("size",f.isElementFound?c.Config.messenger.size:"large"),i.setAttribute("data-ref",t),c.Config.messenger.buttonTextType&&f.isElementFound&&i.setAttribute("cta_text",this.ctaText[c.Config.messenger.buttonTextType]),null!==(t=f.frameContentWindow.document.querySelector("#izFbContainer"))&&void 0!==t&&t.appendChild(i),p.Helper.izootoBrandingHandler(f.frameContentWindow)},f.isDelayed=function(){return 1==f.getMultiMessengerStorage(u.KeyMapper.MSNGR_IS_SUBSCRIBED)||f.getMultiMessengerStorage(u.KeyMapper.MSNGR_REPEAT_PROMPT_DELAY)>Date.now()},f.isAlreadySubscribed=function(){return 1==f.getMultiMessengerStorage(u.KeyMapper.MSNGR_IS_SUBSCRIBED)},f.syncEvent=function(e){p.Helper.setUUID();var t="",t=e==u.KeyMapper.MESSENGER_SUBSCRIBED?p.Helper.getEndpoint("syncMessenger"):p.Helper.getEndpoint(e),e=f.getParameterToSync(e);n.HttpRequest.post(t,{data:e},function(){})},f.setRepeatPromptDelay=function(e){var t;0!==e&&(t=(t=new Date).setTime(t.getTime()+60*e*1e3),f.setMultiMessengerStorage(u.KeyMapper.MSNGR_REPEAT_PROMPT_DELAY,t))},f.setMultiMessengerStorage=function(e,t){var o=i.Storage.getConfigLocal(c.Config.messenger.pageId,u.KeyMapper.MESSENGER);(o=o?p.Helper.parseToJSON(o):{})[e]=t;o=JSON.stringify(o);i.Storage.setConfigLocal(c.Config.messenger.pageId,o,u.KeyMapper.MESSENGER)},f.getMultiMessengerStorage=function(e){var t=i.Storage.getConfigLocal(c.Config.messenger.pageId,u.KeyMapper.MESSENGER);return t&&null!=(t=p.Helper.parseToJSON(t))[e]?t[e]:""},f.promptSequencing=function(e){-1<[u.KeyMapper.MESSENGER_PROMPTED,u.KeyMapper.MESSENGER_SUBSCRIBED,u.KeyMapper.PROMPT_CLOSED,u.KeyMapper.MESSENGER_READY_SHOW,u.KeyMapper.MESSENGER_READY].indexOf(e)&&!f.isElementFound&&r.ChannelEventHandler.event("messenger",e)},f.sendEvent=function(e){var t=[u.KeyMapper.MESSENGER_SUBSCRIBED];c.Config.messenger.syncPrompt&&t.push(u.KeyMapper.MESSENGER_PROMPTED),-1!=t.indexOf(e)&&f.syncEvent(e)},f.getParameterToSync=function(e){var t=("pid="+c.Config.client+"\n\t\t\t\t\t\t\t&btype="+c.Config.global.browserType+"\n\t\t\t\t\t\t\t&dtype="+c.Config.global.deviceType+" \n\t\t\t\t\t\t\t&os="+c.Config.global.os+"\n                            &page_id="+c.Config.messenger.pageId+"\n\t\t\t\t\t\t\t&bKey="+p.Helper.getCurrentUUID()).replace(/^\s+|\s+$/gm,"").split("\n").join("");switch(e){case u.KeyMapper.MESSENGER_SUBSCRIBED:t+="&ms=1";break;case u.KeyMapper.MESSENGER_PROMPTED:t+="&msp=1";break;default:t+="&"+e+"=1"}return t},f.anyWhereSelector="izooto-messenger-subscription-button",f.isElementFound=!1,f.frameElement=void 0,f.triggered=!1,f.appId="1061905150807841",f.ctaText=[,"GET_THIS_IN_MESSENGER","RECEIVE_THIS_IN_MESSENGER","SEND_THIS_TO_ME","GET_CUSTOMER_ASSISTANCE","GET_CUSTOMER_SERVICE","GET_SUPPORT","LET_US_CHAT","SEND_ME_MESSAGES","ALERT_ME_IN_MESSENGER","SEND_ME_UPDATES","MESSAGE_ME","LET_ME_KNOW","KEEP_ME_UPDATED","TELL_ME_MORE","SUBSCRIBE_IN_MESSENGER","SUBSCRIBE_TO_UPDATES","GET_MESSAGES","SUBSCRIBE","GET_STARTED_IN_MESSENGER","LEARN_MORE_IN_MESSENGER","GET_STARTED"],f.heightMap={standard:"44px",large:"58px",xlarge:"71px"},f);function f(){}t.Messenger=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Session=void 0;var i=o(0),n=o(1),r=o(3),a=o(2),o=(s.init=function(){i.Config.global.isSessionHandled||(s.sessionHandler(),i.Config.global.isSessionHandled=!0)},s.sessionHandler=function(){var e;s.isSessionExpired()&&(t=r.Storage.getConfigLocal(a.KeyMapper.SESSION_COUNT,a.KeyMapper.SESSION),e=r.Storage.getConfigLocal(a.KeyMapper.FIRST_SESSION,a.KeyMapper.SYNC),t&&e&&n.Helper.getDateDiffrenceFromPresent(e)<=s.visitWithinDays?r.Storage.setConfigLocal(a.KeyMapper.SESSION_COUNT,t+1,a.KeyMapper.SESSION):(r.Storage.setConfigLocal(a.KeyMapper.SESSION_COUNT,1,a.KeyMapper.SESSION),r.Storage.updateLastSync(a.KeyMapper.FIRST_SESSION)));var t=(t=new Date).setTime(t.getTime()+60*s.sessionExpiryMinute*1e3);new Date(t),r.Storage.setConfigLocal(a.KeyMapper.SESSION_EXPIRY,t,a.KeyMapper.SESSION)},s.isSessionExpired=function(){var e=r.Storage.getConfigLocal(a.KeyMapper.SESSION_EXPIRY,a.KeyMapper.SESSION),t=new Date;return!(""!=e&&e>t.getTime())&&(s.isNew=!0)},s.getSessionCount=function(){return r.Storage.getConfigLocal(a.KeyMapper.SESSION_COUNT,a.KeyMapper.SESSION)||0},s.isNew=!1,s.sessionExpiryMinute=30,s.visitWithinDays=7,s);function s(){}t.Session=o},function(e,t,o){"use strict";var a=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(o,t){function i(e){try{r(l.next(e))}catch(e){t(e)}}function n(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?o(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}r((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(o,i){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(o,s)}catch(e){t=[6,e],r=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedDB=void 0;var l=o(1),i=o(0),o=(c.init=function(){return a(this,void 0,void 0,function(){return s(this,function(e){try{return[2,new Promise(function(e,t){"undefined"==typeof indexedDB&&t("DB not supported"),""!=c.instance&&e(c.instance);var o=indexedDB.open("izooto",3);o.onerror=function(){t("DB not load")},o.onsuccess=function(){c.instance=o.result,e(c.instance)},o.onupgradeneeded=function(e){var t=e.target.result,e=e.oldVersion;e<2&&(t.createObjectStore("swEvents",{keyPath:"eventName"}),t.createObjectStore("options",{keyPath:"key"})),e<3&&t.createObjectStore("notificationLog",{keyPath:"key"})}})]}catch(e){l.Helper.displayLog(e)}return[2]})})},c.addUpdateToTable=function(i,n){return new Promise(function(t,o){c.init().then(function(e){e=e.transaction([i],"readwrite").objectStore(i).put(n);e.onsuccess=function(){t(i+" added to db.")},e.onerror=function(){o("Unable to add data in db!")}})})},c.addUpdate=function(i,n){return a(this,void 0,void 0,function(){return s(this,function(e){try{return[2,new Promise(function(t,o){c.init().then(function(e){e=e.transaction(["options"],"readwrite").objectStore("options").put({key:i,val:n});e.onsuccess=function(e){t(i+" added to db.")},e.onerror=function(e){o("Unable to add data in db!")}})})]}catch(e){l.Helper.displayLog(e)}return[2]})})},c.getIndexDBData=function(n,r){return a(this,void 0,void 0,function(){return s(this,function(e){try{return[2,new Promise(function(o,i){c.init().then(function(e){var e=e.transaction([n]).objectStore(n),t="all"==r?e.getAll():e.get(r);t.onerror=function(){i("Unable to retrieve data from db!")},t.onsuccess=function(){var e="";t.result?e=t.result:l.Helper.displayLog("Not found in db-> "+n+" -> "+r),o(e)}},function(){i("Unable to load db")}).catch(function(e){l.Helper.displayLog(e)})})]}catch(e){l.Helper.displayLog(e)}return[2]})})},c.setIndexedDb=function(t){window._izooto.sysEvents=i.Config.notification.sysEvents,"gaId"==t&&1!=i.Config.ga.swEvents||"sysEvents"==t&&1!=i.Config.notification.sysEventsFlag?l.Helper.displayLog("Not saved : ",t):c.getIndexDBData("options",t).then(function(e){(e&&!e.hasOwnProperty("val")||e.val!=window._izooto[t])&&c.addUpdate(t,window._izooto[t]).then(function(e){l.Helper.displayLog(e)}).catch(function(e){l.Helper.displayLog(e)})}).catch(function(e){l.Helper.displayLog(e)})},c.instance="",c);function c(){}t.IndexedDB=o},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(o,t){function i(e){try{r(l.next(e))}catch(e){t(e)}}function n(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?o(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}r((l=l.apply(e,a||[])).next())})},a=this&&this.__generator||function(o,i){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(o,s)}catch(e){t=[6,e],r=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Main=void 0;var s=o(1),l=o(0),n=o(22),r=o(20),c=o(4),p=o(8),d=o(3),u=o(9),g=o(15),f=o(23),y=o(24),m=o(21),b=o(2),S=o(13),h=o(12),C=o(14),v=o(25),w=o(26),E=o(27),P=o(11),M=o(10),T=o(30),H=o(6),_=o(19),N=o(7),o=(O.init=function(){if(void 0!==window._izooto)throw new Error("Duplicate Pixel Found !!");window._izooto={},1!=l.Config.izootoStatus?s.Helper.displayLog(l.Config.brandingPartner+" has been disabled for this site!"):"undefined"==typeof Promise?(window.Promise=function(){},O.initIzooto()):c.NotificationHelper.getIzCidPromise().then(function(){O.initIzooto()})},O.initIzooto=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return O.referenceHolder(),O.izootoFallbackHandler(),[4,l.Config.init()];case 1:return e.sent(),C.Session.init(),window._izooto.client=l.Config.client,d.Storage.legacyStorageMigration(),p.Queue.init(),""!=l.Config.notification.masterDomain&&l.Config.notification.isSupported?h.MasterDomain.init():O.moduleInitializer(),[2]}})})},O.referenceHolder=function(){window._izooto=l.Config,window._izooto.helperClass=s.Helper,window._izooto.gdprClass=n.GDPR,window._izooto.queueClass=p.Queue,window._izooto.notificationClass=r.Notification,window._izooto.notificationHelperClass=c.NotificationHelper,window._izooto.storageClass=d.Storage,window._izooto.debuggerClass=u.Debugger,window._izooto.indexedDBClass=g.IndexedDB,window._izooto.videoDropOffClass=y.VideoDropOff,window._izooto.tabAbandonmentClass=f.TabAbandonments,window._izooto.shopifyClass=m.Shopify,window._izooto.masterDomainClass=h.MasterDomain,window._izooto.messengerClass=S.Messenger,window._izooto.sessionClass=C.Session,window._izooto.crpsPlaybookClass=v.CRPSPlaybook,window._izooto.recommendArticleClass=w.RecommendArticle,window._izooto.autoSegmentClass=E.AutoSegment,window._izooto.newsHubClass=P.NewsHub,window._izooto.channelEventHandlerClass=M.ChannelEventHandler,window._izooto.exitIntentClass=T.ExitIntent,window._izooto.gaClass=H.GoogleAnalytics,window._izooto.notificationFeedClass=_.NotificationFeed,window._izooto.cookieClass=N.CookieStorage},O.moduleInitializer=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,O.UUIDHandler()];case 1:return e.sent(),r.Notification.init(),T.ExitIntent.init(),S.Messenger.init(),l.Config.newsHub.allVisitors&&P.NewsHub.init(),[2]}})})},O.UUIDHandler=function(){return i(this,void 0,void 0,function(){var t,o,i,n,r;return a(this,function(e){switch(e.label){case 0:return(t=d.Storage.getStorage(b.KeyMapper.PUSH_TOKEN),o=c.NotificationHelper.getSubscriptionKey(t),s.Helper.isUUID())?(l.Config.UUID=s.Helper.getUUID(),[3,10]):[3,1];case 1:return o?[4,s.Helper.getUUIDFromEndpoint(t)]:[3,3];case 2:return n=e.sent(),l.Config.UUID=""==n?o:n,s.Helper.setUUID(),[3,10];case 3:return[4,c.NotificationHelper.isHttpsSitePermissionAlreadyGranted()];case 4:return e.sent()?(i="",1!=l.Config.notification.httpsNoRoot?[3,6]:(s.Helper.displayLog("No root flow..."),[4,c.NotificationHelper.httpsNoRootGetOldSubscription()])):[3,10];case 5:return i=e.sent(),[3,8];case 6:return[4,c.NotificationHelper.httpsGetOldSubscription()];case 7:i=e.sent(),e.label=8;case 8:return i?[4,s.Helper.getUUIDFromEndpoint(i)]:[3,10];case 9:""==(n=e.sent())?(r=c.NotificationHelper.getSubscriptionKey(i),l.Config.UUID=r):l.Config.UUID=n,s.Helper.setUUID(),e.label=10;case 10:return s.Helper.getCurrentUUID()||(l.Config.UUID=s.Helper.getUUID()),[2]}})})},O.izootoFallbackHandler=function(){window._izooto.optinCallback=function(e){r.Notification.optinCallback(e)},window._izooto.gdprCallback=function(e){n.GDPR.gdprCallback(e)},window._izooto.closeDialog=function(e){r.Notification.closeDialog(e)},window._izooto.openPopup=function(e){r.Notification.openPopup(!0)},window._izooto.closeHttpsBranding=function(){c.NotificationHelper.closeHttpsOverlay()},window._izooto.gdprAllow=function(){n.GDPR.gdprAllow()},window._izooto.gdprDisallow=function(){n.GDPR.gdprDisallow()},window._izooto.syncHookInDb=function(){return c.NotificationHelper.syncHookInDb("syncNotificationView")},window._izooto.syncHookInDb=function(){return c.NotificationHelper.syncHookInDb("syncNotificationClick")},window._izooto.getStorage=function(e){return"iztoken"==e?e=b.KeyMapper.PUSH_TOKEN:"uid"==e&&(e=b.KeyMapper.UUID),d.Storage.getStorage(e)},window._izooto.getBrowserKeyFromToken=function(e){return c.NotificationHelper.getSubscriptionKey(e)}},O);function O(){}(t.Main=o).init()},function(e,t,o){"use strict";var a=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(o,t){function i(e){try{r(l.next(e))}catch(e){t(e)}}function n(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?o(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}r((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(o,i){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(o,s)}catch(e){t=[6,e],r=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FeedHelper=void 0;var P=o(0),M=o(1),i=o(5),l=o(15),T=o(2),H=o(3),o=(n.prototype.setup=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,this.readLastClickVisitFromDb()];case 1:return e.sent(),[4,(t=this).getAllNotificationsFromDb()];case 2:return t.notificationTempQ=e.sent(),[2,Promise.resolve(!0)]}})})},n.prototype.loadNotifications=function(o){return void 0===o&&(o=this.currentJsonFileIndex),a(this,void 0,void 0,function(){var r,t=this;return s(this,function(e){return r=this,[2,new Promise(function(n,e){r.isNewsLoading?n({data:[],status:r.status.ALREADY_IN_PROGRESS}):4<o?n({data:[],status:r.status.FAILED}):(r.isNewsLoading=!0,i.HttpRequest.get(r.cdnCampaignsSrc(o),function(o,i){return a(t,void 0,void 0,function(){var t;return s(this,function(e){return++r.currentJsonFileIndex,r.isNewsLoading=!1,200==i?(t=M.Helper.parseToJSON(o),n({data:t,status:r.status.SUCCESS})):n({data:[],status:r.status.FAILED}),[2]})})}))})]})})},n.prototype.loadSortedNotifications=function(){return a(this,void 0,void 0,function(){var i;return s(this,function(e){return i=this,[2,new Promise(function(o,e){i.loadNotifications().then(function(e){var t=e.data,e=e.status;e==i.status.SUCCESS?(i.storeSegmentIntoIdb(t),t=parseInt(t[t.length-1].p.ct),i.sortNotificationsFromIdb(t)):e==i.status.FAILED&&i.sortNotificationsFromIdb(0),o(e)})})]})})},n.prototype.getNotifications=function(r){return void 0===r&&(r=this.minimumNotificationToShow),a(this,void 0,void 0,function(){var i,n,t=this;return s(this,function(e){return i=this,n=[],[2,new Promise(function(o,e){return a(t,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return i.canLoadMore?i.notificationShowList.length<r?[4,i.loadSortedNotifications()]:[3,2]:[3,2];case 1:if((t=e.sent())==i.status.ALREADY_IN_PROGRESS)return[2,o({data:[],status:t})];i.canLoadMore=t==i.status.SUCCESS,e.label=2;case 2:return this.notificationShowList.length<r&&i.canLoadMore?[2,o(this.getNotifications())]:(n=this.notificationShowList.splice(0,r),t=i.status.SUCCESS,t=i.ridsList.length?n.length?i.status.SUCCESS:i.status.NO_MORE_NOTIFICATIONS:i.status.NULL_NOTIFICATION_SENT,o({data:n,status:t}),[2])}})})})]})})},n.prototype.cdnCampaignsSrc=function(e){return P.Config.hashFileName?"https://nh.iz.do/nh/"+P.Config.hashFileName+"/"+e+".json":""},n.prototype.getAllNotificationsFromDb=function(){return a(this,void 0,void 0,function(){var n,r=this;return s(this,function(e){switch(e.label){case 0:return n=[],[4,l.IndexedDB.getIndexDBData("notificationLog","all").then(function(e){if(e){e.sort(function(e,t){return t.payload.ct-e.payload.ct}),e.forEach(function(e){e.key.toString().length<=15&&-1==r.cidsList.indexOf(e.payload.id)&&(n.push(e),r.ridsList.push(e.key),r.cidsList.push(e.payload.id))});for(var t=0,o=n;t<o.length;t++){var i=o[t];if(!i.payload.hasOwnProperty("vr")){r.dbLatestTimeStamp=parseInt(i.payload.ct);break}}return n}M.Helper.displayLog("Notication Log : data not found in db!")}).catch(function(e){M.Helper.displayLog(e)})];case 1:return[2,e.sent()]}})})},n.prototype.segmentParser=function(e){var t,o=["px","dev","lci","lvi"];for(t in e){if(!(-1<o.indexOf(t)))return!1;if("dev"==t){if(-1==e.dev[0].indexOf(P.Config.global.deviceType))return M.Helper.displayLog("Device segment validation failed"),!1}else{if("px"==t&&!this.isUserPropertySegmentValidated(e))return M.Helper.displayLog("User property segment validation failed"),!1;if(("lci"==t||"lvi"==t)&&!this.isDateTimeSegmentValidated(e,t))return M.Helper.displayLog("Last click segment validation failed"),!1}}return!0},n.prototype.isUserPropertySegmentValidated=function(a){var e,s={yes:!0,no:!1},l=a.px,c=this;for(e in l){var t=function(t){for(var e=l[t],o=0,i=e.values;o<i.length;o++){var n=i[o],r=n.v;if(1==e.multi)switch(n.op){case"contains":case"equals":if(r.every(function(e){return-1==H.Storage.getConfigLocal(t,T.KeyMapper.USER_PROPERTY).indexOf(e)}))return{value:!1};break;case"does not contain":case"not contains":case"not equals":if(r.every(function(e){return-1<H.Storage.getConfigLocal(t,T.KeyMapper.USER_PROPERTY).indexOf(e)}))return{value:!1}}else{if("datetime"==e.type)return{value:c.isDateTimeSegmentValidated(a,"px",t)};switch(r="boolean"==e.type?s[r]:r,n.op){case"equals":if(H.Storage.getConfigLocal(t,T.KeyMapper.USER_PROPERTY)!=r)return{value:!1};break;case"not equals":if(H.Storage.getConfigLocal(t,T.KeyMapper.USER_PROPERTY)==r)return{value:!1};break;case"greater than":if(H.Storage.getConfigLocal(t,T.KeyMapper.USER_PROPERTY)<=r)return{value:!1};break;case"less than":if(H.Storage.getConfigLocal(t,T.KeyMapper.USER_PROPERTY)>=r)return{value:!1}}}}}(e);if("object"==typeof t)return t.value}return!0},n.prototype.isDateTimeSegmentValidated=function(e,t,o){var i,e=e[t],n="lci"==t?P.Config.store.lastClick:P.Config.store.lastView;if("px"==t)try{var r=H.Storage.getConfigLocal(o,T.KeyMapper.USER_PROPERTY);if(!r)return!1;for(var n=new Date(r).getTime(),a=[],s=null===(i=e[o])||void 0===i?void 0:i.values,l=0,c=s;l<c.length;l++){var p=c[l];a.push(p.v)}e=a}catch(e){}if(!n)return M.Helper.displayLog("Last click or visit key not found in db"),!1;for(var d=0,u=e;d<u.length;d++){var g,f=!!(g=u[d]).d1&&new Date(g.d1),y=!!g.d2&&new Date(g.d2),m=g.days||!1,b=g["min-days"]||!1,S=g["max-days"]||!1,h=(h=new Date(n)).toLocaleDateString(),C=new Date,v=new Date;switch(M.Helper.displayLog("Last Click Visit Operation: ",g.op),g.op){case"before":if(n>f.getTime())return!1;break;case"after":if(n<f.getTime())return!1;break;case"on":if(h!=f.toLocaleDateString())return!1;break;case"between":if(f.getTime()>n&&n<y.getTime())return!1;break;case"in the past":if(v.setDate(C.getDate()-m),n<v.getTime())return!1;break;case"was exactly":if(v.setDate(C.getDate()-m),h!=v.toLocaleDateString())return!1;break;case"today":if(h!=C.toLocaleDateString())return!1;break;case"relative between":var w=v.setDate(C.getDate()-b),E=v.setDate(C.getDate()-S);if(n<w&&n<E)return!1;break;default:return!1}}return!0},n.prototype.readLastClickVisitFromDb=function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,new Promise(function(t,e){l.IndexedDB.getIndexDBData("swEvents","click").then(function(e){e?(M.Helper.displayLog("Last click found from db: ",e),P.Config.store.lastClick=1e3*e.timestamp):M.Helper.displayLog("Last click  not found ")}).catch(function(e){M.Helper.displayLog(e)}).finally(function(){l.IndexedDB.getIndexDBData("swEvents","view").then(function(e){e?(P.Config.store.lastView=1e3*e.timestamp,t(P.Config.store.lastView)):(M.Helper.displayLog("Last view not found"),t(!1))}).catch(function(e){M.Helper.displayLog(e),t(!1)})})})]})})},n.prototype.sortNotifications=function(e){var t={payload:e};if(-1<this.cidsList.indexOf(e.id))return e.r,void e.id;if(t&&e.hasOwnProperty("r")){if(16<=e.r.length)return void M.Helper.displayLog("Excluding plalybook & subid notifications");t.key=parseInt(e.r),t.clickedAt=!1,t.receivedAt=Date.now()}return-1<this.ridsList.indexOf(parseInt(e.r))?void 0:(this.ridsList.push(parseInt(e.r)),this.cidsList.push(e.id),this.notificationShowList.push(t),this.notificationShowList.sort(function(e,t){return t.payload.ct-e.payload.ct}),t)},n.prototype.setDataIntoDB=function(e){e.fetched=1,l.IndexedDB.addUpdateToTable("notificationLog",e).then(function(e){M.Helper.displayLog(e)}).catch(function(e){M.Helper.displayLog(e)})},n.prototype.setPayloadData=function(e,o){(e="number"==typeof e?[e]:e).forEach(function(t){l.IndexedDB.getIndexDBData("notificationLog",t).then(function(e){e.hasOwnProperty("clickedAt")&&!e.clickedAt&&o.hasOwnProperty("clickedAt")?(e.clickedAt=o.clickedAt,l.IndexedDB.addUpdateToTable("notificationLog",e).then(function(e){}).catch(function(e){M.Helper.displayLog("Mark as read Error "+t,e)})):M.Helper.displayLog("Notication Log : data not found in db!")}).catch(function(e){M.Helper.displayLog(e)})})},n.prototype.sortNotificationsFromIdb=function(o){var i=this;this.notificationTempQ.forEach(function(e,t){-1==i.notificationShowKeyList.indexOf(e.key)&&e.payload.ct>=o&&(i.notificationShowKeyList.push(e.key),i.notificationShowList.push(e))}),this.notificationShowList.sort(function(e,t){return t.payload.ct-e.payload.ct})},n.prototype.storeSegmentIntoIdb=function(e){for(var t=0,o=e;t<o.length;t++){var i=o[t],n=!1;1!=(n=!i.a||this.segmentParser(M.Helper.parseToJSON(i.a))?!0:n)||(i=this.sortNotifications(i.p))&&this.setDataIntoDB(i)}},n);function n(e){this.minimumNotificationToShow=e,this.status={NO_MORE_NOTIFICATIONS:"No more notifications available",ALREADY_IN_PROGRESS:"Older request already in progress",NULL_NOTIFICATION_SENT:"Null: No notifications sent",SUCCESS:"success",FAILED:"failed"},this.isNoNotification=!0,this.ridsList=[],this.cidsList=[],this.canLoadMore=!0,this.isNewsLoading=!1,this.dbLatestTimeStamp=0,this.notificationTempQ=[],this.notificationShowKeyList=[],this.currentJsonFileIndex=0,this.notificationShowList=[]}t.FeedHelper=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mediation=void 0;var n=o(0),a=o(1),i=o(5),o=(r.init=function(){},r.loadAd=function(){return new Promise(function(r,e){var t="https://adgebra.co.in/AdServing/PushNativeAds?pid=5826&mkeys=&dcid=9&nads=1&deviceId=1&url=nr-wtskora.com&pnToken=ERBqGdwyZH62a3Lrr8Pq&clientFlag=true&currency=usd&decode=true&uid="+a.Helper.getCurrentUUID();setTimeout(function(){r(!1)},2e3),i.HttpRequest.get(t,function(e,t){200!=t&&r(!1);try{var o=JSON.parse(e);if(o[0]){var i=o[0];if(i.notificationMessage&&i.imageUrl&&i.trackerUrl){var n={t:i.notificationMessage,mi:i.icon,l:i.trackerUrl,isAd:1};return void r(n)}}}catch(e){a.Helper.displayLog("Error to loadAd:",e)}r(!1)})})},r.loadGAd=function(e,t){var o=t.getElementsByClassName("iz_osn_smContainer");o[e].innerHTML="";var i=document.createElement("div");i.id="iz-osn-ads",i.setAttribute("style","margin: 0 auto;"),o[e].appendChild(i);var n=document.createElement("script");n.textContent="\n            window.googletag = window.googletag || {cmd: []};\n            googletag.cmd.push(function() {\n                googletag.defineSlot('/22809537726/wtskora/wtskora_osn', [[320, 100], [300, 100]], 'iz-osn-ads').addService(googletag.pubads());\n                googletag.pubads().set('page_url', 'https://wtskora.com/');\n                googletag.enableServices();\n                googletag.display('iz-osn-ads')\n          });\n        ";i=document.createElement("script");i.setAttribute("src","https://securepubads.g.doubleclick.net/tag/js/gpt.js"),i.onload=function(){o[e].appendChild(n)},t.body.appendChild(i)},r.loadGPTAd=function(e){if("48591"==n.Config.client&&1!=this.GPTLoaded){this.GPTLoaded=!0;try{var t=e.getElementById("iz-news-hub-ads-container");t.innerHTML="";var o=document.createElement("div");o.id="iz-nh-ads",t.appendChild(o);var i=e.getElementById("iz-nh-ads");a.Helper.addExternalJS("https://securepubads.g.doubleclick.net/tag/js/gpt.js").then(function(){var e=document.createElement("script");e.textContent="\n                window.googletag = window.googletag || {cmd: []};\n                googletag.cmd.push(function() {\n                googletag.defineSlot('/22809537726/punjabkesari/punjabkesari_newshub_infeed',[[300, 250], [320, 100], [320, 50], [300, 100], [336, 280]], 'iz-nh-ads').addService(googletag.pubads());\n                googletag.pubads().set( 'page_url' , 'https://punjabkesari.in/' );\n                    googletag.enableServices();\n                    googletag.display('iz-nh-ads')\n            });\n            ",i.appendChild(e)})}catch(e){}}},r.GPTLoaded=!1,r);function r(){}t.Mediation=o},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(o,t){function i(e){try{r(l.next(e))}catch(e){t(e)}}function n(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?o(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}r((l=l.apply(e,a||[])).next())})},n=this&&this.__generator||function(o,i){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(o,s)}catch(e){t=[6,e],r=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationFeed=void 0;var r=o(0),a=o(17),s=o(1),o=(l.init=function(t){return i(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return r.Config.newsHub.allowFeed?(l.feedCallback=t,l.isInititated?[3,2]:(l.isInititated=!0,this.apiFeed=new a.FeedHelper(l.minimumNotifications),[4,this.apiFeed.setup()])):[2];case 1:e.sent(),e.label=2;case 2:return l.handler(),[2]}})})},l.handler=function(){return i(this,void 0,void 0,function(){var t,o,i;return n(this,function(e){switch(e.label){case 0:return[4,this.apiFeed.getNotifications()];case 1:switch(t=e.sent(),i=t.data,t=t.status){case this.apiFeed.status.NO_MORE_NOTIFICATIONS:o=1;break;case this.apiFeed.status.NULL_NOTIFICATION_SENT:o=2;break;case this.apiFeed.status.ALREADY_IN_PROGRESS:o=3}return i=this.dataParser(i),this.respondToCallback(t==this.apiFeed.status.SUCCESS,i,t,o),[2]}})})},l.respondToCallback=function(e,t,o,i){void 0===t&&(t=[]),"function"==typeof this.feedCallback&&l.feedCallback(this.getResponseFormate(e,t,o,i)),this.feedCallback=void 0},l.getResponseFormate=function(e,t,o,i){o={success:e=void 0===e?!1:e,data:t=void 0===t?[]:t,response:o};return i&&(o.errorCode=i),o},l.dataParser=function(e){var i=[];return e.forEach(function(e){var t=e.payload,o=e.receivedAt,e=s.Helper.replaceQueryParam(t.ln,"utm_source","izooto"),e=s.Helper.replaceQueryParam(e,"utm_medium","notification_feed"),o={title:t.t,message:t.m,bannerImage:t.bi||"",icon:t.i,landingUrl:e,createdAt:t.ct||o};i.push(o)}),i},l.statusText={EMPTY:"No more notifications available",SUCCESS:"Notification feed fetched successfully",FAIL:"Null: No notifications sent"},l.minimumNotifications=10,l.isInititated=!1,l);function l(){}t.NotificationFeed=o},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(o,t){function i(e){try{r(l.next(e))}catch(e){t(e)}}function n(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?o(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}r((l=l.apply(e,a||[])).next())})},n=this&&this.__generator||function(o,i){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(o,s)}catch(e){t=[6,e],r=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Notification=void 0;var s=o(4),l=o(1),c=o(0),r=o(9),a=o(3),p=o(8),d=o(2),u=o(6),o=(g.init=function(){return i(this,void 0,void 0,function(){var t,o;return n(this,function(e){switch(e.label){case 0:return(c.Config.notification.eventsToSync=c.Config.notification.eventsToSync.map(function(e){return s.NotificationHelper.syncableEvents[e]}),t=c.Config.notification.windowType,0!=c.Config.izootoStatus&&c.Config.notification.isSupported)?[3,1]:(c.Config.notification.isSupported||s.NotificationHelper.sendEvent(d.KeyMapper.BROWSER_UNSUPPORTED),l.Helper.displayLog(c.Config.brandingPartner+" notification disabled!"),[2]);case 1:return[4,s.NotificationHelper.setSubscriberIdFromDb()];case 2:if(e.sent(),6==t){if(window.top!=window.self)return s.NotificationHelper.noRootHandler(),[2]}else{if(5==t)return r.Debugger.verifyIzootoIntegration(),[2];if(4==t&&self!=top)return s.NotificationHelper.sendPermissionStatusFromFrame(),[2];if(2==t&&self!=top)return s.NotificationHelper.removeSubscriptionInFrame(),[2];if(1==t)return s.NotificationHelper.nativeHandler(),[2]}if(!t){if(window.self!=window.top)return p.Queue.sync(),[2];if(""!=c.Config.notification.allowedDomain&&(o=c.Config.global.locationProtocol+"//"+document.location.hostname,c.Config.notification.allowedDomain.indexOf(o)<0&&!t))return[2];u.GoogleAnalytics.initUsingConfig()}if(c.Config.store.isNotificationDisabledManually)return l.Helper.displayLog("Notfication prompt handled by site developer!"),[2];if(3==s.NotificationHelper.getPermissionStatusFromStorage())return s.NotificationHelper.sendEvent(d.KeyMapper.ALREADY_UNSUBSCRIBED),[2];s.NotificationHelper.promptHandler(),e.label=3;case 3:return[2]}})})},g.optinCallback=function(e){try{"function"==typeof e&&(c.Config.notification.optinModule=new e,null!=c.Config.notification.optinModule.data&&(window.izOptinDesign=c.Config.notification.optinModule.data),s.NotificationHelper.showOptin())}catch(e){}},g.closeDialog=function(e){var t;try{a.Storage.removeStorage(d.KeyMapper.ACTIVE_PROMPT),e=1===e?d.KeyMapper.OPTIN_ALLOWED:d.KeyMapper.OPTIN_CLOSED,s.NotificationHelper.sendEvent(e),null!==(t=document.getElementById("izmiddle-box"))&&void 0!==t&&t.remove()}catch(e){l.Helper.displayLog("Error removing div : ",e)}},g.openPopup=function(e){var t,o,i,n,r,a;(e=void 0===e?!1:e)&&this.closeDialog(1),2!=c.Config.global.browserType?c.Config.notification.isSdkHttps&&"https:"==c.Config.global.locationProtocol?s.NotificationHelper.nativeHandler():(l.Helper.addMsgReciever(s.NotificationHelper.msgReciever),r=null!=window.screenLeft?window.screenLeft:screen.left,a=null!=window.screenTop?window.screenTop:screen.top,t=window.innerWidth||document.documentElement.clientWidth||screen.width,o=window.innerHeight||document.documentElement.clientHeight||screen.height,n=i=200,e=c.Config.notification.promptType,1!==c.Config.notification.promptType&&2!=c.Config.notification.promptType||(e=1,n=i=500),r=t/2-i/2+r,a=o/2-n/2+a,c.Config.notification.hidePopup&&0===c.Config.notification.promptType&&(n=i=100,r=a=1e4),e=c.Config.notification.sourceOrigin+"?action=prompt&izpt="+e,1!=c.Config.notification.fullPopUp||0==c.Config.notification.promptType?(window.open(e,c.Config.brandingPartner+" Subscription","scrollbars=yes, width="+i+", height="+n+", top="+a+", left="+r),s.NotificationHelper.sendEvent(d.KeyMapper.POPUP_OPEN)):window.open(e,c.Config.brandingPartner+" Subscription")):s.NotificationHelper.requestSafariPermission()},g);function g(){}t.Notification=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Shopify=void 0;var c=o(0),p=o(1),d=o(3),u=o(5),g=o(4),a=o(7),f=o(2),o=(y.init=function(e){window._izooto[y._izLastVariantCookieName]="";var t,o=null!=e?e:!1;if(2==c.Config.notification.isShopify)return y.shopifyCart(),void p.Helper.displayLog("Old Shopify");1==c.Config.notification.isShopify&&(p.Helper.displayLog("New Shopify"),e=5*Math.random(),(t=new XMLHttpRequest).addEventListener("load",function(e){y.shopifyCartTracker(t,o)}),t.open("GET","/cart.js?"+e),t.send()),y.resetProductCookie(),y.checkAndSendShopifyEvents(!0)},y.shopifyCartTracker=function(e,t){var o="iz_sh_cart_v2";p.Helper.displayLog(e),p.Helper.displayLog("Purge :"+t),i=p.Helper.parseToJSON(e.responseText),p.Helper.displayLog(i);i.items;var i,n=i.token,r=d.Storage.getStorage(o);null!=n&&""!=n&&((e=new Date).setTime(e.getTime()+864e5),e.toUTCString(),n==r&&!t||(i=d.Storage.getStorage(f.KeyMapper.PUSH_TOKEN),e=0,i=p.Helper.parseToJSON(i),1<Object.keys(i).length&&(e=1),p.Helper.displayLog("[Mapper hit]"),r=p.Helper.getEndpoint("ShopifyMapper"),t=d.Storage.getStorage(f.KeyMapper.PUSH_TOKEN),t=p.Helper.parseToJSON(t),t="bkey="+p.Helper.getCurrentUUID(),1==e&&(t=t+"&auth="+i.keys.auth+"&pk="+i.keys.p256dh),t+="&btype="+p.Helper.getBrowserType(),t+="&dtype="+p.Helper.getDeviceType(),t+="&pid="+c.Config.client,t+="&shopify_token="+n,c.Config.global.browserName!=f.KeyMapper.BROWSER_SAFARI&&(t+="&"+p.Helper.endPointParamExtract(d.Storage.getStorage(f.KeyMapper.PUSH_TOKEN))),t+="&pte="+c.Config.notification.subscriptionType,u.HttpRequest.post(r,{data:t+="&custom_topic=custom-js-mapper"},function(){}),a.CookieStorage.setCookie(o,n,1)))},y.shopifyFix=function(){try{var e=document.createElement("img");e.style.width="0px",e.style.height="0px",e.src=document.location.protocol+"//"+document.location.hostname+c.Config.notification.manifest}catch(e){}},y.shopifyCart=function(){var e=d.Storage.getStorage("cart");void 0!==e&&""!==e&&(e=-1!=e.indexOf("=")?e.split("=")[1]:e)!==d.Storage.getStorage("iz_sh_cart")&&"ckout="!=e&&(a.CookieStorage.setCookie("iz_sh_cart",e),window._izq.push(["event","add_to_cart",{cart_id:e}]))},y.resetProductCookie=function(){window._izooto[y._izLastVariantCookieName]="",a.CookieStorage.setCookie(y._izLastVariantCookieName,"")},y.checkIfVariantChanged=function(){var e=""==window._izooto[y._izLastVariantCookieName]?a.CookieStorage.getCookie(y._izLastVariantCookieName):window._izooto[y._izLastVariantCookieName],t=window.ShopifyAnalytics.meta.selectedVariantId;return 1!=y.sentShopifyProduct&&(void 0===t?(y.sentShopifyProduct=1,!0):t!=e&&(window._izooto[y._izLastVariantCookieName]=t,a.CookieStorage.setCookie(y._izLastVariantCookieName,t),!0))},y.listenToProductVariant=function(e){y.checkIfVariantChanged()&&e(),setTimeout(function(){y.listenToProductVariant(e)},y._izProductVariantModifiedCheckInterval)},y.getShopifyModule=function(){try{if(o=window.ShopifyAnalytics.meta.page.pageType)return o}catch(e){c.Config.debug&&console.warn("ShopifyAnalytics not available, parsing URL")}var e=location.hostname,t=location.pathname.split("/"),o=t[1],t=t[2];if(""===o)return y._izShopifyModules.storeSections.home;if(o===y._izShopifyModules.storeRoots.cart)return y._izShopifyModules.storeRoots.cart;if(o===y._izShopifyModules.storeRoots.account&&t===y._izShopifyModules.storeRoots.orders)return y._izShopifyModules.storeRoots.orders;if("account"===o&&!o)return y._izShopifyModules.storeSections.orders;if("checkout.shopify.com"===e||"checkouts"===t)return y._izShopifyModules.storeSections.checkout;if(void 0!==window.__st&&window.__st.s){t=window.__st.partZero.split("-")[0];return"collections"===t?y._izShopifyModules.storeSections.collection:"products"===t?y._izShopifyModules.storeSections.product:void 0}},y.sendShopifyProductViewEvent=function(){var e=location.pathname,s=window.ShopifyAnalytics.meta.selectedVariantId,e=e.split("/"),l=e[e.length-1],e=y._izAjaxApi.products+l;u.HttpRequest.get(e+="?izreq=product",function(e){try{var t=JSON.parse(e)}catch(e){p.Helper.displayLog("Could not fetch data from product API")}if("object"==typeof t&&""!=d.Storage.getStorage(f.KeyMapper.PUSH_TOKEN)){var o,i=t.product,n=i.variants,e=d.Storage.getStorage(f.KeyMapper.PUSH_TOKEN),t=p.Helper.getEndpoint("shopifyAPI")+"?p=p",r="pid="+c.Config.client;for(o in r+=g.NotificationHelper.getSubscriptionParameters(e),r+="&btype="+p.Helper.getBrowserType(),r+="&pte="+c.Config.notification.subscriptionType,r+="&custom_topic="+y._izShopifyTopics.productView,r+="&product_id="+i.id.toString(),r+="&product_title="+encodeURIComponent(i.title),r+="&product_handle="+encodeURIComponent(l),r+="&product_page="+encodeURIComponent(window.location.href),r+="&product_type="+i.product_type,p.Helper.displayLog(i),null!=i.image&&null!=i.image.src&&(r+="&product_image="+i.image.src),n){var a=n[o];if(a.id==s){r+="&product_price="+a.price;break}}u.HttpRequest.post(t,{data:r},function(e){p.Helper.displayLog(e)})}},void 0,{Accept:"application/json"})},y.sendShopifyCollectionViewEvent=function(){var n,e=y._izShopifyModules.storeSections.collection+"s",t=location.pathname.split("/"),e=t.indexOf(e);-1==e?p.Helper.displayLog("Unable to identify collection"):(n=t[e+1],y._izEventNames.collectionAll!=n?(e=y._izAjaxApi.collections+n,u.HttpRequest.get(e+="?izreq=collections",function(e){var t,o,i;try{i=JSON.parse(e)}catch(e){p.Helper.displayLog("Could not fetch data from collection API")}"object"==typeof i&&""!=d.Storage.getStorage(f.KeyMapper.PUSH_TOKEN)&&(t=i.collection,o=p.Helper.getEndpoint("shopifyAPI")+"?p=p",e=d.Storage.getStorage(f.KeyMapper.PUSH_TOKEN),i="pid="+c.Config.client,i+=g.NotificationHelper.getSubscriptionParameters(e),i+="&btype="+p.Helper.getBrowserType(),i+="&pte="+c.Config.notification.subscriptionType,i+="&custom_topic="+y._izShopifyTopics.collectionView,i+="&collection_id="+t.id.toString(),i+="&collection_handle="+encodeURIComponent(n),i+="&collection_title="+encodeURIComponent(t.title),i+="&collection_page="+encodeURIComponent(window.location.href),null!=t.image&&null!=t.image.src&&(i+="&collection_image="+t.image.src),u.HttpRequest.post(o,{data:i},function(e){p.Helper.displayLog(e)}))},void 0,{Accept:"application/json"})):p.Helper.displayLog("Ignoring collection view event for:"+y._izEventNames.collectionAll))},y.checkAndSendShopifyEvents=function(e){var t=y.getShopifyModule();switch(p.Helper.displayLog("Detected shopify module : ",t),t){case y._izShopifyModules.storeSections.collection:y.sendShopifyCollectionViewEvent();break;case y._izShopifyModules.storeSections.product:null!=e&&e?y.listenToProductVariant(y.sendShopifyProductViewEvent):y.sendShopifyProductViewEvent()}},y._izShopifyModules={storeSections:{home:"home",collection:"collection",product:"product",cart:"cart",checkout:"checkout",order:"order",orders:"orders"},storeRoots:{cart:"cart",account:"account",orders:"orders"}},y._izEventNames={productView:"product_viewed",collectionView:"collection_viewed",collectionAll:"all"},y._izAjaxApi={products:"/products/",collections:"/collections/"},y._izShopifyTopics={productView:"product/view",collectionView:"collection/view"},y._izLastVariantCookieName="iz_last_sh_variant",y._izProductVariantModifiedCheckInterval=5e3,y.sentShopifyProduct=0,y);function y(){}t.Shopify=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GDPR=void 0;var i=o(0),n=o(1),r=o(4),a=o(5),s=o(3),l=o(8),c=o(2),o=(p.init=function(){try{null!=i.Config.notification.gdprPrompt&&self==top&&(i.Config.notification.gdprPrompt.title=null!=i.Config.notification.gdprPrompt.title&&""!=i.Config.notification.gdprPrompt.title?i.Config.notification.gdprPrompt.title:"In order to send relevant and personalized notifications to you, we would like to capture your location and website activity.",i.Config.notification.gdprPrompt.btn2Txt=null!=i.Config.notification.gdprPrompt.btn2Txt&&""!=i.Config.notification.gdprPrompt.btn2Txt?i.Config.notification.gdprPrompt.btn2Txt:"Agree",i.Config.notification.gdprPrompt.btn1Txt=null!=i.Config.notification.gdprPrompt.btn1Txt&&""!=i.Config.notification.gdprPrompt.btn1Txt?i.Config.notification.gdprPrompt.btn1Txt:"Not Now")}catch(e){}var e=s.Storage.getConfigLocal(c.KeyMapper.GDPR_CONSENT);1!=e&&3!=e?2!=e?1==i.Config.notification.gdprPromptStatus&&p.getGdprLocation():i.Config.notification.isGdprAllowed=0:i.Config.notification.isGdprAllowed=1},p.closeGdprDialog=function(e){var t;try{null!==(t=document.getElementById("izgdpr-box"))&&void 0!==t&&t.remove()}catch(e){}},p.gdprAllow=function(){p.closeGdprDialog(),s.Storage.setConfigLocal(c.KeyMapper.GDPR_CONSENT,1),i.Config.notification.isGdprAllowed=1,l.Queue.sync(),p.sendGdprStatus(1)},p.sendGdprStatus=function(e){try{var t=n.Helper.getEndpoint("gdprStatusUrl"),o=r.NotificationHelper.getDeviceParameters(),i=s.Storage.getStorage(c.KeyMapper.PUSH_TOKEN);o+=r.NotificationHelper.getSubscriptionParameters(i),o+="&gs="+e,r.NotificationHelper.getExtraParameterToSync().then(function(e){o+=e,a.HttpRequest.post(t,{data:o},function(){})})}catch(e){}},p.getGdprLocation=function(){a.HttpRequest.get(n.Helper.getEndpoint("gdprLocationUrl"),function(e,t){200==t&&(1==(e=n.Helper.parseToJSON(e)).status?p.loadGdprOptin():s.Storage.setConfigLocal(c.KeyMapper.GDPR_CONSENT,3))})},p.loadGdprOptin=function(){var e=i.Config.notification.gdprPromptType,e=i.Config.notification.optInSrc+"gdpr/"+e+".js";n.Helper.addExternalJS(e)},p.gdprCallback=function(e){try{"function"==typeof e&&(i.Config.notification.gdprModule=new e,null!=i.Config.notification.gdprModule.data&&(window.izGdprDesign=i.Config.notification.gdprModule.data),p.show())}catch(e){}},p.show=function(){null!=window.izGdprDesign&&(i.Config.notification.gdprDialogDesign=window.izGdprDesign),i.Config.notification.gdprDialogDesign=r.NotificationHelper.loadDesign(i.Config.notification.gdprPrompt,i.Config.notification.gdprDialogDesign),n.Helper.addHTML("div",i.Config.notification.gdprDialogDesign,"izgdpr-box")},p.gdprDisallow=function(){p.closeGdprDialog(),s.Storage.setConfigLocal(c.KeyMapper.GDPR_CONSENT,2),p.sendGdprStatus(2)},p);function p(){}t.GDPR=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TabAbandonments=void 0;var n=o(4),a=o(1),r=o(0),s=o(3),l=o(2),o=(c.init=function(){c.timerInstance=0,c.focused=!0,1==r.Config.tabAbandonment.status&&(c.interval=setInterval(function(){document.hasFocus()?c.focused||c.onFocus():c.focused&&c.onBlur()},1e3))},c.run=function(){c.reset(),a.Helper.displayLog("Tab Abandonment : Initialized");var e={url:window.location.href};s.Storage.setConfigLocal(l.KeyMapper.TAB_ABANDONMENT,JSON.stringify(e))},c.onBlur=function(){c.focused=!1,c.run(),c.timerInstance=setInterval(function(){var t=s.Storage.getConfigLocal(l.KeyMapper.TAB_ABANDONMENT);r.Config.tabAbandonment.counter++;try{t=JSON.parse(t)}catch(e){t={}}a.Helper.displayLog("TabAbandonment counter : ",r.Config.tabAbandonment.counter),t.url!=window.location.href?c.reset():r.Config.tabAbandonment.counter==r.Config.tabAbandonment.timeout&&(c.pushNotification(),c.reset())},1e3),a.Helper.displayLog("Ta : blurred")},c.onFocus=function(){c.focused=!0,c.reset(),a.Helper.displayLog("Ta : focused")},c.reset=function(){a.Helper.displayLog("Tab Abandonment : timer reset"),r.Config.tabAbandonment.counter=0,clearInterval(c.timerInstance)},c.pushNotification=function(){var e,t,o=r.Config.tabAbandonment.pushTimeout,i=c.getPayload();""!=i.id&&""!=i.rid&&(e=s.Storage.getConfigLocal(l.KeyMapper.TAB_ABANDONMENT_PUSH,l.KeyMapper.SYNC),t=a.Helper.getTimeDiff(e,!0),""!=e&&t<o?c.reset():(1==r.Config.notification.httpsNoRoot?(o=document.getElementById("izSubFrame"),a.Helper.postMessage(o,"sendLocalNotification",i)):n.NotificationHelper.sendLocalNotification(i),s.Storage.updateLastSync(l.KeyMapper.TAB_ABANDONMENT_PUSH),n.NotificationHelper.syncNotificationView(i),n.NotificationHelper.syncNotificationSent(i)))},c.getPayload=function(){var e={};e.key=r.Config.client,e.title="You were reading <~[@article_title]~>",e.message="Pick up where you left off",e.icon="https://cdnimg.izooto.com/icons/4/JD-12-128.png",e.banner="<~[@featured_image]~>",e.link="<~[@last_visited_url]~>",e.tag="tabAbandonment",e.reqInt=!0,e.id="",e.rid="",e.viewFlag=1,e.clickFlag=1,e.sysEvents=0,e.domainNum=0;var t=window.location.href;t.indexOf("utm_campaign=")<0&&(e.link+=t.includes("?")?"&":"?",e.link+="utm_source=izooto&utm_medium=push_notifications&utm_campaign=recover_abandoned_tab&utm_term=notification1");var o,i=r.Config.tabAbandonment.data;for(o in e)i.hasOwnProperty(o)||(i[o]=e[o]);return i=c.getFilterData(i)},c.urlUtmHandler=function(e,t){var o,i,n=t.split("&"),r={};for(o in n){var a=n[o].split("=");r[a[0]]=a[1]}for(i in e=new URL(e),r)e.searchParams.set(i,r[i]);return e.href},c.getFilterData=function(e){var t,o,i,n={},r=window.location.href;for(t in n.article_title=""!=a.Helper.getMetaValue("og:title")?a.Helper.getMetaValue("og:title"):a.Helper.getMetaValue("title"),n.featured_image=a.Helper.getMetaValue("og:image"),n.last_visited_url=r,e)"string"==typeof e[t]&&0<=e[t].indexOf("<~[@")&&(o=e[t].indexOf("<~[@"),i=e[t].indexOf("]~>"),"last_visited_url"==(o=e[t].substring(o+4,i))&&0<e[t].indexOf("utm_campaign")?(i=e[t].split("?"),e[t]=i[0],i=i[1],e[t]=e[t].replace("<~[@"+o+"]~>",n[o]),e[t]=c.urlUtmHandler(r,i)):e[t]=e[t].replace("<~[@"+o+"]~>",n[o]));return e},c);function c(){}t.TabAbandonments=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoDropOff=void 0;var i=o(0),n=o(1),o=(r.init=function(){i.Config.videoDropoff.status&&r.isCurrentUrlMatchingWith(i.Config.videoDropoff.allowedUrls)&&r.detectPlayer()},r.syncTrigger=function(e,t){window._izq.push(["trigger",e,t])},r.sendToApi=function(e){var t=0,o=r.playerState;if(0==o.length)o.push(e);else{for(var i=0;i<o.length;i++)if(o[i].playerId==e.playerId){if(o[i].status==e.status)return;o[i]=e,t=1;break}t||o.push(e)}var n={player_id:e.playerId,title:e.title,url:e.url,player:e.player_type,duration:e.duration.toString()};e.hasOwnProperty("thumbnail")&&(n.thumbnail=e.thumbnail);try{"started"==e.status?r.syncTrigger("video_started",n):"ended"==e.status&&r.syncTrigger("video_completed",{playerid:e.playerId})}catch(e){}},r.html5Payload=function(e,t){var o=[];o.status=e=void 0===e?"started":e,o.playerId=t.id,o.title=document.title,o.url=location.href,o.player_type="html5",o.duration=t.duration,r.sendToApi(o)},r.html5Handler=function(){var e=document.querySelectorAll("video");e&&e.forEach(function(e){var t;e.id||(t=r.generateRandomString("iz-video-",7),e.setAttribute("id",t)),e.addEventListener("playing",function(){r.html5Payload("started",e)}),e.addEventListener("ended",function(){r.html5Payload("ended",e)})})},r.ytPayload=function(e,t){var o=[];o.status=e=void 0===e?"started":e,o.playerId=t.getIframe().id,o.title=t.playerInfo.videoData.title||document.title;e="https://img.youtube.com/vi/"+t.playerInfo.videoData.video_id+"/0.jpg";o.thumbnail=e,o.url=location.href,o.player_type="youtube",o.duration=t.playerInfo.duration,r.sendToApi(o)},r.isValidYtUrl=function(e){return new RegExp("^https://(?:www.)?youtube.com/embed/[A-z0-9]+").test(e)},r.initYtPlayer=function(e){if(window.YT,0,window.YT.get(e)){var t=window.YT.get(e);return t.addEventListener("onStateChange",r.onYtPlayerStateChange),t}return new window.YT.Player(e,{events:{onStateChange:r.onYtPlayerStateChange}})},r.onYtPlayerStateChange=function(e){switch(e.data){case window.YT.PlayerState.PLAYING:var t="started";r.ytPayload(t,e.target);break;case window.YT.PlayerState.ENDED:t="ended";r.ytPayload(t,e.target)}},r.fixPlayerReference=function(i){setInterval(function(){for(var e=0;e<i.length;e++){var t=i[e].getIframe(),o=r.getClosureKeyName(i[e]);i[e][o]!==window.YT.get(t.id)[o]&&(i[e]=window.YT.get(t.id),i[e].addEventListener("onStateChange",r.onYtPlayerStateChange))}},1e3)},r.fixYtEnableJsApi=function(e){var t=new URL(e.src);""==n.Helper.getParamFromUrl(e.src,"enablejsapi")?(t.searchParams.set("enablejsapi","1"),e.setAttribute("src",t)):null==n.Helper.getParamFromUrl(e.src,"enablejsapi")&&(t.searchParams.append("enablejsapi","1"),e.setAttribute("src",t))},r.fixYtOrigin=function(e){var t=new URL(e.src);""==n.Helper.getParamFromUrl(e.src,"origin")?(t.searchParams.set("origin",window.location.origin),e.setAttribute("src",t)):null==n.Helper.getParamFromUrl(e.src,"origin")&&(t.searchParams.append("origin",window.location.origin),e.setAttribute("src",t))},r.isJsApiEnabled=function(e){return null!=n.Helper.getParamFromUrl(e,"enablejsapi")},r.addYTApiScirptPromise=function(){return new Promise(function(e,t){var o,i,n=setInterval(function(){"object"==typeof window.YT&&"function"==typeof window.YT.get&&(clearInterval(n),e(!0))},1e3);void 0!==window.YT?e(!0):((o=document.createElement("script")).src="//www.youtube.com/player_api",(i=document.getElementsByTagName("script")[0]).parentNode.insertBefore(o,i))}).catch(function(e){})},r.ytHandler=function(){setInterval(function(){for(var e,t,i=document.querySelectorAll("iframe[src*='https://www.youtube.com/embed/']"),o=0;o<i.length;o++)r.isValidYtUrl(i[o].src)&&(i[o].hasAttribute("izplayer")||(i[o].setAttribute("izplayer","1"),i[o].id||(e=r.generateRandomString("iz-video-",7),i[o].setAttribute("id",e)),r.fixYtOrigin(i[o]),r.isJsApiEnabled(i[o].src)?function(t){var o=setInterval(function(){try{var e=window.YT.get(i[t].id);e&&(clearInterval(o),e.addEventListener("onStateChange",r.onYtPlayerStateChange),r.ytPlayerReference.push(e))}catch(e){}},1e3)}(o):(t=i[o],r.fixYtEnableJsApi(t),r.addYTApiScirptPromise().then(function(){var e=r.initYtPlayer(t.id);r.ytPlayerReference.push(e)}))));r.fixPlayerReference(r.ytPlayerReference)},1e3)},r.detectPlayer=function(){"complete"==document.readyState?r.html5Handler():window.addEventListener("load",function(){r.html5Handler()}),r.ytHandler()},r.isCurrentUrlMatchingWith=function(e){if(0==e.length)return 1;for(var t=0;t<e.length;t++)if(-1!=document.location.href.search(e[t]))return e[t],1;return 0},r.ytPlayerReference=[],r.playerState=[],r.generateRandomString=function(e,t){return void 0===t&&(t=7),(e=void 0===e?"":e)+Math.random().toString(36).substring(t)},r.getClosureKeyName=function(e){try{for(var t in e)if(-1!=t.search("closure_"))return t.toString()}catch(e){throw new Error("Please update keyName of player")}},r);function r(){}t.VideoDropOff=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRPSPlaybook=void 0;var i=o(0),n=o(1),r=o(14),a=o(3),s=o(2),l=o(4),o=(c.init=function(){i.Config.CRPSPlaybook.isPaidSubscriber,i.Config.CRPSPlaybook.status&&c.isSyncAllowed()&&c.sendNotification()},c.isSyncAllowed=function(){if(3<r.Session.getSessionCount()&&!i.Config.notification.windowType&&!i.Config.CRPSPlaybook.isPaidSubscriber){var e=a.Storage.getConfigLocal(s.KeyMapper.CRPS_PLAYBOOK,s.KeyMapper.SYNC);return e&&n.Helper.getDateDiffrenceFromPresent(e)<=c.reSendNotificationDays?(n.Helper.displayLog("Abort! Reader to paid subscriber last sync not expired!"),!1):!0}return!1},c.sendNotification=function(){var e=i.Config.CRPSPlaybook.data;e.viewFlag=1,e.clickFlag=1,e.sysEvents=0,e.domainNum=0,e.title&&e.message&&e.link&&e.rid&&e.key&&e.id?l.NotificationHelper.sendLocalNotification(e).then(function(){a.Storage.updateLastSync(s.KeyMapper.CRPS_PLAYBOOK),l.NotificationHelper.syncNotificationView(e),l.NotificationHelper.syncNotificationSent(e)}):n.Helper.displayLog("CRPS Playbook : "+s.KeyMapper.INVALID_PAYLOAD)},c.reSendNotificationDays=30,c);function c(){}t.CRPSPlaybook=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecommendArticle=void 0;var i=o(3),n=o(2),r=o(0),a=o(1),o=(s.init=function(){r.Config.recommendArticle.status&&"/"!=s.currentArticlePath&&s.isSyncAllowed()&&s.sync()},s.isSyncAllowed=function(){var e=new Date,t=i.Storage.getConfigLocal(n.KeyMapper.LAST_SYNC_OF_RECOMMEND_ARTICLE,n.KeyMapper.SYNC);if(!t)return!0;var o=new Date(t);if(e.getDate()!=o.getDate())return i.Storage.removeConfigLocal(n.KeyMapper.RECOMMEND_ARTICLE_SYNCED_PATH,n.KeyMapper.RECOMMEND_ARTICLE),!0;if(e.getTime()<e.setTime(t+1e3*s.recommendArticleExpire))return!1;t=i.Storage.getConfigLocal(n.KeyMapper.RECOMMEND_ARTICLE_SYNCED_PATH,n.KeyMapper.RECOMMEND_ARTICLE);return(t=a.Helper.parseToJSON(t)||[]).length<s.dailyArticleSyncLimit&&-1==t.indexOf(s.currentArticlePath)},s.sync=function(){var o=i.Storage.getConfigLocal(n.KeyMapper.RECOMMEND_ARTICLE_SYNCED_PATH,n.KeyMapper.RECOMMEND_ARTICLE);(o=a.Helper.parseToJSON(o)||[]).push(s.currentArticlePath);var e=[window.location.protocol,"//",window.location.host,window.location.pathname].join("");window._izq.push(["trigger",s.triggerName,{article_url:e},function(e,t){200==t&&(i.Storage.setConfigLocal(n.KeyMapper.RECOMMEND_ARTICLE_SYNCED_PATH,JSON.stringify(o),n.KeyMapper.RECOMMEND_ARTICLE),i.Storage.updateLastSync(n.KeyMapper.LAST_SYNC_OF_RECOMMEND_ARTICLE))}])},s.currentArticlePath=window.document.location.pathname,s.dailyArticleSyncLimit=2,s.triggerName="_article_read",s.recommendArticleExpire=7200,s);function s(){}t.RecommendArticle=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoSegment=void 0;var i=o(0),n=o(1),o=(r.init=function(){1==i.Config.autoSegmentStatus&&r.addCustomModuleConfig()},r.addCustomModuleConfig=function(){var e=i.Config.hashFileName;e?n.Helper.addExternalJS("https://cdn.izooto.com/scripts/custom/"+e+".js","izCustomModule",!0).then(r.customModuleHandler).catch(function(e){n.Helper.displayLog("Failed to add custom module script")}):n.Helper.displayLog(i.Config.brandingPartner+" hash file name not found!")},r.customModuleHandler=function(){try{var e=window._izootoCustomeModuleConfig||void 0;if(e){if(e.hasOwnProperty("autoSegmentMethod")&&1==i.Config.autoSegmentStatus)try{window._izootoCustomeModuleConfig.autoSegmentMethod=n.Helper.getParsedMethod(e.autoSegmentMethod),r.autoSegmentHandler(e.autoSegmentMethod)}catch(e){}}else n.Helper.displayLog("No any custom module found!")}catch(e){}},r.autoSegmentHandler=function(e){var t,o;"function"==typeof e&&(t=[],"string"==typeof(e=e())&&""!=e?t.push(e):t=e,Array.isArray(t)&&t.length?(o={},t.forEach(function(e){o[e]=!0}),window._izq.push(["userProfile",{add:o}])):n.Helper.displayLog("No segment found to sync!"))},r);function r(){}t.AutoSegment=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorage=void 0;var i=(n.isLocalStorageSupport=function(){return"localStorage"in window&&null!==window.localStorage},n.setLocalStorage=function(e,t){localStorage.setItem(e,t)},n.getLocalStorage=function(e){return localStorage.getItem(e)},n.removeLocalStorage=function(e){e&&localStorage.removeItem(e)},n);function n(){}t.LocalStorage=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdNetwork=void 0;var d=o(3),u=o(0),g=o(1),o=(f.getAdNetworkParam=function(e){void 0===e&&(e=!1),f.forceSyncAdNetwork=0;var t={},o="",i=d.Storage.getStorage("_ga"),n=d.Storage.getStorage("taboola global:user-id"),r=d.Storage.getStorage("OB-USER-TOKEN"),a=d.Storage.getStorage("mgMuidn"),s=d.Storage.getConfigLocal("gac"),l=d.Storage.getConfigLocal("tbc"),c=d.Storage.getConfigLocal("obc"),p=d.Storage.getConfigLocal("mgc");return n&&(t.tbc=n),r&&(t.obc=r),a&&(t.mgc=a),i&&1==u.Config.ga.syncCid&&(t.gac=i),(t.gac&&s!=i||n&&l!=n||r&&c!=r||a&&p!=a)&&(f.forceSyncAdNetwork=1),e?t:(0<Object.keys(t).length&&(o+="&"+g.Helper.objToParam(t)),o)},f.forceSyncAdNetwork=0,f);function f(){}t.AdNetwork=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExitIntent=void 0;var c=o(0),p=o(1),i=o(3),n=o(2),r=o(5),a=o(18),o=(d.init=function(){d.startTime=(new Date).getTime(),0!=c.Config.exitIntent.status?!c.Config.exitIntent.mobileAllowed&&1!=c.Config.global.deviceType||!c.Config.exitIntent.desktopAllowed&&1==c.Config.global.deviceType?p.Helper.displayLog("ExitIntent is disabled for this device"):0==c.Config.exitIntent.rid||0==c.Config.exitIntent.cid||c.Config.global.isFrame||""!=i.Storage.getConfigLocal(n.KeyMapper.EXITINTENT_DELAY)&&d.isDelayHandelar()||(c.Config.exitIntent.onExit&&d.exitIntentHandler(),0<c.Config.exitIntent.onDelay&&setTimeout(function(){d.initializeDialog(2)},1e3*c.Config.exitIntent.onDelay),0<c.Config.exitIntent.onScrollPercent&&d.scrollHandler()):p.Helper.displayLog("ExitIntent is disabled for this site:")},d.exitIntentHandler=function(){1==c.Config.global.deviceType&&document.addEventListener("mouseout",function(e){var t;(!(t=(null!=e!=e?e:window.event).relatedTarget||e.toElement)||"HTML"===t.nodeName)&&e.clientY<100&&d.initializeDialog(1)}),1<c.Config.global.deviceType&&d.browserTabHidden()},d.browserTabHidden=function(){document.addEventListener("visibilitychange",function(){document.hidden&&d.initializeDialog(1)})},d.scrollHandler=function(){var t=0;p.Helper.isScreenScrollable()&&document.addEventListener("scroll",function(){var e=window.pageYOffset||document.documentElement.scrollTop;t<e&&d.initializeDialogOnScrollPercent(),t=e<=0?0:e},!1)},d.initializeDialogOnScrollPercent=function(){var e=document.documentElement,t=document.body,o="scrollTop",i="scrollHeight",e=(e[o]||t[o])/((e[i]||t[i])-e.clientHeight)*100;Math.round(e)>=c.Config.exitIntent.onScrollPercent&&d.initializeDialog(3)},d.showAd=function(t){d.adNotificationNo=t+2,setTimeout(function(){var e;a.Mediation.loadGAd(t,null===(e=window.document.querySelector("#iz-osn-frame"))||void 0===e?void 0:e.contentDocument)},200)},d.showDialogBox=function(e,t){try{var o=d.classPrefix+"heading",i=d.classPrefix+"card";document.getElementsByClassName(i)[0].style.borderTopColor=c.Config.exitIntent.bgColor;var n=document.getElementsByClassName(o)[0];n.style.color=c.Config.exitIntent.titleColor,n.innerHTML=c.Config.exitIntent.title,p.Helper.izootoBrandingHandler(),p.Helper.setHref("iz-osn-branding-text","https://www.izooto.com/campaign/getting-started-with-izooto?utm_source=referral&utm_medium=on_site_notification"),d.setArticle(e),d.closeHandler();var r=document.getElementsByClassName("izExitIntent")[0],a=document.createElement("iframe");a.id="iz-osn-frame",a.scrolling="no",a.style="position:fixed;width: 100%;height: 100%;top: 0;left:0; z-index: 9999999999;",document.body.appendChild(a),setTimeout(function(){a.contentDocument.body.appendChild(document.getElementById("iz-osn-dialog")),r.style.display="block",d.syncExitIntentView(),d.setRepeatPromptDelay(c.Config.exitIntent.repeatDelay)},100)}catch(e){p.Helper.displayLog("Error on show OSN dialogbox",e)}},d.initializeDialog=function(e){d.isDialogInitialize||(d.isDialogInitialize=!0,d.triggerOnEventType=e,d.getFeed(function(o){o&&!d.invalidFeed&&(d.feedData=o,r.HttpRequest.get("https://cdn.izooto.com/osn/exitintent.html?v=1",function(e,t){e&&(p.Helper.addHTML("div",e,d.dialogBoxID),d.AppendRightPostContainer(),d.showDialogBox(o,d.dialogBoxID))}))}))},d.AppendRightPostContainer=function(){try{this.smallPostContainer=document.getElementsByClassName(d.classPrefix+"smContainer")[0],this.defaultRightImage=this.smallPostContainer.querySelector("img").src;for(var e=1;e<d.maxAllowedPost;e++){var t=this.smallPostContainer.cloneNode(!0);document.getElementsByClassName(d.classPrefix+"right")[0].appendChild(t)}}catch(e){p.Helper.displayLog("Error to append right article container",e)}},d.loadFeed=function(i){var e="https://rec.izooto.com/rec/"+c.Config.hashFileName+"/0.json";r.HttpRequest.get(e,function(e,t){var o={};try{o=JSON.parse(e)}catch(e){p.Helper.displayLog("Error to loadfeed:",e)}return 200==t&&i(o),i(!1)})},d.sortedFeed=function(e){if(e.sort(function(e,t){return.5-Math.random()}),""==e[0].m)for(var t=1;t<e.length;t++)if(""!=e[t].m){var o=e[0];e[0]=e[t],e[t]=o;break}return e},d.getFeed=function(r){d.loadFeed(function(e){if(!e||e.length<5)r(!(d.invalidFeed=!0));else{var t,o=[];for(t in e){var i=e[t];""!=i.t&&""!=i.mi&&o.push(i)}var n=d.sortedFeed(o);5<=n.length&&"object"==typeof n&&r(n),r(!1)}})},d.setArticle=function(e){try{this.largePostContainer=document.getElementsByClassName(d.classPrefix+"left");var t,o=document.getElementsByClassName(d.classPrefix+"lgIcon")[0],i=document.getElementsByClassName(d.classPrefix+"title"),n=document.getElementsByClassName(d.classPrefix+"message"),r=document.getElementsByClassName(d.classPrefix+"timestamp"),a=o.src;o.onload=function(){o.onload=void 0,o.src=e[0].mi},o.onerror=function(){o.src!=a&&(o.onload=void 0,o.src=a)},i[0].innerHTML=e[0].t,""==e[0].m?n[0].classList.remove(d.classPrefix+"message"):(150<=(t=e[0].m).length&&(t+="..."),n[0].innerHTML=t),""==e[0].pt?r[0].style.display="none":r[0].innerHTML=p.Helper.getTimeAgoStringByTimestamp(1e3*e[0].pt),d.loaderClose(this.largePostContainer,0),this.largePostContainer[0].addEventListener("click",function(){window.open(d.addUTMOnUrl(e[0].l)),d.syncExitIntentClick(e[0].l,c.Config.exitIntent.rid,c.Config.exitIntent.cid,1)});for(var s=1==c.Config.global.deviceType?this.getRandomInt(4):this.getRandomInt(3),l=0;l<d.maxAllowedPost;l++)l==s&&1==c.Config.exitIntent.ads?this.showAd(s):d.setSmallArticle(l,e)}catch(e){p.Helper.displayLog("Error to load feed:",e)}},d.getRandomInt=function(e){return Math.floor(Math.random()*e)},d.setSmallArticle=function(e,o,t){var i=this;void 0===t&&(t=document);try{this.smallPostContainer=t.getElementsByClassName("iz_osn_smContainer");var n=t.getElementsByClassName(d.classPrefix+"smIcon"),r=t.getElementsByClassName(d.classPrefix+"title"),a=t.getElementsByClassName(d.classPrefix+"timestamp");n[e].setAttribute("osnindex",e);var s=o[e+1]||o;n[e].src=s.mi,n[e].onload=function(e){e.target.onload=void 0;var t=parseInt(e.target.getAttribute("osnindex")),t=o[t+1]||o;e.target.src=t.mi},n[e].onerror=function(e){parseInt(e.target.getAttribute("osnindex"));e.target.src!=i.defaultRightImage&&(e.target.onload=void 0,e.target.src=i.defaultRightImage)},r[e+1].innerHTML=s.t;var l=s.pt;""==l?a[e+1].style.display="none":a[e+1].innerHTML=s.isAd?"Sponsored":p.Helper.getTimeAgoStringByTimestamp(1e3*l),d.loaderClose(this.smallPostContainer,e),this.smallPostContainer[e].addEventListener("click",function(){s.isAd?(window.open(s.l),d.syncExitIntentClick(s.l,"ads","ads",e+2)):(window.open(d.addUTMOnUrl(s.l)),d.syncExitIntentClick(s.l,c.Config.exitIntent.rid,c.Config.exitIntent.cid,e+2))})}catch(e){p.Helper.displayLog("Error to set RightContainer article",e)}},d.addUTMOnUrl=function(e){e=p.Helper.replaceQueryParam(e,"utm_source","izooto"),e=p.Helper.replaceQueryParam(e,"utm_medium","on_site_notifications");return e=p.Helper.replaceQueryParam(e,"utm_campaign","Exit_Intent")},d.syncExitIntentClick=function(e,t,o,i,n){e=encodeURIComponent(e),i="pid="+c.Config.client+"&bkey="+p.Helper.getCurrentUUID()+"&cid="+o+"&rid="+t+"&link="+e+"&ed="+d.getEventTime()+"&tt="+d.triggerOnEventType+"&nc="+i;3==d.triggerOnEventType&&(i+="&tp="+c.Config.exitIntent.onScrollPercent),"ads"==t&&(i+="&adp="+n);n=p.Helper.getEndpoint("exitIntentClick");r.HttpRequest.post(n,{data:i},function(){c.Config.brandingPartner})},d.syncExitIntentView=function(){var e="pid="+c.Config.client+"&bkey="+p.Helper.getCurrentUUID()+"&cid="+c.Config.exitIntent.cid+"&rid="+c.Config.exitIntent.rid+"&ed="+d.getEventTime()+"&tt="+d.triggerOnEventType;3==d.triggerOnEventType&&(e+="&tp="+c.Config.exitIntent.onScrollPercent),d.adNotificationNo&&(e+="&adp="+d.adNotificationNo);var t=p.Helper.getEndpoint("syncExitIntentView");r.HttpRequest.post(t,{data:e},function(){p.Helper.setUUID(),c.Config.brandingPartner})},d.syncExitIntentDismissed=function(){var t={pid:c.Config.client,bkey:p.Helper.getCurrentUUID(),cid:c.Config.exitIntent.cid,rid:c.Config.exitIntent.rid,ed:d.getEventTime(),tt:d.triggerOnEventType};3==d.triggerOnEventType&&(t.tp=c.Config.exitIntent.onScrollPercent),d.adNotificationNo&&(t.adp=d.adNotificationNo);var e=p.Helper.getEndpoint("syncExitIntentDismissed");r.HttpRequest.post(e,{data:Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")},function(){})},d.loaderClose=function(e,t){try{for(var o=e[t].querySelectorAll("."+d.classPrefix+"animated"),i=0;i<o.length;i++)o[i].classList.remove(d.classPrefix+"animated")}catch(e){p.Helper.displayLog("Error to close loader on article")}},d.isDelayHandelar=function(){var e=!1,t=new Date;return i.Storage.getConfigLocal(n.KeyMapper.EXITINTENT_DELAY)>t.getTime()&&(e=!0,p.Helper.displayLog("Wait until exit intent repeat delay expire!")),e},d.hideFrame=function(){try{document.getElementById("iz-osn-frame").style.display="none"}catch(e){}},d.closeHandler=function(){document.getElementsByClassName(d.classPrefix+"close")[0].addEventListener("click",function(){d.hideFrame(),d.syncExitIntentDismissed(),d.setRepeatPromptDelay(c.Config.exitIntent.closeDelay)})},d.setRepeatPromptDelay=function(e){var t;0!==e&&(t=(t=new Date).setTime(t.getTime()+60*e*1e3),i.Storage.setConfigLocal(n.KeyMapper.EXITINTENT_DELAY,t))},d.getEventTime=function(){var e=new Date,t=new Date(d.startTime),t=e.getTime()-t.getTime();return parseInt(t/1e3)},d.classPrefix="iz_osn_",d.smallPostContainer="",d.defaultRightImage="",d.largePostContainer="",d.isDialogInitialize=!1,d.invalidFeed=!1,d.dialogBoxID="iz-osn-dialog",d.maxAllowedPost=4,d);function d(){}t.ExitIntent=o}]);